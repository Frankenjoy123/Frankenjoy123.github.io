<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="xiaowu&#39;s blog">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="xiaowu&#39;s blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xiaowu&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/"/>





  <title>xiaowu's blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3da41265a1a0042eebe5413c0d6c76f5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiaowu's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/教你如何成为Java的OOM-Killer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/教你如何成为Java的OOM-Killer/" itemprop="url">教你如何成为Java的OOM Killer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:47:38+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/线上故障排查/" itemprop="url" rel="index">
                    <span itemprop="name">线上故障排查</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/教你如何成为Java的OOM-Killer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/教你如何成为Java的OOM-Killer/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  21
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Become-OOM-Killer"><a href="#Become-OOM-Killer" class="headerlink" title="Become OOM Killer"></a>Become OOM Killer</h2><p>我们都知道JVM的内存管理是自动化的，Java语言的程序指针也不需要开发人员手工释放，JVM的GC会自动的进行回收，但是，如果编程不当，JVM仍然会发生内存泄露，导致Java程序产生了OutOfMemoryError（OOM）错误。</p>
<p>产生OutOfMemoryError错误的原因包括：</p>
<blockquote>
<ol>
<li>java.lang.OutOfMemoryError: Java heap space</li>
<li>java.lang.OutOfMemoryError: PermGen space及其解决方法</li>
<li>java.lang.OutOfMemoryError: unable to create new native thread</li>
<li>java.lang.OutOfMemoryError：GC overhead limit exceeded</li>
</ol>
</blockquote>
<p>对于第1种异常，表示Java堆空间不够，当应用程序申请更多的内存，而Java堆内存已经无法满足应用程序对内存的需要，将抛出这种异常。</p>
<p>对于第2种异常，表示Java永久带（方法区）空间不够，永久带用于存放类的字节码和长常量池，类的字节码加载后存放在这个区域，这和存放对象实例的堆区是不同的，大多数JVM的实现都不会对永久带进行垃圾回收，因此，只要类加载的过多就会出现这个问题。一般的应用程序都不会产生这个错误，然而，对于Web服务器来讲，会产生有大量的JSP，JSP在运行时被动态的编译成Java Servlet类，然后加载到方法区，因此，太多的JSP的Web工程可能产生这个异常。</p>
<p>对于第3种异常，本质原因是创建了太多的线程，而能创建的线程数是有限制的，导致了这种异常的发生。</p>
<p>对于第4种异常，是在并行或者并发回收器在GC回收时间过长、超过98%的时间用来做GC并且回收了不到2%的堆内存，然后抛出这种异常进行提前预警，用来避免内存过小造成应用不能正常工作。</p>
<p>下面两个异常与OOM有关系，但是，又没有绝对关系。</p>
<blockquote>
<ol>
<li>java.lang.StackOverflowError …</li>
<li>java.net.SocketException: Too many open files</li>
</ol>
</blockquote>
<p>对于第1种异常，是JVM的线程由于递归或者方法调用层次太多，占满了线程堆栈而导致的，线程堆栈默认大小为1M。</p>
<p>对于第2种异常，是由于系统对文件句柄的使用是有限制的，而某个应用程序使用的文件句柄超过了这个限制，就会导致这个问题。</p>
<p>上面介绍了OOM相关的基础知识，接下来我们开始讲述笔者经历的一次OOM问题的定位和解决的过程。</p>
<p><strong>1. 产生问题的现象</strong></p>
<p>在某一段时间内，我们发现不同的业务服务开始偶发的报OOM的异常，有的时候是白天发生，有的时候是晚上发生，有的时候是基础服务A发生，有的时候是上层服务B发生，有的时候是上层服务C发生，有的时候是下层服务D发生，丝毫看不到一点规律。</p>
<p>产生问题的异常如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java<span class="selector-class">.lang</span><span class="selector-class">.OutOfMemoryError</span>: unable to create new native thread at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.start0</span>(Native Method)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.start</span>(Thread<span class="selector-class">.java</span>:<span class="number">597</span>)</span><br><span class="line">at java<span class="selector-class">.util</span><span class="selector-class">.Timer</span>.&lt;init&gt;(Timer<span class="selector-class">.java</span>:<span class="number">154</span>)</span><br></pre></td></tr></table></figure>
<p><strong>2. 解决问题的思路和过程</strong></p>
<p>经过细心观察发现，产生问题虽然在不同的时间发生在不同的服务池，但是，晚上0点发生的时候概率较大，也有其他时间偶发，但是都在整点。</p>
<p>这个规律很重要，虽然不是一个时间，但是基本都在整点左右发生，并且晚上0点居多。从这个角度思考，整点或者0点系统是否有定时，与出问题的每个业务系统技术负责人核实，0点没有定时任务，其他时间的整点有定时任务，但是与发生问题的时间不吻合，这个思路行不通。</p>
<p>到现在为止，从现象的规律上我们已经没法继续分析下去了，那我们回顾一下错误本身：</p>
<blockquote>
<p>java.lang.OutOfMemoryError: unable to create new native thread</p>
</blockquote>
<p>顾名思义，错误产生的原因就是应用不能创建线程了，但是，应用还需要创建线程。为什么程序不能创建线程呢？</p>
<p>有两个具体原因造成这个异常:</p>
<blockquote>
<ol>
<li>由于线程使用的资源过多，操作系统已经不能再提供给应用资源了。</li>
<li>操作系统设置了应用创建线程的最大数量，并且已经达到了最大允许数量。</li>
</ol>
</blockquote>
<p>上面第1条资源指的是内存，而第2条中，在Linux下线程使用轻量级进程实现的，因此线程的最大数量也是操作系统允许的进程的最大数量。</p>
<p><em>内存计算</em></p>
<p>操作系统中的最大可用内存除去操作系统本身使用的部分，剩下的都可以为某一个进程服务，在JVM进程中，内存又被分为堆、本地内存和栈等三大块，Java堆是JVM自动管理的内存，应用的对象的创建和销毁、类的装载等都发生在这里，本地内存是Java应用使用的一种特殊内存，JVM并不直接管理其生命周期，每个线程也会有一个栈，是用来存储线程工作过程中产生的方法局部变量、方法参数和返回值的，每个线程对应的栈的默认大小为1M。</p>
<p>Linux和JVM的内存管理示意图如下：</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz_jpg/odp4zTVAogo5XkPb5f7cibDtDbGb5HUqBhBLwQDAFPtTbjwhCXrTDaf7KQjCASp4XJ896CaP7wYPwUNCWYicEeUw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="img"></p>
<p>因此，从内存角度来看创建线程需要内存空间，如果JVM进程正当一个应用创建线程，而操作系统没有剩余的内存分配给此JVM进程，则会抛出问题中的OOM异常：unable to create new native thread。</p>
<p>如下公式可以用来从内存角度计算允许创建的最大线程数：</p>
<blockquote>
<p>最大线程数 = （操作系统最大可用内存 - JVM内存 - 操作系统预留内存）/ 线程栈大小</p>
</blockquote>
<p>根据这个公式，我们可以通过剩余内存计算可以创建线程的数量。</p>
<p>下面是问题出现的时候，从生产机器上执行前面小节介绍的Linux命令free的输出：</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">free -m &gt;&gt; /tmp/free.log</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:         <span class="number"> 7872 </span>     <span class="number"> 7163 </span>      <span class="number"> 709 </span>        <span class="number"> 0 </span>       <span class="number"> 31 </span>      3807-/+ buffers/cache:      <span class="number"> 3324 </span>      4547Swap:        <span class="number"> 4095 </span>      <span class="number"> 173 </span>      3922Tue Jul<span class="number"> 5 </span>00:27:51 CST 2016</span><br></pre></td></tr></table></figure>
<p>从上面输出可以得出，生产机器8G内存，使用了7G，剩余700M可用，其中操作系统cache使用3.8G。操作系统cache使用的3.8G是用来缓存IO数据的，如果进程内存不够用，这些内存是可以释放出来优先分配给进程使用。然而，我们暂时并不需要考虑这块内存，剩余的700M空间完全可以继续用来创建线程数：</p>
<blockquote>
<p>700M / 1M = 700个线程</p>
</blockquote>
<p>因此，根据内存可用计算，当OOM异常：unable to create new native thread问题发生的时候，还有700M可用内存，可以创建700个线程。</p>
<p>到现在为止可以证明此次OOM异常不是因为线程吃光所有的内存而导致的。</p>
<p><em>线程数对比</em></p>
<p>上面提到，有两个具体原因造成这个异常，我们上面已经排除了第1个原因，那我们现在从第2个原因入手，评估是否操作系统设置了应用创建线程的最大数量，并且已经达到了最大允许数量。</p>
<p>在问题出现的生产机器上使用ulimit -a来显示当前的各种系统对用户使用资源的限制：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">robert@robert-ubuntu1410：~$ ulimit -acore <span class="keyword">file</span> <span class="keyword">size</span>          (blocks, -c) <span class="number">0</span>data seg <span class="keyword">size</span>           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) <span class="number">0</span><span class="keyword">file</span> <span class="keyword">size</span>               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) <span class="number">62819</span><span class="keyword">max</span> locked <span class="keyword">memory</span>       (kbytes, -l) <span class="number">64</span><span class="keyword">max</span> <span class="keyword">memory</span> <span class="keyword">size</span>         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) <span class="number">65535</span>pipe <span class="keyword">size</span>            (<span class="number">512</span> bytes, -p) <span class="number">8</span>POSIX message queues     (bytes, -q) <span class="number">819200</span>real-time priority              (-r) <span class="number">0</span>stack <span class="keyword">size</span>              (kbytes, -s) <span class="number">10240</span>cpu time               (seconds, -t) unlimited</span><br><span class="line"><span class="keyword">max</span> user processes              (-u) <span class="number">1024</span>virtual <span class="keyword">memory</span>          (kbytes, -v) unlimited</span><br><span class="line"><span class="keyword">file</span> locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>
<p>这里面我们看到生产机器设置的允许使用的最大用户进程数为1024：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max<span class="built_in"> user </span>processes              (-u) 1024</span><br></pre></td></tr></table></figure>
<p>现在，我们必须获得问题出现的时候，用户下创建的线程情况。</p>
<p>在问题产生的时候，我们使用前面小结介绍的JVM监控命令jstack命令打印出了Java线程情况,jstack命令的示例输出如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">robert@robert-ubuntu1410:~$ jstack <span class="number">2743</span></span><br><span class="line"></span><br><span class="line"><span class="number">2017</span>-<span class="number">04</span>-<span class="number">09</span> <span class="number">12</span>:<span class="number">06</span>:<span class="number">51</span>Full thread dump Java HotSpot(TM) Server VM (<span class="number">25.20</span>-b23 mixed mode):<span class="string">"Attach Listener"</span> #<span class="number">23</span> daemon prio=<span class="number">9</span> os_prio=<span class="number">0</span> tid=<span class="number">0</span>xc09adc00 nid=<span class="number">0</span>xb4c waiting on condition [<span class="number">0</span>x00000000]</span><br><span class="line">   java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.State</span>: RUNNABLE<span class="string">"http-nio-8080-Acceptor-0"</span> #<span class="number">22</span> daemon prio=<span class="number">5</span> os_prio=<span class="number">0</span> tid=<span class="number">0</span>xc3341000 nid=<span class="number">0</span>xb02 runnable [<span class="number">0</span>xbf1bd000]</span><br><span class="line">   java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.State</span>: RUNNABLE</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.ServerSocketChannelImpl</span><span class="selector-class">.accept0</span>(Native Method)</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.ServerSocketChannelImpl</span><span class="selector-class">.accept</span>(ServerSocketChannelImpl<span class="selector-class">.java</span>:<span class="number">241</span>)</span><br><span class="line">    - locked &lt;<span class="number">0</span>xcf8938d8&gt; (<span class="selector-tag">a</span> java<span class="selector-class">.lang</span><span class="selector-class">.Object</span>)</span><br><span class="line">    at org<span class="selector-class">.apache</span><span class="selector-class">.tomcat</span><span class="selector-class">.util</span><span class="selector-class">.net</span><span class="selector-class">.NioEndpoint</span><span class="variable">$Acceptor</span>.run(NioEndpoint<span class="selector-class">.java</span>:<span class="number">688</span>)</span><br><span class="line">    at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.run</span>(Thread<span class="selector-class">.java</span>:<span class="number">745</span>)<span class="string">"http-nio-8080-ClientPoller-1"</span> #<span class="number">21</span> daemon prio=<span class="number">5</span> os_prio=<span class="number">0</span> tid=<span class="number">0</span>xc35bc400 nid=<span class="number">0</span>xb01 runnable [<span class="number">0</span>xbf1fe000]</span><br><span class="line">   java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.State</span>: RUNNABLE</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.EPollArrayWrapper</span><span class="selector-class">.epollWait</span>(Native Method)</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.EPollArrayWrapper</span><span class="selector-class">.poll</span>(EPollArrayWrapper<span class="selector-class">.java</span>:<span class="number">269</span>)</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.EPollSelectorImpl</span><span class="selector-class">.doSelect</span>(EPollSelectorImpl<span class="selector-class">.java</span>:<span class="number">79</span>)</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.SelectorImpl</span><span class="selector-class">.lockAndDoSelect</span>(SelectorImpl<span class="selector-class">.java</span>:<span class="number">86</span>)</span><br><span class="line">    - locked &lt;<span class="number">0</span>xcf99b100&gt; (<span class="selector-tag">a</span> sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.Util</span>$<span class="number">2</span>)</span><br><span class="line">    - locked &lt;<span class="number">0</span>xcf99b0f0&gt; (<span class="selector-tag">a</span> java<span class="selector-class">.util</span><span class="selector-class">.Collections</span><span class="variable">$UnmodifiableSet</span>)</span><br><span class="line">    - locked &lt;<span class="number">0</span>xcf99aff8&gt; (<span class="selector-tag">a</span> sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.EPollSelectorImpl</span>)</span><br><span class="line">    at sun<span class="selector-class">.nio</span><span class="selector-class">.ch</span><span class="selector-class">.SelectorImpl</span><span class="selector-class">.select</span>(SelectorImpl<span class="selector-class">.java</span>:<span class="number">97</span>)</span><br><span class="line">    at org<span class="selector-class">.apache</span><span class="selector-class">.tomcat</span><span class="selector-class">.util</span><span class="selector-class">.net</span><span class="selector-class">.NioEndpoint</span><span class="variable">$Poller</span>.run(NioEndpoint<span class="selector-class">.java</span>:<span class="number">1052</span>)</span><br><span class="line">    at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.run</span>(Thread<span class="selector-class">.java</span>:<span class="number">745</span>)</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>从jstack命令的输出并统计后，我们得知，JVM一共创建了904个线程，但是，这还没有到最大的进程限制1024。</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">robert<span class="symbol">@robert</span>-ubuntu1410:~$ grep <span class="string">"Thread "</span> js.<span class="built_in">log</span> | wc -l</span><br><span class="line">     <span class="number">904</span></span><br></pre></td></tr></table></figure>
<p>这是我们思考，除了JVM创建的应用层线程，JVM本身可能会有一些管理线程存在，而且操作系统内用户下可能也会有守护线程在运行。</p>
<p>我们继续从操作系统的角度来统计线程数，我们使用上面小结介绍的Linux操作系统命令pstack，并得到如下的输出：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PID   LWP<span class="built_in"> USER </span>    %CPU %MEM CMD    1     1 root      0.0  0.0 /sbin/init    2     2 root      0.0  0.0 [kthreadd]    3     3 root      0.0  0.0 [migration/0]    4     4 root      0.0  0.0 [ksoftirqd/0]    5     5 root      0.0  0.0 [migration/0]    6     6 root      0.0  0.0 [watchdog/0]    7     7 root      0.0  0.0 [migration/1]    8     8 root      0.0  0.0 [migration/1]    9     9 root      0.0  0.0 [ksoftirqd/1]   10    10 root      0.0  0.0 [watchdog/1]   11    11 root      0.0  0.0 [migration/2]   12    12 root      0.0  0.0 [migration/2]   13    13 root      0.0  0.0 [ksoftirqd/2]   14    14 root      0.0  0.0 [watchdog/2]   15    15 root      0.0  0.0 [migration/3]   16    16 root      0.0  0.0 [migration/3]   17    17 root      0.0  0.0 [ksoftirqd/3]   18    18 root      0.0  0.0 [watchdog/3]   19    19 root      0.0  0.0 [events/0]   20    20 root      0.0  0.0 [events/1]   21    21 root      0.0  0.0 [events/2]   22    22 root      0.0  0.0 [events/3]   23    23 root      0.0  0.0 [cgroup]   24    24 root      0.0  0.0 [khelper]</span><br><span class="line"></span><br><span class="line"> <span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span> 7257  7257 zabbix    0.0  0.0 /usr/local/zabbix/sbin/zabbix_agentd: active checks #2 [idle 1 sec]</span><br><span class="line"> 7258  7258 zabbix    0.0  0.0 /usr/local/zabbix/sbin/zabbix_agentd: active checks #3 [idle 1 sec]</span><br><span class="line"> 7259  7259 zabbix    0.0  0.0 /usr/local/zabbix/sbin/zabbix_agentd: active checks #4 [idle 1 sec]</span><br><span class="line"></span><br><span class="line"> <span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span> 9040  9040 app       0.0 30.5 /apps/prod/jdk1.6.0_24/bin/java -Dnop -Djava.util.logging.<span class="attribute">manager</span>=org.apache.juli.ClassLoaderLogManager <span class="attribute">-Ddbconfigpath</span>=/apps/dbconfig/ -Djava.io.<span class="attribute">tmpdir</span>=/apps/data/java-tmpdir -server -Xms2048m -Xmx2048m -XX:<span class="attribute">PermSize</span>=128m -XX:<span class="attribute">MaxPermSize</span>=512m -Dcom.sun.management.jmxremote -Djava.rmi.server.<span class="attribute">hostname</span>=192.168.10.194 -Dcom.sun.management.jmxremote.<span class="attribute">port</span>=6969 -Dcom.sun.management.jmxremote.<span class="attribute">ssl</span>=<span class="literal">false</span> -Dcom.sun.management.jmxremote.<span class="attribute">authenticate</span>=<span class="literal">false</span> -XX:+HeapDumpOnOutOfMemoryError -XX:<span class="attribute">HeapDumpPath</span>=/tmp -Xshare:off <span class="attribute">-Dhostname</span>=sjsa-trade04 -Djute.<span class="attribute">maxbuffer</span>=41943040 -Djava.net.<span class="attribute">preferIPv4Stack</span>=<span class="literal">true</span> -Dfile.<span class="attribute">encoding</span>=UTF-8 <span class="attribute">-Dworkdir</span>=/apps/data/tomcat-work -Djava.endorsed.<span class="attribute">dirs</span>=/apps/product/tomcat-trade/endorsed -classpath commonlib:/apps/product/tomcat-trade/bin/bootstrap.jar:/apps/product/tomcat-trade/bin/tomcat-juli.jar -Dcatalina.<span class="attribute">base</span>=/apps/product/tomcat-trade -Dcatalina.<span class="attribute">home</span>=/apps/product/tomcat-trade -Djava.io.<span class="attribute">tmpdir</span>=/apps/data/tomcat-temp/ org.apache.catalina.startup.Bootstrap start 9040  9041 app       0.0 30.5 /apps/prod/jdk1.6.0_24/bin/java -Dnop -Djava.util.logging.<span class="attribute">manager</span>=org.apache.juli.ClassLoaderLogManager <span class="attribute">-Ddbconfigpath</span>=/apps/dbconfig/ -Djava.io.<span class="attribute">tmpdir</span>=/apps/data/java-tmpdir -server -Xms2048m -Xmx2048m -XX:<span class="attribute">PermSize</span>=128m -XX:<span class="attribute">MaxPermSize</span>=512m -Dcom.sun.management.jmxremote -Djava.rmi.server.<span class="attribute">hostname</span>=192.168.10.194 -Dcom.sun.management.jmxremote.<span class="attribute">port</span>=6969 -Dcom.sun.management.jmxremote.<span class="attribute">ssl</span>=<span class="literal">false</span> -Dcom.sun.management.jmxremote.<span class="attribute">authenticate</span>=<span class="literal">false</span> -XX:+HeapDumpOnOutOfMemoryError -XX:<span class="attribute">HeapDumpPath</span>=/tmp -Xshare:off <span class="attribute">-Dhostname</span>=sjsa-trade04 -Djute.<span class="attribute">maxbuffer</span>=41943040 -Djava.net.<span class="attribute">preferIPv4Stack</span>=<span class="literal">true</span> -Dfile.<span class="attribute">encoding</span>=UTF-8 <span class="attribute">-Dworkdir</span>=/apps/data/tomcat-work -Djava.endorsed.<span class="attribute">dirs</span>=/apps/product/tomcat-trade/endorsed -classpath commonlib:/apps/product/tomcat-trade/bin/bootstrap.jar:/apps/product/tomcat-trade/bin/tomcat-juli.jar -Dcatalina.<span class="attribute">base</span>=/apps/product/tomcat-trade -Dcatalina.<span class="attribute">home</span>=/apps/product/tomcat-trade -Djava.io.<span class="attribute">tmpdir</span>=/apps/data/tomcat-temp/ org.apache.catalina.startup.Bootstrap start</span><br><span class="line"></span><br><span class="line"><span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span></span><br></pre></td></tr></table></figure>
<p>通过命令统计用户下已经创建的线程数为1021。</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ grep app pthreads.<span class="built_in">log</span> <span class="string">| wc -l</span></span><br><span class="line">    <span class="number">1021</span></span><br></pre></td></tr></table></figure>
<p>现在我们确定，1021的数字已经相当的接近1021的最大进程数了，正如前面我们提到，在Linux操作系统里，线程是通过轻量级的进程实现的，因此，限制用户的最大进程数，就是限制用户的最大线程数，至于为什么没有精确达到1024这个最大值就已经报出异常，应该是系统的自我保护功能，在还剩下3个线程的前提下，就开始报错。</p>
<p>到此为止，我们已经通过分析来找到问题的原因，但是，我们还是不知道为什么会创建这么多的线程，从第一个输出得知，JVM已经创建的应用线程有907个，那么他们都在做什么事情呢？</p>
<p>于是，在问题发生的时候，我们又使用JVM的jstack命令，查看输出得知，每个线程都阻塞在打印日志的语句上，log4j中打印日志的代码实现如下：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callAppenders</span>(<span class="params">LoggingEvent <span class="keyword">event</span></span>) </span>&#123;    <span class="keyword">int</span> writes = <span class="number">0</span>;    <span class="keyword">for</span>(Category c = <span class="keyword">this</span>; c != <span class="literal">null</span>; c=c.parent) &#123;        <span class="comment">// Protected against simultaneous call to addAppender, removeAppender,...</span></span><br><span class="line">        synchronized(c) &#123;         </span><br><span class="line">        <span class="keyword">if</span>(c.aai != <span class="literal">null</span>) &#123;</span><br><span class="line">                writes += c.aai.appendLoopOnAppenders(<span class="keyword">event</span>);</span><br><span class="line">            &#125;            <span class="keyword">if</span>(!c.additive) &#123;                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    <span class="keyword">if</span>(writes == <span class="number">0</span>) &#123;</span><br><span class="line">        repository.emitNoAppenderWarning(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在log4j中，打印日志有一个锁，锁的作用是让打印日志可以串行，保证日志在日志文件中的正确性和顺序性。</p>
<p>那么，新的问题又来了，为什么只有凌晨0点会出现打印日志阻塞，其他时间会偶尔发生呢？这时，我们带着新的线索又回到问题开始的思路，凌晨12点应用没有定时任务，系统会不会有其他的IO密集型的任务，比如说归档日志、磁盘备份等？</p>
<p>经过与运维部门碰头，基本确定是每天凌晨0点日志切割导致磁盘IO被占用，于是堵塞打印日志，日志是每个工作任务都必须的，日志阻塞，线程池就阻塞，线程池阻塞就导致线程池被撑大，线程池里面的线程数超过1024就会报错。</p>
<p>到这里，我们基本确定了问题的原因，但是还需要对日志切割导致IO增大进行分析和论证。</p>
<p>首先我们使用前面小结介绍的vmstat查看问题发生时IO等待数据：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">vmstat</span> <span class="comment">2</span> <span class="comment">1</span> &gt;&gt; <span class="comment">/tmp/vm</span><span class="string">.</span><span class="comment">log</span></span><br><span class="line"><span class="comment">procs</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">memory</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">swap</span><span class="literal">-</span><span class="literal">-</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">io</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">system</span><span class="literal">-</span><span class="literal">-</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">cpu</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></span><br><span class="line"> <span class="comment">r</span>  <span class="comment">b</span>   <span class="comment">swpd</span>   <span class="comment">free</span>   <span class="comment">buff</span>  <span class="comment">cache</span>   <span class="comment">si</span>   <span class="comment">so</span>    <span class="comment">bi</span>    <span class="comment">bo</span>   <span class="comment">in</span>   <span class="comment">cs</span> <span class="comment">us</span> <span class="comment">sy</span> <span class="comment">id</span> <span class="comment">wa</span> <span class="comment">st</span> <span class="comment">3</span>  <span class="comment">0</span> <span class="comment">177608</span> <span class="comment">725636</span>  <span class="comment">31856</span> <span class="comment">3899144</span>    <span class="comment">0</span>    <span class="comment">0</span>     <span class="comment">2</span>    <span class="comment">10</span>    <span class="comment">0</span>    <span class="comment">0</span>  <span class="comment">39</span>  <span class="comment">1</span> <span class="comment">1</span>  <span class="comment">59</span>  <span class="comment">0</span>    <span class="comment">Tue</span> <span class="comment">Jul</span> <span class="comment">5</span> <span class="comment">00:27:51</span> <span class="comment">CST</span> <span class="comment">2016</span></span><br></pre></td></tr></table></figure>
<p>可见，问题发生的时候，CPU的IO等待为59%，同时又与运维部门同事复盘，运维同事确认，脚本切割通过cat命令方法，先把日志文件cat后，通过管道打印到另外一个文件，再清空原文件，因此，一定会导致IO的上升。</p>
<p>其实，问题的过程中，还有一个疑惑，我们认为线程被IO阻塞，线程池被撑开，导致线程增多，于是，我们查看了一下Tomcat线程池的设置，我们发现Tomcat线程池设置了800，按理说，永远不会超过1024。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector <span class="attribute">port</span>=<span class="string">"8080"</span>     </span><br><span class="line">               <span class="attribute">maxThreads</span>=<span class="string">"800"</span> <span class="attribute">minSpareThreads</span>=<span class="string">"25"</span> <span class="attribute">maxSpareThreads</span>=<span class="string">"75"</span>     </span><br><span class="line">               <span class="attribute">enableLookups</span>=<span class="string">"false"</span> <span class="attribute">redirectPort</span>=<span class="string">"8443"</span> <span class="attribute">acceptCount</span>=<span class="string">"100"</span>     </span><br><span class="line">               <span class="attribute">debug</span>=<span class="string">"0"</span> <span class="attribute">connectionTimeout</span>=<span class="string">"20000"</span>      </span><br><span class="line">               <span class="attribute">disableUploadTimeout</span>=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>关键在于，笔者所在的支付平台服务化架构中，使用了两套服务化框架，一个是基于dubbo的框架，一个是点对点的RPC，用来紧急情况下dubbo服务出现问题，服务降级使用。</p>
<p>每个服务都配置了点对点的RPC服务，并且独享一个线程池：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector <span class="attribute">port</span>=<span class="string">"8090"</span>     </span><br><span class="line">               <span class="attribute">maxThreads</span>=<span class="string">"800"</span> <span class="attribute">minSpareThreads</span>=<span class="string">"25"</span> <span class="attribute">maxSpareThreads</span>=<span class="string">"75"</span>     </span><br><span class="line">               <span class="attribute">enableLookups</span>=<span class="string">"false"</span> <span class="attribute">redirectPort</span>=<span class="string">"8443"</span> <span class="attribute">acceptCount</span>=<span class="string">"100"</span>     </span><br><span class="line">               <span class="attribute">debug</span>=<span class="string">"0"</span> <span class="attribute">connectionTimeout</span>=<span class="string">"20000"</span>      </span><br><span class="line">               <span class="attribute">disableUploadTimeout</span>=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>由于我们在对dubbo服务框架进行定制化的时候，设计了自动降级原则，如果dubbo服务负载变高，会自动切换到点对点的RPC框架，这也符合微服务的失效转移原则，但是设计中没有进行全面的考虑，一旦一部分服务切换到了点对点的RPC，而一部分的服务没有切换，就导致两个现场池都被撑满，于是超过了1024的限制，就出了问题。</p>
<p>到这里，我们基本可以验证，问题的根源是日志切割导致IO负载增加，然后阻塞线程池，最后发生OOM：unable to create new native thread。</p>
<p>剩下的任务就是最小化重现的问题，通过实践来验证问题的原因。我们与性能压测部门沟通，提出压测需求：</p>
<blockquote>
<ol>
<li>Tomcat线程池最大设置为1500.</li>
<li>操作系统允许的最大用户进程数1024.</li>
<li>在给服务加压的过程中，需要人工制造繁忙的IO操作，IO等待不得低于50%。</li>
</ol>
</blockquote>
<p>经过压测压测部门的一下午努力，环境搞定，结果证明完全可以重现此问题。</p>
<p>最后，与所有相关部门讨论和复盘，应用解决方案，解决方案包括：</p>
<blockquote>
<ol>
<li>全部应用改成按照小时切割，或者直接使用log4j的日志滚动功能。</li>
<li>Tomcat线程池的线程数设置与操作系统的线程数设置不合理，适当的减少Tomcat线程池线程数量的大小。</li>
<li>升级log4j日志，使用logback或者log4j2。</li>
</ol>
</blockquote>
<p>这次OOM问题的可以归结为“多个因、多个果、多台机器、多个服务池、不同时间”，针对这个问题，与运维部、监控部和性能压测部门的同事奋斗了几天几夜，终于通过在线上抓取信息、分析问题、在性能压测部门同事的帮助下，最小化重现问题并找到问题的根源原因，最后，针对问题产生的根源提供了有效的方案。</p>
<p><strong>3. 与监控同事现场编写的脚本</strong></p>
<p>本节提供一个笔者在实践过程中解决OOM问题的一个简单脚本，这个脚本是为了解决OOM（unable to create native thread)的问题而在问题机器上临时编写，并临时使用的，脚本并没有写的很专业，笔者也没有进行优化，保持原汁原味的风格，这样能让读者有种身临其境的感觉，只是为了抓取需要的信息并解决问题，但是在线上问题十分火急的情况下，这个脚本会有大用处。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bashps -Leo pid,lwp,user,pcpu,pmem,cmd &gt;&gt; /tmp/pthreads.logecho "ps -Leo pid,lwp,user,pcpu,pmem,cmd &gt;&gt; /tmp/pthreads.log" &gt;&gt; /tmp/pthreads.logecho `date` &gt;&gt; /tmp/pthreads.logecho 1pid=`ps aux|grep tomcat|grep cwh|awk -F ' ' '&#123;print $2&#125;'`echo 2echo "pstack $pid &gt;&gt; /tmp/pstack.log" &gt;&gt; /tmp/pstack.log</span></span><br><span class="line">pstack $pid <span class="meta">&gt;&gt; </span>/tmp/pstack.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/pstack</span>.logecho <span class="number">3</span>echo <span class="string">"lsof &gt;&gt; /tmp/sys-o-files.log"</span> &gt;&gt; <span class="regexp">/tmp/sys</span>-o-files.log</span><br><span class="line">lsof <span class="meta">&gt;&gt; </span>/tmp/sys-o-files.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/sys</span>-o-files.logecho <span class="number">4</span>echo <span class="string">"lsof -p $pid &gt;&gt; /tmp/service-o-files.log"</span> &gt;&gt; <span class="regexp">/tmp/service</span>-o-files.log</span><br><span class="line">lsof -p $pid <span class="meta">&gt;&gt; </span>/tmp/service-o-files.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/service</span>-o-files.logecho <span class="number">5</span>echo <span class="string">"jstack -l $pid  &gt;&gt; /tmp/js.log"</span> &gt;&gt; <span class="regexp">/tmp/js</span>.log</span><br><span class="line">jstack -l -F $pid  <span class="meta">&gt;&gt; </span>/tmp/js.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/js</span>.logecho <span class="number">6</span> echo <span class="string">"free -m &gt;&gt; /tmp/free.log"</span> &gt;&gt; <span class="regexp">/tmp/free</span>.log</span><br><span class="line">free -m <span class="meta">&gt;&gt; </span>/tmp/free.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/free</span>.logecho <span class="number">7</span>echo <span class="string">"vmstat 2 1 &gt;&gt; /tmp/vm.log"</span> &gt;&gt; <span class="regexp">/tmp/vm</span>.log</span><br><span class="line">vmstat <span class="number">2</span> <span class="number">1</span> <span class="meta">&gt;&gt; </span>/tmp/vm.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/vm</span>.logecho <span class="number">8</span>echo <span class="string">"jmap -dump:format=b,file=/tmp/heap.hprof 2743"</span> &gt;&gt; <span class="regexp">/tmp/jmap</span>.log</span><br><span class="line">jmap -<span class="symbol">dump:</span>format=b,file=<span class="regexp">/tmp/heap</span>.hprof <span class="meta">&gt;&gt; </span>/tmp/jmap.logecho <span class="string">`date`</span> &gt;&gt; <span class="regexp">/tmp/jmap</span>.logecho <span class="number">9</span>echo end</span><br></pre></td></tr></table></figure>
<p>如果读者在线上已经遇到了OOM的问题，可以顺着这个看似简陋而又信息满满的Java服务的监控脚本的思路，利用本文提供的各种脚本和命令来深挖问题的根本原因。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/线上服务内存OOM问题定位三板斧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/线上服务内存OOM问题定位三板斧/" itemprop="url">线上服务内存OOM问题定位三板斧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:43:42+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/线上故障排查/" itemprop="url" rel="index">
                    <span itemprop="name">线上故障排查</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/线上服务内存OOM问题定位三板斧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/线上服务内存OOM问题定位三板斧/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  870
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>相信大家都有感触，线上服务内存OOM的问题，是最难定位的问题，不过归根结底，最常见的原因：</p>
<ul>
<li>本身资源不够</li>
<li>申请的太多</li>
<li>资源耗尽</li>
</ul>
<p><strong>题目</strong></p>
<p>某服务器上部署了Java服务一枚，出现了OutOfMemoryError，请问有可能是什么原因，问题应该如何定位？</p>
<p>不妨设服务进程PID为10765</p>
<p><strong>解决思路</strong></p>
<p>Java服务OOM，最常见的原因为：</p>
<ul>
<li>有可能是内存分配确实过小，而正常业务使用了大量内存</li>
<li>某一个对象被频繁申请，却没有释放，内存不断泄漏，导致内存耗尽</li>
<li>某一个资源被频繁申请，系统资源耗尽，例如：不断创建线程，不断发起网络连接</li>
</ul>
<p>更具体的，可以使用以下的一些工具逐一排查。</p>
<h2 id="一、确认是不是内存本身就分配过小"><a href="#一、确认是不是内存本身就分配过小" class="headerlink" title="一、确认是不是内存本身就分配过小"></a>一、确认是不是内存本身就分配过小</h2><p>方法：jmap -heap 10765</p>
<p>可以查看新生代，老生代堆内存的分配大小以及使用情况，看是否本身分配过小。</p>
<h2 id="二、找到最耗内存的对象"><a href="#二、找到最耗内存的对象" class="headerlink" title="二、找到最耗内存的对象"></a>二、找到最耗内存的对象</h2><p><strong>方法</strong>：jmap -histo:live 10765 | more</p>
<p>输入命令后，会以表格的形式显示存活对象的信息，并按照所占内存大小排序：</p>
<ul>
<li><strong>实例数</strong></li>
<li><strong>所占内存大小</strong></li>
<li><strong>类名</strong></li>
</ul>
<p>是不是很直观？对于实例数较多，占用内存大小较多的实例/类，相关的代码就要针对性review了。</p>
<p>上图中占内存最多的对象是RingBufferLogEvent，共占用内存18M，属于正常使用范围。</p>
<p>如果发现某类对象占用内存很大（例如几个G），很可能是类对象创建太多，且一直未释放。例如：</p>
<ul>
<li>申请完资源后，未调用close()或dispose()释放资源</li>
<li>消费者消费速度慢（或停止消费了），而生产者不断往队列中投递任务，导致队列中任务累积过多</li>
</ul>
<h2 id="三、确认是否是资源耗尽"><a href="#三、确认是否是资源耗尽" class="headerlink" title="三、确认是否是资源耗尽"></a>三、确认是否是资源耗尽</h2><p>工具：</p>
<ul>
<li>pstree</li>
<li>netstat</li>
</ul>
<p>查看进程创建的线程数，以及网络连接数，如果资源耗尽，也可能出现OOM。</p>
<p>这里介绍另一种方法，通过</p>
<ul>
<li>/proc/${PID}/fd</li>
<li>/proc/${PID}/task</li>
</ul>
<p>可以分别查看句柄详情和线程数。</p>
<p>例如，某一台线上服务器的sshd进程PID是9339，查看</p>
<ul>
<li>ll /proc/9339/fd</li>
<li>ll /proc/9339/task</li>
</ul>
<p>如上图，sshd共占用了四个句柄</p>
<ul>
<li>0 -&gt; 标准输入</li>
<li>1 -&gt; 标准输出</li>
<li>2 -&gt; 标准错误输出</li>
<li>3 -&gt; socket（容易想到是监听端口）</li>
</ul>
<p>sshd只有一个主线程PID为9339，并没有多线程。</p>
<p>所以，只要</p>
<ul>
<li>ll /proc/${PID}/fd | wc -l</li>
<li>ll /proc/${PID}/task | wc -l （效果等同pstree -p | wc -l）</li>
</ul>
<p>就能知道进程打开的句柄数和线程数。</p>
<h2 id="附：MAT工具使用"><a href="#附：MAT工具使用" class="headerlink" title="附：MAT工具使用"></a>附：MAT工具使用</h2><p>mac安装mat</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/68a657ed2286" target="_blank" rel="external">https://www.jianshu.com/p/68a657ed2286</a></p>
</blockquote>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>修改mat.app/Contents/Eclipse/MemoryAnalyzer.ini<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-startup</span><br><span class="line">../Eclipse/plugins/org<span class="selector-class">.eclipse</span><span class="selector-class">.equinox</span><span class="selector-class">.launcher_1</span>.<span class="number">3.100</span><span class="selector-class">.v20150511-1540</span><span class="selector-class">.jar</span></span><br><span class="line">-data</span><br><span class="line">/Users/cdqiushengsen/Documents/mat/log</span><br><span class="line">--launcher.library</span><br><span class="line">../Eclipse/plugins/org<span class="selector-class">.eclipse</span><span class="selector-class">.equinox</span><span class="selector-class">.launcher</span><span class="selector-class">.cocoa</span><span class="selector-class">.macosx</span><span class="selector-class">.x86_64_1</span>.<span class="number">1.300</span>.v20150602-<span class="number">1417</span></span><br><span class="line">-vm</span><br><span class="line">/Library/Java/Home/jre</span><br><span class="line">-vmargs</span><br><span class="line">-Xmx1024m</span><br><span class="line">-Dorg<span class="selector-class">.eclipse</span><span class="selector-class">.swt</span><span class="selector-class">.internal</span><span class="selector-class">.carbon</span><span class="selector-class">.smallFonts</span></span><br><span class="line">-XstartOnFirstThread</span><br></pre></td></tr></table></figure></p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>mac启动</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mat.app<span class="regexp">/Contents/</span>MacOS<span class="regexp">/MemoryAnalyzer -data ./</span>workspace</span><br></pre></td></tr></table></figure>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>获取dump文件，配置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-Xms20m</span> <span class="selector-tag">-Xmx20m</span> <span class="selector-tag">-XX</span><span class="selector-pseudo">:+HeapDumpOnOutOfMemoryError</span></span><br></pre></td></tr></table></figure>
<p>示例</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapDumpMain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMHeapDumpObject</span></span>&#123;</span><br><span class="line">        <span class="keyword">String</span> str =<span class="string">"1234567890"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        List&lt;OOMHeapDumpObject&gt; ooms = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;OOMHeapDumpObject&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            ooms.add(<span class="keyword">new</span> <span class="type">OOMHeapDumpObject</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>打开生成Heap Dump文件</p>
</li>
<li><p>直接点击下方的 Reports-&gt;Leak Suspects 链接来生成报告，查看导致内存泄露的罪魁祸首</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/常用脚本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/常用脚本/" itemprop="url">常用脚本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/shell脚本/" itemprop="url" rel="index">
                    <span itemprop="name">shell脚本</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/常用脚本/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/常用脚本/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  610
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>PS：</p>
<p>本仓库的脚本（如<code>Java</code>相关脚本）在阿里等公司（如随身云，见<a href="https://github.com/Suishenyun/awesome-scripts" target="_blank" rel="external"><code>awesome-scripts</code>仓库</a>说明）的线上生产环境部署使用。<br>如果你的公司有部署使用，欢迎使用通过<a href="https://github.com/oldratlee/useful-scripts/issues" target="_blank" rel="external">提交Issue</a>告知，方便互相交流反馈～ :cupid:</p>
<h2 id="beginner-快速下载-amp-使用"><a href="#beginner-快速下载-amp-使用" class="headerlink" title=":beginner: 快速下载&amp;使用"></a>:beginner: 快速下载&amp;使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> &lt;(curl -fsSL https://raw.githubusercontent.com/oldratlee/useful-scripts/master/<span class="built_in">test</span>-cases/self-installer.sh)</span><br></pre></td></tr></table></figure>
<p>更多下载&amp;使用方式，参见<a href="docs/install.md">下载使用</a>。</p>
<h2 id="books-使用文档"><a href="#books-使用文档" class="headerlink" title=":books: 使用文档"></a>:books: 使用文档</h2><h3 id="coffee-Java相关脚本"><a href="#coffee-Java相关脚本" class="headerlink" title=":coffee: Java相关脚本"></a>:coffee: <a href="docs/java.md"><code>Java</code>相关脚本</a></h3><ol>
<li><a href="docs/java.md#beer-show-busy-java-threads">show-busy-java-threads</a><br> 用于快速排查<code>Java</code>的<code>CPU</code>性能问题(<code>top us</code>值过高)，自动查出运行的<code>Java</code>进程中消耗<code>CPU</code>多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</li>
<li><a href="docs/java.md#beer-show-duplicate-java-classes">show-duplicate-java-classes</a><br> 找出<code>jar</code>文件和<code>class</code>目录中的重复类。用于排查<code>Java</code>类冲突问题。</li>
<li><a href="docs/java.md#beer-find-in-jars">find-in-jars</a><br> 在目录下所有<code>jar</code>文件里，查找类或资源文件。</li>
</ol>
<h3 id="shell-Shell相关脚本"><a href="#shell-Shell相关脚本" class="headerlink" title=":shell: Shell相关脚本"></a>:shell: <a href="docs/shell.md"><code>Shell</code>相关脚本</a></h3><p><code>Shell</code>使用加强：</p>
<ol>
<li><a href="docs/shell.md#beer-c">c</a><br> 原样命令行输出，并拷贝标准输出到系统剪贴板，省去<code>CTRL+C</code>操作，优化命令行与其它应用之间的操作流。</li>
<li><a href="docs/shell.md#beer-coat">coat</a><br> 彩色<code>cat</code>出文件行，方便人眼区分不同的行。</li>
<li><a href="docs/shell.md#beer-a2l">a2l</a><br> 按行彩色输出参数，方便人眼查看。</li>
<li><a href="docs/shell.md#beer-ap-and-rp">ap and rp</a><br> 批量转换文件路径为绝对路径/相对路径，会自动跟踪链接并规范化路径。</li>
<li><a href="docs/shell.md#beer-tcp-connection-state-counter">tcp-connection-state-counter</a><br> 统计各个<code>TCP</code>连接状态的个数。用于方便排查系统连接负荷问题。</li>
<li><a href="docs/shell.md#beer-xpl-and-xpf">xpl and xpf</a><br> 在命令行中快速完成 在文件浏览器中 打开/选中 指定的文件或文件夹的操作，优化命令行与其它应用之间的操作流。</li>
</ol>
<p><code>Shell</code>开发/测试加强：</p>
<ol>
<li><a href="docs/shell.md#beer-echo-args">echo-args</a><br> 输出脚本收到的参数，在控制台运行时，把参数值括起的括号显示成 <strong>红色</strong>，方便人眼查看。用于调试脚本参数输入。</li>
<li><a href="docs/shell.md#beer-console-text-color-themessh">console-text-color-themes.sh</a><br> 显示<code>Terminator</code>的全部文字彩色组合的效果及其打印方式，用于开发<code>Shell</code>的彩色输出。</li>
<li><a href="docs/shell.md#beer-parseoptssh">parseOpts.sh</a><br> 命令行选项解析库，加强支持选项有多个值（即数组）。</li>
</ol>
<h3 id="watch-VCS相关脚本"><a href="#watch-VCS相关脚本" class="headerlink" title=":watch: VCS相关脚本"></a>:watch: <a href="docs/vcs.md"><code>VCS</code>相关脚本</a></h3><p>目前<code>VCS</code>的脚本都是<code>svn</code>分支相关的操作。使用更现代的<code>Git</code>吧！ :boom:</p>
<p>因为不推荐使用<code>svn</code>，这里不再列出有哪些脚本了，如果你有兴趣可以点上面链接去看。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/linux-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/linux-commands/" itemprop="url">linux常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/运维/" itemprop="url" rel="index">
                    <span itemprop="name">运维</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/linux-commands/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/linux-commands/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CPU相关、进程"><a href="#CPU相关、进程" class="headerlink" title="CPU相关、进程"></a>CPU相关、进程</h1><h2 id="查看cpu硬件配置"><a href="#查看cpu硬件配置" class="headerlink" title="查看cpu硬件配置"></a>查看cpu硬件配置</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">less</span> /<span class="meta">proc</span>/cpuinfo</span><br></pre></td></tr></table></figure>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname -a                查看内核<span class="regexp">/操作系统/</span>CPU信息</span><br><span class="line">head -n <span class="number">1</span> <span class="regexp">/etc/i</span>ssue    查看操作系统版本</span><br><span class="line">less <span class="regexp">/proc/</span>cpuinfo      查看CPU信息</span><br><span class="line">hostname                查看计算机名</span><br></pre></td></tr></table></figure>
<h2 id="top-命令"><a href="#top-命令" class="headerlink" title="top  命令"></a>top  命令</h2><p>实时显示各种系统资源使用情况及进程状态</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">详细命令参数：</span><br><span class="line">h: 显示帮助</span><br><span class="line"><span class="keyword">c</span>：显示详细的命令参数</span><br><span class="line">M：按照占用内存大小（<span class="symbol">%MEM</span> 列）对进程排序；</span><br><span class="line">P：按照 CPU 使用率( <span class="symbol">%CPU</span> 列）对进程排序；</span><br><span class="line">u：显示指定用户的进程。默认显示所有进程；</span><br><span class="line">T：根据累计运行时间排序</span><br></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一行：当前时间：系统已运行时间：<span class="number">751</span>天，目前<span class="number">4</span>个用户，<span class="number">1</span>、<span class="number">5</span>、<span class="number">15</span>分钟内的load分别是<span class="number">0.07</span>、<span class="number">0.02</span> 、<span class="number">0.00</span></span><br><span class="line">第二行：进程情况：总共<span class="number">148</span>个，正在运行的有<span class="number">2</span>个，休眠有<span class="number">139</span>个，僵尸进程<span class="number">1</span>个</span><br><span class="line">第三行：cpu的使用情况（按数字<span class="number">1</span>显示所有cpu）</span><br><span class="line">第四行：内存情况（buffers表示用作内核缓存的内存量）</span><br><span class="line">第五行：虚拟内存情况（系统的物理内存不够用的时候，把硬盘空间中的一部分空间释放出来，以供当前运行的程序使用）</span><br><span class="line">第六行：进程id，虚拟内存，驻留内存使用，cpu，内存使用百分比，运行时间,命令参数等。</span><br><span class="line">VIRT表示进程可以使用的内存总大小，VIRT=SWAP+RES，包括这个进程真实使用的内存, 映射过的文件, 和别的进程共享的内存等。</span><br><span class="line">RES表示这个进程真实占用内存的大小，一般这个值和JVM的参数配置有关，如果%MEM使用过高则需要关注</span><br><span class="line">SHR表示可以和别的进程共享的内存和库大小。</span><br></pre></td></tr></table></figure>
<ul>
<li>某一个进程下的线程资源使用情况：</li>
</ul>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">top</span> -p &#123;pid&#125; -H</span><br></pre></td></tr></table></figure>
<ul>
<li>查看系统load、cpu资源的其它命令</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mpstat <span class="number">1</span> （汇总的）</span><br><span class="line">mpstat -P ALL <span class="number">1</span>  （汇总的+每个cpu的）</span><br><span class="line">w</span><br><span class="line">uptime</span><br><span class="line">top -H 和 ps -efL/ -Tel  显示 线程</span><br></pre></td></tr></table></figure>
<h2 id="统计一个进程下的线程数"><a href="#统计一个进程下的线程数" class="headerlink" title="统计一个进程下的线程数"></a>统计一个进程下的线程数</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="string">/proc/</span>$&#123;pid&#125;<span class="string">/status</span></span><br><span class="line"></span><br><span class="line">返回：</span><br><span class="line"><span class="string">...</span>省略</span><br><span class="line">Threads:	74</span><br><span class="line"><span class="string">....</span>省略</span><br><span class="line"></span><br><span class="line">其它命令：</span><br><span class="line">top -bH -d 3 -p &#123;pid&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>pstree （以树状图的方式展现进程之间的派生关系）<br><a href="http://man.linuxde.net/pstree" target="_blank" rel="external">Linux命令大全</a></li>
</ul>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pstree -p</span><br><span class="line">pstree -p &#123;pid&#125; <span class="string">| wc -l</span></span><br></pre></td></tr></table></figure>
<ul>
<li>pstack （显示每个进程的栈跟踪），也可以查看一个进程下的线程总数</li>
</ul>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">pstack </span>&#123;pid&#125;</span><br><span class="line"><span class="comment">// 输出第一行</span></span><br><span class="line"><span class="class">pstack </span>&#123;pid&#125; | head <span class="number">-1</span></span><br></pre></td></tr></table></figure>
<h2 id="查看所有进程"><a href="#查看所有进程" class="headerlink" title="查看所有进程"></a>查看所有进程</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -ef</span><br><span class="line"><span class="keyword">ps</span> -ef|<span class="keyword">grep</span> java</span><br></pre></td></tr></table></figure>
<p>5、对于Java应用从操作系统层面观察，就只有进程和线程两个指标，任何东西在操作系统层面都是以文件的形式存储的，进程也不例外。Linux上部署一个Tomcat程序产生一个进程，这个进程所有的东西都在这个目录下</p>
<p>ll /proc/{pid}/</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 可以查看所有的socket连接</span></span><br><span class="line">ll /<span class="keyword">proc</span>/&#123;<span class="keyword">pid</span>&#125;/fd | grep <span class="keyword">socket</span></span><br></pre></td></tr></table></figure>
<h2 id="ulimit-a-（显示当前的各种用户进程限制）"><a href="#ulimit-a-（显示当前的各种用户进程限制）" class="headerlink" title="ulimit -a （显示当前的各种用户进程限制）"></a>ulimit -a （显示当前的各种用户进程限制）</h2><p><a href="http://blog.csdn.net/bbaiggey/article/details/51004817" target="_blank" rel="external">linux修改max user processes limits</a></p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ulimit -a</span><br><span class="line"></span><br><span class="line">core file size (<span class="name">blocks</span>, -c) <span class="number">100</span></span><br><span class="line">data seg size (<span class="name">kbytes</span>, -d) unlimited</span><br><span class="line">file size (<span class="name">blocks</span>, -f) unlimited</span><br><span class="line">pending signals (<span class="name">-i</span>) <span class="number">15237</span></span><br><span class="line">max locked memory (<span class="name">kbytes</span>, -l) <span class="number">64</span></span><br><span class="line">max memory size (<span class="name">kbytes</span>, -m) unlimited</span><br><span class="line">open files (<span class="name">-n</span>) <span class="number">1024</span></span><br><span class="line">pipe size (<span class="number">512</span> bytes, -p) <span class="number">8</span></span><br><span class="line">POSIX message queues (<span class="name">bytes</span>, -q) <span class="number">819200</span></span><br><span class="line">stack size (<span class="name">kbytes</span>, -s) <span class="number">8192</span></span><br><span class="line">cpu time (<span class="name">seconds</span>, -t) unlimited</span><br><span class="line">max user processes (<span class="name">-u</span>) <span class="number">15237</span></span><br><span class="line">virtual memory (<span class="name">kbytes</span>, -v) unlimited</span><br><span class="line">file locks (<span class="name">-x</span>) unlimited</span><br></pre></td></tr></table></figure>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">输出的每一行由资源名字、（单位，ulimit命令的参数）、软限制组成。详细解释：</span><br><span class="line">参数 描述</span><br><span class="line">core <span class="keyword">file</span> <span class="keyword">size</span> core文件的最大值为<span class="number">100</span> blocks，</span><br><span class="line">data seg <span class="keyword">size</span> 进程的数据段可以任意大</span><br><span class="line"><span class="keyword">file</span> <span class="keyword">size</span> 文件可以任意大</span><br><span class="line">pending signals 最多有<span class="number">15237</span>个待处理的信号</span><br><span class="line"><span class="keyword">max</span> locked <span class="keyword">memory</span> 一个任务锁住的物理内存的最大值为<span class="number">64</span>kB</span><br><span class="line"><span class="keyword">max</span> <span class="keyword">memory</span> <span class="keyword">size</span> 一个任务的常驻物理内存的最大值</span><br><span class="line">open files 一个任务最多可以同时打开<span class="number">1024</span>的文件</span><br><span class="line">pipe <span class="keyword">size</span> 管道的最大空间为<span class="number">4096</span>字节</span><br><span class="line">POSIX message queues POSIX的消息队列的最大值为<span class="number">819200</span>字节</span><br><span class="line">stack <span class="keyword">size</span> 进程的栈的最大值为<span class="number">8192</span>字节</span><br><span class="line">cpu time 进程使用的CPU时间</span><br><span class="line"><span class="keyword">max</span> user processes 当前用户同时打开的进程(包括线程)的最大个数为<span class="number">15237</span></span><br><span class="line">virtual <span class="keyword">memory</span> 没有限制进程的最大地址空间</span><br><span class="line"><span class="keyword">file</span> locks 所能锁住的文件的最大个数没有限制</span><br></pre></td></tr></table></figure>
<h1 id="内存相关"><a href="#内存相关" class="headerlink" title="内存相关"></a>内存相关</h1><h2 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h2><p>Virtual Memory Statistics，统计进程、内存、io、cpu等的活动信息。对于多CPU系统，vmstat打印的是所有CPU的平均输出</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">procs</span><br><span class="line"><span class="symbol">r:</span> 运行队列中进程数量</span><br><span class="line"><span class="symbol">b:</span> 等待IO的进程数量</span><br><span class="line">memory</span><br><span class="line"><span class="symbol">swpd:</span> 使用虚拟内存大小</span><br><span class="line"><span class="symbol">free:</span> 可用内存大小</span><br><span class="line"><span class="symbol">buff:</span> 用作缓冲的内存大小</span><br><span class="line"><span class="symbol">cache:</span> 用作缓存的内存大小</span><br><span class="line"><span class="keyword">swap</span></span><br><span class="line"><span class="symbol">si:</span> 每秒从交换区写到内存的大小</span><br><span class="line"><span class="symbol">so:</span> 每秒从内存写入交换区的大小</span><br><span class="line">io</span><br><span class="line"><span class="symbol">bi:</span> 每秒读取的块数（现在的Linux版本块的大小为<span class="number">1024</span>bytes）</span><br><span class="line"><span class="symbol">bo:</span> 每秒写入的块数</span><br><span class="line">system</span><br><span class="line"><span class="symbol">in:</span> 每秒中断数，包括时钟中断</span><br><span class="line"><span class="symbol">cs:</span> 每秒上下文切换数</span><br><span class="line">cpu（以百分比表示）</span><br><span class="line"><span class="symbol">us:</span> 用户进程执行时间(user time)</span><br><span class="line"><span class="symbol">sy:</span> 系统进程执行时间(system time)</span><br><span class="line"><span class="symbol">id:</span> 空闲时间(包括IO等待时间)</span><br><span class="line"><span class="symbol">wa:</span> 等待IO时间</span><br></pre></td></tr></table></figure>
<p><strong>注意：排查问题时，要特别关注r的值，如果长时间超过cpu核数2倍，说明系统的负载很重，cpu已经无法及时处理堆积任务。</strong></p>
<h1 id="IO及网络"><a href="#IO及网络" class="headerlink" title="IO及网络"></a>IO及网络</h1><h2 id="网络协议"><a href="#网络协议" class="headerlink" title="网络协议"></a>网络协议</h2><h3 id="OSI-七层模型-（应表会，传网数物）"><a href="#OSI-七层模型-（应表会，传网数物）" class="headerlink" title="OSI 七层模型 （应表会，传网数物）"></a>OSI 七层模型 （应表会，传网数物）</h3><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>APDU应用协议数据单元</td>
<td>应用协议数据单元 用户接口</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>表示层</td>
<td>PPDU</td>
<td>数据的表现形式，压缩、加密</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>会话层</td>
<td>SPDU</td>
<td>会话的管理、同步</td>
<td>上三层，给用户</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>传输层</td>
<td>TPDU</td>
<td>TCP/UDP 可靠与不可靠的传输，确定端口</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>网络层</td>
<td></td>
<td>IP地址 报文，提供逻辑地址，选路由</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>数据链路层</td>
<td></td>
<td>成帧、用MAC地址访问媒介</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>物理层</td>
<td>物理层协议</td>
<td>设备之间的比特流的传输、物理接口、电气特性等</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="TCP-IP-四层协议"><a href="#TCP-IP-四层协议" class="headerlink" title="TCP/IP 四层协议"></a>TCP/IP 四层协议</h3><h2 id="常用网络命令"><a href="#常用网络命令" class="headerlink" title="常用网络命令"></a>常用网络命令</h2><h3 id="清理dns缓存"><a href="#清理dns缓存" class="headerlink" title="清理dns缓存"></a>清理dns缓存</h3><ul>
<li>mac</li>
</ul>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo dscacheutil -flushcache</span></span><br></pre></td></tr></table></figure>
<h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><blockquote>
<p><a href="http://aiezu.com/article/linux_curl_command.html" target="_blank" rel="external">http://aiezu.com/article/linux_curl_command.html</a></p>
</blockquote>
<p><code>-i</code>输出响应头和内容, <code>-b</code>设置cookie内容</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -<span class="selector-tag">i</span> -<span class="selector-tag">b</span> <span class="string">"TSESSIONID=K5PCUJM6W-NWH6793X36IPW7Y7QWSW3-868SY2XJ-YP6"</span> https:<span class="comment">//portal.tongdun.cn/admin/acl/userManage.json?operationType=doSearch</span></span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -<span class="selector-tag">i</span> -<span class="selector-tag">b</span> <span class="string">"TSESSIONID=K5PCUJM6W-NWH6793X36IPW7Y7QWSW3-868SY2XJ-YP6"</span> https:<span class="comment">//oceanus.tongdun.cn/PartnerAppSelect.json?operationType=doSelectMessage</span></span><br><span class="line"></span><br><span class="line">curl -<span class="selector-tag">i</span> http:<span class="comment">//login-dev.tongdun.cn:8081/userLogin.htm\?loginId\=asgard.pro.06@demo.com\&amp;password\=Tongdun123450</span></span><br><span class="line"></span><br><span class="line">curl -<span class="selector-tag">i</span> https:<span class="comment">//login.tongdun.cn/userLogin.htm\?loginId\=asgard.pro.06@demo.com\&amp;password\=Tongdun123450</span></span><br></pre></td></tr></table></figure>
<h3 id="tsar-–traffic：显示网络带宽"><a href="#tsar-–traffic：显示网络带宽" class="headerlink" title="tsar –traffic：显示网络带宽"></a>tsar –traffic：显示网络带宽</h3><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 查看端口，及其进程</span></span><br><span class="line">netstat -tunlp <span class="string">| grep 8088</span></span><br></pre></td></tr></table></figure>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 所有TCP链接</span></span><br><span class="line">netstat -nat</span><br><span class="line"><span class="comment"># 查询dubbo的链接，总数</span></span><br><span class="line">netstat -nat |<span class="string"> grep ip:20880 </span>|<span class="string"> wc -l</span></span><br></pre></td></tr></table></figure>
<ul>
<li>统计每个状态的数量</li>
</ul>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -n | awk '/^tcp/ &#123;++<span class="keyword">state</span>[<span class="variable">$NF</span>]&#125; END &#123;<span class="keyword">for</span>(key <span class="keyword">in</span> <span class="keyword">state</span>) print key,<span class="string">"\t"</span>,<span class="keyword">state</span>[key]&#125;'</span><br></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TIME_WAIT 	 <span class="number">5856</span></span><br><span class="line">CLOSE_WAIT 	 <span class="number">268</span></span><br><span class="line">FIN_WAIT1 	 <span class="number">3</span></span><br><span class="line">ESTABLISHED 	 <span class="number">4837</span></span><br><span class="line">SYN_RECV 	 <span class="number">14</span></span><br><span class="line">CLOSING 	 <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">t tcp</span></span><br><span class="line"><span class="ruby">-u udp</span></span><br><span class="line"><span class="ruby">-n numeric，使用数字显示，不用别名</span></span><br><span class="line"><span class="ruby">-l listening,正在监听</span></span><br><span class="line"><span class="ruby">-p programs,显示pid和名称</span></span><br></pre></td></tr></table></figure>
<p>一般用于检验本机各端口的网络连接情况。netstat是在内核中访问网络及相关信息的程序，它能提供TCP连接，TCP和UDP监听，进程内存管理的相关报告。</p>
<p><strong>命令参数：</strong></p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">a或–all 显示所有连线中的Socket。</span></span><br><span class="line"><span class="ruby">-A&lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。</span></span><br><span class="line"><span class="ruby">-c或–continuous 持续列出网络状态。</span></span><br><span class="line"><span class="ruby">-C或–cache 显示路由器配置的快取信息。</span></span><br><span class="line"><span class="ruby">-e或–extend 显示网络其他相关信息。</span></span><br><span class="line"><span class="ruby">-F或–fib 显示FIB。</span></span><br><span class="line"><span class="ruby">-g或–groups 显示多重广播功能群组组员名单。</span></span><br><span class="line"><span class="ruby">-h或–help 在线帮助。</span></span><br><span class="line"><span class="ruby">-i或–interfaces 显示网络界面信息表单。</span></span><br><span class="line"><span class="ruby">-l或–listening 显示监控中的服务器的Socket。</span></span><br><span class="line"><span class="ruby">-M或–masquerade 显示伪装的网络连线。</span></span><br><span class="line"><span class="ruby">-n或–numeric 直接使用IP地址，而不通过域名服务器。</span></span><br><span class="line"><span class="ruby">-N或–netlink或–symbolic 显示网络硬件外围设备的符号连接名称。</span></span><br><span class="line"><span class="ruby">-o或–timers 显示计时器。</span></span><br><span class="line"><span class="ruby">-p或–programs 显示正在使用Socket的程序识别码和程序名称。</span></span><br><span class="line"><span class="ruby">-r或–route 显示Routing Table。</span></span><br><span class="line"><span class="ruby">-s或–statistice 显示网络工作信息统计表。</span></span><br><span class="line"><span class="ruby">-t或–tcp 显示TCP传输协议的连线状况。</span></span><br><span class="line"><span class="ruby">-u或–udp 显示UDP传输协议的连线状况。</span></span><br><span class="line"><span class="ruby">-v或–verbose 显示指令执行过程。</span></span><br><span class="line"><span class="ruby">-V或–version 显示版本信息。</span></span><br><span class="line"><span class="ruby">-w或–raw 显示RAW传输协议的连线状况。</span></span><br><span class="line"><span class="ruby">-x或–unix 此参数的效果和指定”-A unix”参数相同。</span></span><br><span class="line"><span class="ruby">–ip或–inet 此参数的效果和指定”-A inet”参数相同。</span></span><br></pre></td></tr></table></figure>
<p><strong>输出结果：</strong></p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">一个是Active Internet connections，称为有源TCP连接，其中<span class="string">"Recv-Q"</span>和<span class="string">"Send-Q"</span>指的是接收队列和发送队列。这些数字一般都应该是<span class="number">0</span>。如果不是则表示软件包正在队列中堆积。这种情况只能在非常少的情况见到。</span><br><span class="line"></span><br><span class="line">另一个是Active UNIX domain sockets，称为有源Unix域套接口(和网络套接字一样，但是只能用于本机通信，性能可以提高一倍)。</span><br><span class="line"></span><br><span class="line">Proto显示连接使用的协议,RefCnt表示连接到本套接口上的进程号,Types显示套接口的类型,State显示套接口当前的状态,Path表示连接到套接口的其它进程使用的路径名。</span><br><span class="line"></span><br><span class="line">状态说明：</span><br><span class="line">LISTEN：侦听来自远方的TCP端口的连接请求</span><br><span class="line">SYN-SENT：再发送连接请求后等待匹配的连接请求（如果有大量这样的状态包，检查是否中招了）</span><br><span class="line">SYN-RECEIVED：再收到和发送一个连接请求后等待对方对连接请求的确认（如有大量此状态，估计被flood攻击了）</span><br><span class="line">ESTABLISHED：代表一个打开的连接</span><br><span class="line">FIN-<span class="built_in">WAIT</span><span class="number">-1</span>：等待远程TCP连接中断请求，或先前的连接中断请求的确认</span><br><span class="line">FIN-<span class="built_in">WAIT</span><span class="number">-2</span>：从远程TCP等待连接中断请求</span><br><span class="line"><span class="built_in">CLOSE</span>-<span class="built_in">WAIT</span>：等待从本地用户发来的连接中断请求</span><br><span class="line">CLOSING：等待远程TCP对连接中断的确认</span><br><span class="line">LAST-ACK：等待原来的发向远程TCP的连接中断请求的确认（不是什么好东西，此项出现，检查是否被攻击）</span><br><span class="line"><span class="built_in">TIME</span>-<span class="built_in">WAIT</span>：等待足够的时间以确保远程TCP接收到连接中断请求的确认</span><br><span class="line">CLOSED：没有任何连接状态</span><br></pre></td></tr></table></figure>
<ul>
<li>找出运行在指定端口的进程</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -anpt | <span class="keyword">grep</span> <span class="string">':20130'</span></span><br><span class="line">netstat -nat | <span class="keyword">grep</span> <span class="string">"172.16.49.161:20130"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>其它使用场景</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">netstat -nat |awk <span class="string">'&#123;print $6&#125;'</span>|<span class="keyword">sort</span>|uniq -<span class="keyword">c</span>    不同网络状态结果统计</span><br><span class="line">netstat -anop | <span class="keyword">grep</span> <span class="number">6379</span>     应用连接Redis情况</span><br><span class="line">netstat -<span class="keyword">pt</span>             输出中显示 PID 和进程名称</span><br><span class="line">netstat -s              查看网络统计信息</span><br><span class="line">netstat -<span class="keyword">nu</span>             显示当前UDP连接状况</span><br><span class="line">netstat -nt             显示当前TCP连接状况</span><br><span class="line">netstat -i              显示网卡列表</span><br></pre></td></tr></table></figure>
<h3 id="3、-iostat"><a href="#3、-iostat" class="headerlink" title="3、 iostat"></a>3、 iostat</h3><p>iostat是I/O statistics（输入/输出统计）的缩写，主要的功能是对系统的磁盘I/O操作进行监视。它的输出主要显示磁盘读写操作的统计信息，同时也会给出CPU使用情况。同vmstat一样，iostat也不能对某个进程进行深入分析，仅对系统的整体情况进行分析。</p>
<p><strong>命令参数：</strong></p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">c 显示CPU使用情况</span></span><br><span class="line"><span class="ruby">-d 显示磁盘使用情况</span></span><br><span class="line"><span class="ruby">-k 以 KB 为单位显示</span></span><br><span class="line"><span class="ruby">-m 以 M 为单位显示</span></span><br><span class="line"><span class="ruby">-N 显示磁盘阵列(LVM) 信息</span></span><br><span class="line"><span class="ruby">-n 显示NFS 使用情况</span></span><br><span class="line"><span class="ruby">-p[磁盘] 显示磁盘和分区的情况</span></span><br><span class="line"><span class="ruby">-t 显示终端和CPU的信息</span></span><br><span class="line"><span class="ruby">-x 显示详细信息</span></span><br><span class="line"><span class="ruby">-V 显示版本信息</span></span><br></pre></td></tr></table></figure>
<p><strong>输出结果：</strong></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cpu属性值说明：</span><br><span class="line"></span><br><span class="line">%user：CPU处在用户模式下的时间百分比。</span><br><span class="line">%nice：CPU处在带NICE值的用户模式下的时间百分比。</span><br><span class="line">%system：CPU处在系统模式下的时间百分比。</span><br><span class="line">%iowait：CPU等待输入输出完成时间的百分比。</span><br><span class="line">%steal：管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比。</span><br><span class="line">%idle：CPU空闲时间百分比。</span><br><span class="line"></span><br><span class="line">备注：如果%iowait的值过高，表示硬盘存在<span class="keyword">I</span>/<span class="keyword">O</span>瓶颈，%idle值高，表示CPU较空闲，如果%idle值高但系统响应慢时，有可能是CPU等待分配内存，此时应加大内存容量。%idle值如果持续低于<span class="number">10</span>，那么系统的CPU处理能力相对较低，表明系统中最需要解决的资源是CPU。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">disk属性值说明：（iostat -x）</span><br><span class="line"></span><br><span class="line">rrqm/s:  每秒进行 merge 的读操作数目。即 rmerge/s</span><br><span class="line">wrqm/s:  每秒进行 merge 的写操作数目。即 wmerge/s</span><br><span class="line">r/s:  每秒完成的读 <span class="keyword">I</span>/<span class="keyword">O</span> 设备次数。即 rio/s</span><br><span class="line">w/s:  每秒完成的写 <span class="keyword">I</span>/<span class="keyword">O</span> 设备次数。即 wio/s</span><br><span class="line">rsec/s:  每秒读扇区数。即 rsect/s</span><br><span class="line">wsec/s:  每秒写扇区数。即 wsect/s</span><br><span class="line">rkB/s:  每秒读<span class="keyword">K</span>字节数。是 rsect/s 的一半，因为每扇区大小为<span class="number">512</span>字节。</span><br><span class="line">wkB/s:  每秒写<span class="keyword">K</span>字节数。是 wsect/s 的一半。</span><br><span class="line">avgrq-sz:  平均每次设备<span class="keyword">I</span>/<span class="keyword">O</span>操作的数据大小 (扇区)。</span><br><span class="line">avgqu-sz:  平均<span class="keyword">I</span>/<span class="keyword">O</span>队列长度。</span><br><span class="line">await:  平均每次设备<span class="keyword">I</span>/<span class="keyword">O</span>操作的等待时间 (毫秒)。</span><br><span class="line">svctm: 平均每次设备<span class="keyword">I</span>/<span class="keyword">O</span>操作的服务时间 (毫秒)。</span><br><span class="line">%util:  一秒中有百分之多少的时间用于 <span class="keyword">I</span>/<span class="keyword">O</span> 操作，即被io消耗的cpu百分比</span><br><span class="line"></span><br><span class="line">备注：如果 %util 接近 <span class="number">100</span>%，说明产生的<span class="keyword">I</span>/<span class="keyword">O</span>请求太多，<span class="keyword">I</span>/<span class="keyword">O</span>系统已经满负荷，该磁盘可能存在瓶颈。如果 svctm 比较接近 await，说明 <span class="keyword">I</span>/<span class="keyword">O</span> 几乎没有等待时间；如果 await 远大于 svctm，说明<span class="keyword">I</span>/<span class="keyword">O</span> 队列太长，io响应太慢，则需要进行必要优化。如果avgqu-sz比较大，也表示有当量io在等待。</span><br></pre></td></tr></table></figure>
<ul>
<li>定时显示所有信息（每隔 2秒刷新显示，且显示3次）</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<ul>
<li>以kB为单位显示所有信息</li>
</ul>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">iostat</span> -k <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h3 id="4、traceroute"><a href="#4、traceroute" class="headerlink" title="4、traceroute"></a>4、traceroute</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute www<span class="selector-class">.baidu</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>
<h3 id="5、telnet"><a href="#5、telnet" class="headerlink" title="5、telnet"></a>5、telnet</h3><ul>
<li>退出，ctrl+]  出现telnet后，再输入quit</li>
</ul>
<h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><h2 id="lsof-一切皆文件"><a href="#lsof-一切皆文件" class="headerlink" title="lsof (一切皆文件)"></a>lsof (一切皆文件)</h2><p><a href="http://man.linuxde.net/lsof" target="_blank" rel="external">命令详情</a></p>
<p>查看你进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看sys.log文件被哪个进程打开</span></span><br><span class="line">lsof sys.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看端口被哪个进程占用</span></span><br><span class="line">lsof  -i：端口号</span><br></pre></td></tr></table></figure>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看各个进程打开的文件数量</span></span><br><span class="line">lsof -<span class="keyword">n</span> |awk '&#123;<span class="keyword">print</span> <span class="variable">$2&#125;</span> <span class="string">" "</span> <span class="variable">$3</span>'|<span class="keyword">sort</span>|uniq -c |<span class="keyword">sort</span> -nr|<span class="keyword">more</span></span><br></pre></td></tr></table></figure>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">df</span> -hl</span><br><span class="line">df -h  查看磁盘的使用情况</span><br><span class="line">磁盘的使用情况</span><br></pre></td></tr></table></figure>
<h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du</span> -hl</span><br><span class="line">当前目录下的最叶子目录的大小</span><br></pre></td></tr></table></figure>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">du -<span class="keyword">sch </span>*</span><br><span class="line">当前目录下的各目录的大小</span><br></pre></td></tr></table></figure>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>文件查找</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find</span> . -name <span class="string">"*蝙蝠侠*"</span></span><br><span class="line"># 找出当前目录以及其所有子目录下所有名字中包含“蝙蝠侠”三字的文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -inmae <span class="string">'*hello*'</span> -maxdepth <span class="number">1</span></span><br><span class="line">不区分大小写，在当前目录查找，不包括子目录</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -name <span class="string">"*.rmvb"</span> -maxdepth <span class="number">1</span></span><br><span class="line"># 找出当前目录（不包括子目录）下所有名字中后缀为<span class="string">".rmvb"</span>的文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -name sys.<span class="built_in">log</span></span><br><span class="line">当前目录下查找sys.<span class="built_in">log</span>文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -name <span class="string">"sy*log"</span></span><br><span class="line">查找文件支持通配符</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -size +<span class="number">20</span>M</span><br><span class="line">查找当前目录下大小超过<span class="number">20</span>M的文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> . -size +<span class="number">20</span>M | xargs <span class="keyword">ls</span> -<span class="keyword">lh</span></span><br><span class="line">查找当前目录下大小超过<span class="number">20</span>M的文件，并计算文件大小</span><br><span class="line"></span><br><span class="line"><span class="keyword">find</span> -<span class="built_in">type</span> <span class="keyword">f</span> -<span class="built_in">printf</span> <span class="string">'%s %p\n'</span> |<span class="keyword">sort</span> -nr | head</span><br><span class="line">查找占用空间最大的<span class="number">10</span>个文件</span><br></pre></td></tr></table></figure>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--递归查找目录下含有该字符串的所有文件</span><br><span class="line"><span class="keyword">grep</span> -rn <span class="string">"data_chushou_pay_info"</span>  /home/hadoop/nisj/automationDemand/</span><br><span class="line"></span><br><span class="line">--查找当前目录下后缀名过滤的文件</span><br><span class="line"><span class="keyword">grep</span> -rn <span class="string">"data_chushou_pay_info"</span> *.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>
<h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p>从指定点开始将文件标准输出</p>
<ul>
<li>显示文件最后5行内容</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -<span class="keyword">n</span> 5 <span class="keyword">test</span>.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<ul>
<li>实时显示文件内容</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f <span class="keyword">test</span>.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping baidu<span class="selector-class">.com</span> &gt; <span class="number">1</span><span class="selector-class">.txt</span> &amp;</span><br><span class="line">后台以守护进程的方式，将ping命令的返回结果写入 <span class="number">1</span>.txt</span><br></pre></td></tr></table></figure>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每行按空格或TAB分割，输出文本中的1、4项</span></span><br><span class="line"> <span class="attribute">awk</span> <span class="string">'&#123;print <span class="variable">$1</span>,<span class="variable">$4</span>&#125;'</span> log.txt</span><br></pre></td></tr></table></figure>
<h2 id="dirname"><a href="#dirname" class="headerlink" title="dirname"></a>dirname</h2><p>在命令行状态下单纯执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> `dirname <span class="variable">$0</span>`</span><br></pre></td></tr></table></figure></p>
<p>是毫无意义的。</p>
<p>因为他返回当前路径的”.”。<strong>这个命令写在脚本文件里才有作用，他返回这个脚本文件放置的目录，并可以根据这个目录来定位所要运行程序的相对位置（绝对位置除外）。</strong></p>
<ul>
<li>参考<code>/Users/zhouxiaowu/Dropbox/commonShell</code>  运行  <code>dirnameDemo.sh</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BASE_DIR=`dirname <span class="variable">$0</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$BASE_DIR</span></span><br><span class="line"><span class="built_in">cd</span> `dirname <span class="variable">$0</span>`</span><br><span class="line"><span class="built_in">echo</span> `<span class="built_in">pwd</span>`</span><br></pre></td></tr></table></figure>
<p>运行结果:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"><span class="regexp">/Users/</span>zhouxiaowu<span class="regexp">/Dropbox/</span>commonShell</span><br></pre></td></tr></table></figure>
<p>这样就可以知道一些和脚本一起部署的文件的位置了，只要知道相对位置就可以根据这个目录来定位，而可以不用关心绝对位置。这样脚本的可移植性就提高了，扔到任何一台服务器，（如果是部署脚本）都可以执行。</p>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [<span class="string">-hnV</span>][<span class="symbol">-e&lt;script&gt;</span>][<span class="string">-f&lt;script文件&gt;</span>][<span class="symbol">文本文件</span>]</span><br></pre></td></tr></table></figure>
<h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> -e&lt;script&gt;或--expression=&lt;script&gt; 以选项中指定的script来处理输入的文本文件。</span></span><br><span class="line"><span class="ruby">- -f&lt;script文件&gt;或--file=&lt;script文件&gt; 以选项中指定的script文件来处理输入的文本文件。</span></span><br><span class="line"><span class="ruby">- -h或--help 显示帮助。</span></span><br><span class="line"><span class="ruby">- -n或--quiet或--silent 仅显示script处理后的结果。</span></span><br><span class="line"><span class="ruby">- -V或--version 显示版本信息。</span></span><br></pre></td></tr></table></figure>
<h3 id="动作说明"><a href="#动作说明" class="headerlink" title="动作说明"></a>动作说明</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- <span class="selector-tag">a</span> ：新增， <span class="selector-tag">a</span> 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</span><br><span class="line">- c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</span><br><span class="line">- d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；</span><br><span class="line">- <span class="selector-tag">i</span> ：插入， <span class="selector-tag">i</span> 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</span><br><span class="line">- <span class="selector-tag">p</span> ：打印，亦即将某个选择的数据印出。通常 <span class="selector-tag">p</span> 会与参数 sed -n 一起运行～</span><br><span class="line">- s ：取代，可以直接进行取代的工作，通常这个 s 的动作可以搭配正规表示法！例如 <span class="number">1</span>,<span class="number">20s</span>/old/new/g 就是啦！</span><br></pre></td></tr></table></figure>
<h3 id="批量替换文件内容"><a href="#批量替换文件内容" class="headerlink" title="批量替换文件内容"></a>批量替换文件内容</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式: sed -i <span class="string">"s/查找字段/替换字段/g"</span> `grep 查找字段 -rl 路径`</span><br><span class="line">（centos测试有效，mac未生效）</span><br><span class="line"></span><br><span class="line">替换/root/test目录下的所有文件，book替换为apple　　</span><br><span class="line">sed -i <span class="string">"s/book/apple/g"</span> `grep book -rl /root/test`</span><br></pre></td></tr></table></figure>
<ul>
<li>在testfile文件的第四行后添加一行</li>
</ul>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="number">4</span>a\<span class="keyword">new</span><span class="type">Line</span> testfile</span><br></pre></td></tr></table></figure>
<ul>
<li>全部替换，并不会改变文件内容</li>
</ul>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/book/books/g'</span> <span class="keyword">file</span></span><br><span class="line"></span><br><span class="line">sed -e <span class="string">'s/book/books/g'</span> <span class="keyword">file</span></span><br></pre></td></tr></table></figure>
<ul>
<li>从第2处开始替换</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> sksksksksksk | sed <span class="string">'s/sk/SK/2g'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>列印行号，同时，请将第 2~5 行删除</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl <span class="regexp">/etc/</span>passwd | sed <span class="string">'2,5d'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>只要删除第 2 行</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl <span class="regexp">/etc/</span>passwd | sed <span class="string">'2d'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>要删除第 3 到最后一行</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nl</span> /etc/passwd | sed <span class="string">'3,<span class="variable">$d</span>'</span></span><br></pre></td></tr></table></figure>
<h1 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">w                       查看活动用户</span><br><span class="line">id &lt;用户名&gt;              查看指定用户信息</span><br><span class="line">last                    查看用户登录日志</span><br><span class="line">cut -d: -f1 /etc/passwd    查看系统所有用户</span><br><span class="line">cut -d: -f1 /etc<span class="built_in">/group </span>    查看系统所有组</span><br><span class="line">crontab -l              查看当前用户的计划任务</span><br></pre></td></tr></table></figure>
<h1 id="命令行操作"><a href="#命令行操作" class="headerlink" title="命令行操作"></a>命令行操作</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctrl+<span class="selector-tag">a</span> 跳到行首</span><br><span class="line">ctrl+e 跳到行尾</span><br><span class="line">ctrl+u 删除整行</span><br></pre></td></tr></table></figure>
<h1 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h1><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">date &gt; <span class="keyword">test</span>.<span class="keyword">log</span> 标准输出覆盖方式</span><br><span class="line">date &gt;&gt; <span class="keyword">test</span>.<span class="keyword">log</span> 标准输出追加方式</span><br><span class="line">datea 2&gt;<span class="keyword">test</span>.<span class="keyword">log</span> 错误输出覆盖方式，&gt;后要紧挨着文件</span><br><span class="line">datea 2&gt;&gt;<span class="keyword">test</span>.<span class="keyword">log</span> 错误输出追加方式,&gt;后要紧挨着文件</span><br><span class="line"></span><br><span class="line">ifconfig &gt;&gt; <span class="keyword">test</span>.<span class="keyword">log</span> 2&gt;&amp;1   如果是正确输出留空格，错误输出到标准输出中，紧挨着</span><br><span class="line"></span><br><span class="line">ifconfig &amp;&gt;&gt; <span class="keyword">test</span>.<span class="keyword">log</span> 以追加的方式，错误和正确都输出到文件</span><br><span class="line"></span><br><span class="line">ifconfig &gt;&gt; 文件1 2&gt;&gt;文件2 以追加的方式，正确和错误分别到不同的文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> &amp;&gt;/dev/null 正确和错误都到null</span><br></pre></td></tr></table></figure>
<h1 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h1><ul>
<li><code>wc</code>命令，输完，ctrl+d 统计</li>
<li><code>wc &lt; test.log</code> 统计文件的行、单词、字符</li>
</ul>
<h1 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h1><h2 id="逻辑与或"><a href="#逻辑与或" class="headerlink" title="逻辑与或"></a>逻辑与或</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">date ; <span class="keyword">ls</span> ;   分号，顺序执行</span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> &amp;&amp; date 命令1 &amp;&amp; 命令2 命令1正确执行，才会执行2</span><br><span class="line"></span><br><span class="line">ll || date 命令1正确执行，命令2不会执行</span><br><span class="line"></span><br><span class="line">lsasdfsf  &amp;&amp; <span class="keyword">echo</span> <span class="string">"yes"</span> || <span class="keyword">echo</span> <span class="string">"no"</span>  判断命令是否正确</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> || <span class="keyword">echo</span> <span class="string">"no"</span> &amp;&amp; <span class="keyword">echo</span> <span class="string">"yes"</span> 等同于 （<span class="keyword">ls</span> || <span class="keyword">echo</span> <span class="string">"no"</span>） &amp;&amp; <span class="keyword">echo</span> <span class="string">"yes"</span></span><br></pre></td></tr></table></figure>
<h2 id="管道符-1"><a href="#管道符-1" class="headerlink" title="管道符"></a>管道符</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ll | <span class="type">more</span></span><br><span class="line">netstat -an | <span class="type">grep</span> ESTABLISHED | <span class="type">wc</span> -l   统计多少行</span><br></pre></td></tr></table></figure>
<h2 id="统配符"><a href="#统配符" class="headerlink" title="统配符"></a>统配符</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls aa<span class="bullet">*  *</span> 0或多个字符</span><br><span class="line">ls aa? 一个</span><br><span class="line">ls aa[0-9] 一个选项</span><br><span class="line">ls aa[<span class="string">0-9</span>][<span class="symbol">0-9</span>]</span><br><span class="line">ls aa[^0-9] 取非</span><br><span class="line">ls aa[^0-9]*</span><br></pre></td></tr></table></figure>
<h2 id="变量，反引号，"><a href="#变量，反引号，" class="headerlink" title="变量，反引号，$()"></a>变量，反引号，$()</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aa=123</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$aa</span>  输出123</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$aa</span>"</span> 123</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'$aa'</span> <span class="string">'$aa'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">aa</span>=`ls`  反引号，先执行结果，再赋值变量</span><br><span class="line">echo <span class="variable">$aa</span></span><br></pre></td></tr></table></figure>
<h3 id="单小括号"><a href="#单小括号" class="headerlink" title="$() 单小括号"></a><code>$()</code> 单小括号</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aa=<span class="variable">$(ls)</span>  和反引号一样，先执行结果，再赋值变量</span><br><span class="line">echo $aa</span><br></pre></td></tr></table></figure>
<h1 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h1><h2 id="查当前脚本所在路径"><a href="#查当前脚本所在路径" class="headerlink" title="查当前脚本所在路径"></a>查当前脚本所在路径</h2><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script_pwd = $( cd $(<span class="keyword">dirname</span> $0) &amp;&amp; <span class="keyword">pwd</span> )</span><br></pre></td></tr></table></figure>
<h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><h3 id="文件存在、权限判断"><a href="#文件存在、权限判断" class="headerlink" title="文件存在、权限判断 [  ]"></a>文件存在、权限判断 [  ]</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">d 文件是否存在，为目录</span></span><br><span class="line"><span class="ruby">-e 文件是否存在</span></span><br><span class="line"><span class="ruby">-f 文件是否存在，为文件</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-r 文件是否存在，有读权限  不会区分当前用户是否有读权限</span></span><br><span class="line"><span class="ruby">-w 文件是否存在，有写权限</span></span><br><span class="line"><span class="ruby">-x 文件是否存在，有可执行权限</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[] 在shell中是个命令，它左右必须有空格,才能识别里面的字符串</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ -<span class="keyword">f</span> hello.<span class="keyword">sh</span> ] &amp;&amp; <span class="keyword">echo</span> <span class="string">"yes"</span> || <span class="keyword">echo</span> <span class="string">"no"</span>   测试文件是否存在  注意不能颠倒 &amp;&amp; || 顺序</span><br><span class="line"></span><br><span class="line">[ -<span class="keyword">w</span> hello.<span class="keyword">sh</span> ] &amp;&amp; <span class="keyword">echo</span> <span class="string">"yes"</span> || <span class="keyword">echo</span> <span class="string">"no"</span></span><br></pre></td></tr></table></figure>
<h3 id="文件比较"><a href="#文件比较" class="headerlink" title="文件比较"></a>文件比较</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">nf 新</span></span><br><span class="line"><span class="ruby">-ef 相同</span></span><br><span class="line"><span class="ruby">-of 旧</span></span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ ./hello.<span class="keyword">sh</span> -ef ./hello.<span class="keyword">sh</span> ] &amp;&amp; <span class="keyword">echo</span> yes || <span class="keyword">echo</span> <span class="keyword">no</span>   两个文件是否相同</span><br></pre></td></tr></table></figure>
<h3 id="整数比较"><a href="#整数比较" class="headerlink" title="整数比较"></a>整数比较</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">eq 相等</span></span><br><span class="line"><span class="ruby">-ne 不等</span></span><br><span class="line"><span class="ruby">-gt 大于</span></span><br><span class="line"><span class="ruby">-lt 小于</span></span><br><span class="line"><span class="ruby">-ge 大于等于</span></span><br><span class="line"><span class="ruby">-le 小于等于</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[</span> <span class="number">23</span> <span class="bullet">-ge</span> <span class="number">22</span> <span class="string">]</span>  <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="literal">yes</span> <span class="string">||</span> <span class="string">echo</span> <span class="literal">no</span>    <span class="string">整数比较</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-z 为空</span><br><span class="line">-n 不为空</span><br><span class="line"><span class="section">== 相等</span></span><br><span class="line">!= 不等</span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">name</span>=hhh</span><br><span class="line">[ -n <span class="string">"<span class="variable">$name</span>"</span> ] &amp;&amp; echo <span class="literal">yes</span> || echo <span class="literal">no</span>  不为空，输出<span class="literal">yes</span></span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">aa</span>=22 ; <span class="attribute">bb</span>=22</span><br><span class="line">[ <span class="string">"<span class="variable">$aa</span>"</span>==<span class="string">"<span class="variable">$bb</span>"</span> ] &amp;&amp; echo <span class="literal">yes</span> || echo <span class="literal">no</span>  字符串比较是否相等</span><br><span class="line">[ <span class="string">"<span class="variable">$aa</span>"</span> -eq <span class="string">"<span class="variable">$bb</span>"</span> ] &amp;&amp; echo <span class="literal">yes</span> || echo <span class="literal">no</span> 数值整数比较</span><br></pre></td></tr></table></figure>
<h3 id="与或非条件"><a href="#与或非条件" class="headerlink" title="与或非条件"></a>与或非条件</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">a 与</span></span><br><span class="line"><span class="ruby">-o 或</span></span><br><span class="line"><span class="ruby">! 非</span></span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">aa</span>=11</span><br><span class="line">[ -n <span class="string">"<span class="variable">$aa</span>"</span> -a <span class="string">"<span class="variable">$aa</span>"</span> -gt 23 ] &amp;&amp; echo <span class="literal">yes</span> || echo <span class="literal">no</span>  字符串不为空，数值大于23，输出<span class="literal">yes</span></span><br></pre></td></tr></table></figure>
<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><p><strong>单分支</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件 ] ；<span class="keyword">then</span></span><br><span class="line">	程序</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">或者 ， [] 等于 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ 条件 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">	程序</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<ul>
<li>判断当前用户 <code>Dropbox/commonShell/isZhouxiaowu.sh</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">判断是否zhouxiaowu用户</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取当前的用户名</span></span><br><span class="line">u=$(env | grep USER= | cut -d "=" -f 2)</span><br><span class="line">echo $u</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">判断是否等于zhouxiaowu</span></span><br><span class="line">if [ "$u" == "zhouxiaowu" ] ; then</span><br><span class="line">        echo "yes is zhouxiaowu!"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<ul>
<li>获取磁盘使用量，做告警<code>Dropbox/commonShell/diskWarning.sh</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取磁盘的使用量，awk获取第5个单词，cut按%字符分隔，取第1个</span></span><br><span class="line">amount=$(df -h | grep disk1 | awk <span class="string">'&#123;print $5&#125;'</span> | cut -d <span class="string">"%"</span> -f 1)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$amount</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$amount</span> -gt 90 ] ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"磁盘使用量超过90%"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p><strong>双分支</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件 ]</span><br><span class="line"> 	<span class="keyword">then</span></span><br><span class="line"> 		执行语句</span><br><span class="line"> 	<span class="keyword">else</span></span><br><span class="line">     	执行语句</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<ul>
<li>判读是否目录<code>Dropbox/commonShell/isDir.sh</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入读取</span></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"文件名："</span> dir</span><br><span class="line"><span class="comment"># echo $dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否目录</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$dir</span>"</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" is dir"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" is not dir"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<ul>
<li>判断tomcat是否启动 <code>Dropbox/commonShell/isTomcatStarted.sh</code></li>
</ul>
<p><strong>多分支</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件1 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		执行语句</span><br><span class="line"><span class="keyword">elif</span> [ 条件2 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		执行语句</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">		执行语句</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $?  输出脚本的<span class="keyword">exit</span> 返回</span><br></pre></td></tr></table></figure>
<h3 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $变量 <span class="keyword">in</span></span><br><span class="line">	<span class="string">"值1"</span>)</span><br><span class="line">		执行语句</span><br><span class="line">		;;</span><br><span class="line">	<span class="string">"值2"</span>)</span><br><span class="line">		执行语句</span><br><span class="line">		;;</span><br><span class="line">	*)</span><br><span class="line">		默认语句</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<h5 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2 值3 ...</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		执行语句</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(( <span class="built_in">i</span>=<span class="number">0</span>;<span class="built_in">i</span>&lt;=<span class="number">100</span>;<span class="built_in">i</span>=<span class="built_in">i</span>+<span class="number">1</span> ))</span><br><span class="line">	do</span><br><span class="line">		执行语句</span><br><span class="line">	done</span><br></pre></td></tr></table></figure>
<p>写在一行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ` seq 10000 `; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">"hello sxt <span class="variable">$i</span>"</span> &gt;&gt; test.txt;<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<ul>
<li>批量解压文件 <code>Dropbox/commonShell/for_tar.sh</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /Users/zhouxiaowu/install/test_tar</span><br><span class="line"></span><br><span class="line">ls *.tar.gz &gt; ls.log</span><br><span class="line">ls *.tgz &gt;&gt; ls.log</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $( cat ls.log  )</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"file is  <span class="variable">$i</span>"</span></span><br><span class="line">		tar -zxf <span class="variable">$i</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">rm ls.log</span><br></pre></td></tr></table></figure>
<p><strong>注意 i 不需要 $，引用变量才需要，定义和赋值变量不需要</strong></p>
<ul>
<li>1到100求和</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">s=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(( i=0;i&lt;=100;i=i+1  ))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=$(( <span class="variable">$s</span>+<span class="variable">$i</span>  ))</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$s</span></span><br></pre></td></tr></table></figure>
<h5 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件语句 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		执行语句</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<ul>
<li>1到100求和</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=1</span><br><span class="line">s=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                s=$(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">                i=$(( <span class="variable">$i</span>+1 ))</span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$s</span></span><br></pre></td></tr></table></figure>
<p><strong>注意赋值 s=$(( $s+$i ))</strong></p>
<h5 id="until语句"><a href="#until语句" class="headerlink" title="until语句"></a>until语句</h5><ul>
<li>条件不成立执行</li>
</ul>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> [ 条件语句 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		执行语句</span><br><span class="line">	done</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从1到100求和</span></span><br><span class="line"></span><br><span class="line">s=0</span><br><span class="line">i=1</span><br><span class="line"></span><br><span class="line">until [ <span class="variable">$i</span> -gt 100 ]</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                s=$(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">                i=$(( <span class="variable">$i</span>+1 ))</span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"the sum is <span class="variable">$s</span>"</span></span><br></pre></td></tr></table></figure>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">env</span> 查看环境变量</span><br></pre></td></tr></table></figure>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bash</span></span><br><span class="line"><span class="keyword">bash</span></span><br><span class="line"><span class="keyword">pstree </span>查看pstree</span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#系统下的所有变量</span></span><br><span class="line">set</span><br><span class="line"><span class="builtin-name">set</span> -u 报错提示</span><br><span class="line">unset aa  删除变量</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不能有空格</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 字母和下划线开头，字母数字下划线组成</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 自定义变量只对当前shell生效</span></span><br><span class="line">x=5</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 变量调用</span></span><br><span class="line">echo $x</span><br></pre></td></tr></table></figure>
<ul>
<li><p>PATH环境变量</p>
</li>
<li><p>PS1环境变量</p>
</li>
</ul>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ echo $PS1</span><br><span class="line">$&#123;ret_status&#125; %&#123;$fg[cyan]%&#125;%c%&#123;$reset_color%&#125; $(git_prompt_info)</span><br></pre></td></tr></table></figure>
<h5 id="变量叠加"><a href="#变量叠加" class="headerlink" title="变量叠加"></a>变量叠加</h5><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x=123</span><br><span class="line"><span class="comment"># 一般用这种</span></span><br><span class="line">x=<span class="string">"$x"</span>456</span><br><span class="line">x=<span class="variable">$(x)</span>789</span><br></pre></td></tr></table></figure>
<h5 id="0-1-2的含义解释"><a href="#0-1-2的含义解释" class="headerlink" title="$@,$0,$1,$2的含义解释"></a><code>$@,$0,$1,$2的含义解释</code></h5><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$?  最后运行的命令的结束代码（返回值），正确为<span class="number">0</span>,不确定非<span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$$ 查看Shell本身的PID</span><br><span class="line">$!  查看Shell后台Process的PID</span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"pid is $$"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">0   Shell本身的文件名</span></span><br><span class="line"><span class="meta">$</span><span class="bash">1～<span class="variable">$n</span>  添加到Shell的各参数值。<span class="variable">$1</span>是第1参数、<span class="variable">$2</span>是第2参数…。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">-  使用Set命令设定的Flag一览</span></span><br><span class="line"><span class="meta">$</span><span class="bash">*   所有参数列表。如<span class="string">"$*"</span>用「<span class="string">"」括起来的情况、以"</span><span class="variable">$1</span> <span class="variable">$2</span> … <span class="variable">$n</span><span class="string">"的形式输出所有参数。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">@   所有参数列表。如<span class="string">"<span class="variable">$@</span>"</span>用「<span class="string">"」括起来的情况、以"</span><span class="variable">$1</span><span class="string">" "</span><span class="variable">$2</span><span class="string">" … "</span><span class="variable">$n</span><span class="string">" 的形式输出所有参数。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"><span class="comment">#   添加到Shell的参数个数</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"$*"</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$y</span></span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  commonShell ./param3.sh <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>  $*</span><br><span class="line"><span class="number">1</span>  $@</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"$$"</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"$!"</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"$?"</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"$*"</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"<span class="variable">$#</span>"</span>  个数2</span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"<span class="variable">$0</span>"</span>  输出Dropbox/commonShell/var.sh</span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"<span class="variable">$1</span>"</span>  输出qq</span><br><span class="line"><span class="built_in">printf</span> <span class="string">"The complete list is %s\n"</span> <span class="string">"<span class="variable">$2</span>"</span>  输出123</span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ Dropbox/commonShell/var.<span class="keyword">sh</span> qq <span class="number">123</span></span><br><span class="line"></span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span> <span class="number">1626</span></span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span></span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span> qq <span class="number">123</span>  $*输出</span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span> qq  $@输出</span><br><span class="line">The <span class="built_in">complete</span> <span class="keyword">list</span> <span class="keyword">is</span> <span class="number">123</span></span><br></pre></td></tr></table></figure>
<h5 id="点号"><a href="#点号" class="headerlink" title="点号"></a>点号</h5><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">. /<span class="class"><span class="keyword">lib</span>/<span class="title">init</span>/<span class="title">vars</span>.<span class="title">sh</span></span></span><br><span class="line">. /<span class="class"><span class="keyword">lib</span>/<span class="title">lsb</span>/<span class="title">init</span>-<span class="title">functions</span>&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">以往执行文件时都是用./file_name的形式，查阅了资料得知：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、 如果我们要执行某个文件，但是此文件不可执行，此时我们要用chmod u+x file_name来使文件具有可执行权限</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、可是有时我们不想更改此文件的执行权限，但又想执行此文件，可以采用(点号--空格--文件名)的形式来执行一个脚本（只有root用户才可以这么做）</span><br></pre></td></tr></table></figure>
<h5 id="语系变量locale"><a href="#语系变量locale" class="headerlink" title="语系变量locale"></a>语系变量locale</h5><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">locale</span><br><span class="line"></span><br><span class="line">LANG=<span class="string">"zh_CN.UTF-8"</span> 定义系统主语系</span><br><span class="line">LC_COLLATE=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_CTYPE=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_MESSAGES=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_MONETARY=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_NUMERIC=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_TIME=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">LC_ALL= 定义整体语系</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span> 查看系统当前语系</span><br><span class="line"></span><br><span class="line"><span class="built_in">local</span> -a | more 查看linux支持的所有语系</span><br><span class="line"></span><br><span class="line">zhcon 插件</span><br></pre></td></tr></table></figure>
<h5 id="read"><a href="#read" class="headerlink" title="read"></a>read</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -p提示 -t时间内输入 name变量</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input your name : "</span> -t 30 name</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -s 安全输入</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input your passwd : "</span> -s passwd</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$passwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -n 输入字符个数</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input sex M/F : "</span> -n 1 sex</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sex</span></span><br></pre></td></tr></table></figure>
<h4 id="数值运算"><a href="#数值运算" class="headerlink" title="数值运算"></a>数值运算</h4><h5 id="1-2-双小括号"><a href="#1-2-双小括号" class="headerlink" title="$(( $1+$2 ))  双小括号"></a><code>$(( $1+$2 ))</code>  双小括号</h5><p><strong>注意两边留空格</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">num1=<span class="variable">$1</span></span><br><span class="line">num2=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#数值计算</span></span><br><span class="line">sum=$(( <span class="variable">$1</span> + <span class="variable">$2</span> ))</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"sum is <span class="variable">$sum</span>"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $(( (<span class="number">11</span>+<span class="number">3</span>)*<span class="number">3</span>/<span class="number">2</span> ))  <span class="number">21</span></span><br><span class="line">echo $(( <span class="number">10</span>%<span class="number">3</span> ))  <span class="number">1</span></span><br><span class="line">echo $(( <span class="number">1</span>&amp;&amp;<span class="number">0</span> )) <span class="number">0</span></span><br><span class="line">echo $(( <span class="number">1</span>||<span class="number">0</span> )) <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h5 id="运算符-中括号"><a href="#运算符-中括号" class="headerlink" title="$[运算符]` 中括号"></a>$[运算符]` 中括号</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dd</span>=$[<span class="variable">$aa</span>+<span class="variable">$bb</span>]</span><br></pre></td></tr></table></figure>
<h5 id="expr-aa-bb"><a href="#expr-aa-bb" class="headerlink" title="$(expr $aa + $bb)"></a><code>$(expr $aa + $bb)</code></h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dd</span>=$(expr <span class="variable">$aa</span> + <span class="variable">$bb</span>)  +两侧必须有空格</span><br></pre></td></tr></table></figure>
<h5 id="declare变量声明"><a href="#declare变量声明" class="headerlink" title="declare变量声明"></a>declare变量声明</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">declare [<span class="string">+/-</span>][<span class="symbol">选项</span>] 变量名</span><br><span class="line"><span class="bullet">- </span>设定</span><br><span class="line"><span class="bullet">+ </span>取消变量的类型熟悉性</span><br><span class="line">-a 数组</span><br><span class="line">-i integer</span><br><span class="line">-x 环境变量</span><br><span class="line">-r 只读</span><br><span class="line">-p 输出类型  declare -p cc</span><br></pre></td></tr></table></figure>
<ul>
<li>定义数组</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">movie[0]=aa</span><br><span class="line">movie[1]=bb</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;movie&#125;</span> 输出aa,第0个</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;movie[1]&#125;</span> 第1个</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;movie[*]&#125;</span> 全部</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -a movie[2]=live</span><br></pre></td></tr></table></figure>
<ul>
<li>环境变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -x <span class="built_in">test</span>=123</span><br><span class="line">和<span class="built_in">export</span> <span class="built_in">test</span> 相似</span><br><span class="line"><span class="built_in">declare</span> -p  查看全部变量</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -xr <span class="built_in">test</span>=456 只读 环境变量</span><br><span class="line"><span class="built_in">declare</span> +r <span class="built_in">test</span> 提示只读</span><br></pre></td></tr></table></figure>
<h5 id="变量置换方式-y-新值-大括号，默认值"><a href="#变量置换方式-y-新值-大括号，默认值" class="headerlink" title="变量置换方式 ${y-新值}大括号，默认值"></a>变量置换方式 <code>${y-新值}</code>大括号，默认值</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">x</span>=<span class="variable">$&#123;y-新值&#125;</span> y没有设置，<span class="attribute">x</span>=新值；y存在，y为空值,x为空;设置y,x$y</span><br><span class="line"></span><br><span class="line"><span class="attribute">x</span>=<span class="variable">$&#123;y-2&#125;</span></span><br><span class="line">echo <span class="variable">$x</span>  为2</span><br><span class="line"></span><br><span class="line"><span class="attribute">y</span>=<span class="string">""</span></span><br><span class="line"><span class="attribute">x</span>=<span class="variable">$&#123;y-2&#125;</span></span><br><span class="line">echo <span class="variable">$x</span>  为空</span><br></pre></td></tr></table></figure>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><p>1、查看所有安装的软件包</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm -qa</span></span><br></pre></td></tr></table></figure>
<p>2、查看环境变量</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">env</span></span><br></pre></td></tr></table></figure>
<p>3、Mac 删除git文件夹，删除svn文件夹</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd到该文件夹</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除文件夹下的所有 .svn 文件</span></span><br><span class="line"><span class="built_in">find</span> . -<span class="built_in">name</span> <span class="string">".svn"</span> | xargs rm -Rf</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除文件夹下的所有 .git 文件</span></span><br><span class="line"><span class="built_in">find</span> . -<span class="built_in">name</span> <span class="string">".git"</span> | xargs rm -Rf</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="更多资料："><a href="#更多资料：" class="headerlink" title="更多资料："></a>更多资料：</h3><p><a href="https://app.yinxiang.com/Home.action#n=b0fcd794-072a-4fab-9ac6-012b7b0ad147&amp;ses=4&amp;sh=2&amp;sds=5&amp;" target="_blank" rel="external">https://app.yinxiang.com/Home.action#n=b0fcd794-072a-4fab-9ac6-012b7b0ad147&amp;ses=4&amp;sh=2&amp;sds=5&amp;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/anatomy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/anatomy/" itemprop="url">anatomy</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/anatomy/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/anatomy/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  685
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>anatomy 是阿里同学开发的一款用于JVM进程执行过程中的异常诊断工具，可以在不中断程序执行的情况下轻松完成问题排查工作。</p>
<ul>
<li>纯Java实现的开源项目</li>
<li>安装使用便捷</li>
<li>方法级问题诊断</li>
<li>Groovy表达式展开变对象，方便你观察入参、出参、异常、当前对象的各种属性细节</li>
</ul>
<h4 id="接下来结合线上应用，列举常用的几个排查问题命令如何使用"><a href="#接下来结合线上应用，列举常用的几个排查问题命令如何使用" class="headerlink" title="接下来结合线上应用，列举常用的几个排查问题命令如何使用"></a>接下来结合线上应用，列举常用的几个排查问题命令如何使用</h4><p>1、安装：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sLk http://ompc.oss.aliyuncs.<span class="keyword">com</span>/greys/install.<span class="keyword">sh</span>|<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>
<p>2、启动</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">greys<span class="selector-class">.sh</span>  &lt;PID&gt;</span><br><span class="line"></span><br><span class="line">注：PID：目标Java进程ID</span><br></pre></td></tr></table></figure>
<p>3、help</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span>  </span><br><span class="line"></span><br><span class="line">注：所有命令</span><br><span class="line"></span><br><span class="line"><span class="built_in">help</span> watch</span><br><span class="line"></span><br><span class="line">注：<span class="built_in">help</span>命令同时也支持对其他命令的一个解释说明，比如我们键入<span class="built_in">help</span> watch，包含（用途说明、参数列表、实际例子）</span><br></pre></td></tr></table></figure>
<p>4、sc 搜索所有已经加载到JVM中的Class信息。</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sc </span>-d *RecommendManagerImpl</span><br></pre></td></tr></table></figure>
<p><strong>使用场景：</strong></p>
<p>主要是用于排查一个应用可能存在同一个jar包的多个版本，而不同版本的类的方法可能会有实现上的差异，可以通过这种方式确认JVM中加载的是哪一个jar下的类。</p>
<p><img src="/2018/05/13/anatomy/Snip20161002_1.png" alt="image"></p>
<p>5、monitor 方法层面的性能监控，非实时返回的命令，则是不断的等待目标Java进程返回信息，直到用户输入Ctrl+D为止</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">monitor -<span class="keyword">c</span> <span class="number">5</span>  *TimelineReadServiceImpl getEditorRecPost</span><br><span class="line"></span><br><span class="line">注：-<span class="keyword">c</span> : 统计周期，默认值为<span class="number">120</span>秒</span><br></pre></td></tr></table></figure>
<p><strong>使用场景：</strong></p>
<p>线上反馈某个接口突然响应较慢，但又缺乏全链路维度节点的监控，可以通过该命令能定位到具体哪个方法耗时较长，有效缩小排查范围。</p>
<p><img src="/2018/05/13/anatomy/Snip20161002_2.png" alt="image"></p>
<p>6、trace 统计整个调用链路上的所有性能开销和追踪调用链路。</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trace -n <span class="number">2</span> *TimelineReadServiceImpl <span class="keyword">query</span>RecPageTimeLine</span><br></pre></td></tr></table></figure>
<p><strong>使用场景：</strong></p>
<p>定位查找某一接口响应较慢，主要是损耗在哪一个环节。</p>
<p>另外也可以做为性能优化的参考标准，了解一个接口下面每个环节的消耗时间，从而判断是否合理，有没有优化的空间</p>
<p>7、watch 观察到指定方法的调用情况</p>
<p>能观察到的范围：入参、返回值、抛出异常，通过编写groovy表达式进行对应变量的查看。详细使用手册可以通过命令help watch</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">watch -b  *TimelineReadServiceImpl queryRecPageTimeLine  params[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">注：打印完整的入参信息</span><br><span class="line"></span><br><span class="line">watch -b  *TimelineReadServiceImpl queryRecPageTimeLine  params[<span class="number">0</span>] 'params[<span class="number">0</span>].uid&gt;<span class="number">2894731</span>' </span><br><span class="line"></span><br><span class="line">注：带上groovy表达式，uid&gt;<span class="number">2894731</span></span><br><span class="line"></span><br><span class="line">watch -s  *TimelineReadServiceImpl queryRecPageTimeLine  params[<span class="number">0</span>]+returnObj 'params[<span class="number">0</span>].uid==<span class="number">3680667</span>'</span><br><span class="line"></span><br><span class="line">注：当请求的uid为<span class="number">3680667</span>时，打印入参和返回结果</span><br></pre></td></tr></table></figure>
<p>8、 jvm</p>
<p>查看当前JVM的信息，无参数</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://github.com/oldmanpushcart/greys-anatomy/wiki/Commands#help" target="_blank" rel="external">https://github.com/oldmanpushcart/greys-anatomy/wiki/Commands#help</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/java线上问题排查/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/java线上问题排查/" itemprop="url">java线上问题排查</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/线上故障排查/" itemprop="url" rel="index">
                    <span itemprop="name">线上故障排查</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/java线上问题排查/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/java线上问题排查/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  592
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="【优先】top"><a href="#【优先】top" class="headerlink" title="【优先】top"></a>【优先】top</h2><p>查看负载，找到CPU过高的程序进程</p>
<h2 id="【优先】top-Hp-进程id"><a href="#【优先】top-Hp-进程id" class="headerlink" title="【优先】top -Hp [进程id]"></a>【优先】top -Hp [进程id]</h2><p>查看该进程的所有线程，找到占用cpu较高的线程</p>
<h2 id="【优先】jstack-进程id-gt-js-txt"><a href="#【优先】jstack-进程id-gt-js-txt" class="headerlink" title="【优先】jstack [进程id] &gt; js.txt"></a>【优先】jstack [进程id] &gt; js.txt</h2><p>打印当前线程堆栈，根据线程id（转换为16进制 <code>printf %x</code> ）找到CPU较高的线程堆栈</p>
<h2 id="jstat-gcutil-进程id-1000"><a href="#jstat-gcutil-进程id-1000" class="headerlink" title="jstat -gcutil [进程id] 1000"></a>jstat -gcutil [进程id] 1000</h2><p>每隔1000秒打印jvm内存GC信息</p>
<h2 id="jmap-histo-进程id-gt-jmap-txt"><a href="#jmap-histo-进程id-gt-jmap-txt" class="headerlink" title="jmap -histo [进程id] &gt; jmap.txt"></a>jmap -histo [进程id] &gt; jmap.txt</h2><p>查看当前jvm内存里对象的实例数和内存数</p>
<h2 id="【优先】jmap-dump-format-b-file-dump-bin-进程id"><a href="#【优先】jmap-dump-format-b-file-dump-bin-进程id" class="headerlink" title="【优先】jmap -dump:format=b,file=dump.bin [进程id]"></a>【优先】jmap -dump:format=b,file=dump.bin [进程id]</h2><p>查看当前jvm内存里对象的实例数和内存数</p>
<p>堆内存dump文件分析</p>
<p>命令：jmap -dump:format=b,file=dump.bin [进程id]</p>
<p>工具：MAT</p>
<h1 id="FULL-GC问题定位"><a href="#FULL-GC问题定位" class="headerlink" title="FULL_GC问题定位"></a>FULL_GC问题定位</h1><ol>
<li>top</li>
</ol>
<p>查看负载，找到CPU过高的程序进程</p>
<ol>
<li>top -Hp [进程id]</li>
</ol>
<p>查看该进程的所有线程，找到占用cpu较高的线程<br><img src="/2018/05/13/java线上问题排查/01.jpeg" alt=""></p>
<ol>
<li>jstack [进程id] &gt; js.txt</li>
</ol>
<p>打印当前线程堆栈，根据线程id（转换为16进制 printf %x ）找到CPU较高的线程堆栈</p>
<p>三部基本可以定位到程序的一些问题。</p>
<p>当时发现，占用cpu较高的线程，基本都是GC线程</p>
<p><img src="http://p9.pstatp.com/large/pgc-image/152612606538764cd3e3892" alt="JAVA线上问题之Full GC问题定位"></p>
<p>4、jstat -gcutil [进程id] 1000</p>
<p>每隔1000秒打印jvm内存GC信息，</p>
<p><img src="http://p3.pstatp.com/large/pgc-image/15261261147838154393d49" alt="JAVA线上问题之Full GC问题定位"></p>
<p>S0 年轻代中第一个survivor（幸存区）已使用的占当前容量百分比</p>
<p>S1 年轻代中第二个survivor（幸存区）已使用的占当前容量百分比</p>
<p>E 年轻代中Eden（伊甸园）已使用的占当前容量百分比</p>
<p>O old代已使用的占当前容量百分比</p>
<p>P perm代已使用的占当前容量百分比</p>
<p>YGC 从应用程序启动到采样时年轻代中gc次数</p>
<p>YGCT 从应用程序启动到采样时年轻代中gc所用时间(s)</p>
<p>FGC 从应用程序启动到采样时old代(全gc)gc次数</p>
<p>FGCT 从应用程序启动到采样时old代(全gc)gc所用时间(s)</p>
<p>GCT 从应用程序启动到采样时gc用的总时间(s)</p>
<ol>
<li>jmap -histo [进程id] &gt; jmap.txt</li>
</ol>
<p>查看当前jvm内存里对象的实例数和内存数</p>
<p><img src="http://p1.pstatp.com/large/pgc-image/152612613793539642763b2" alt="JAVA线上问题之Full GC问题定位"></p>
<p>6、看GC日志</p>
<p><img src="http://p1.pstatp.com/large/pgc-image/1526126169250debf46265b" alt="JAVA线上问题之Full GC问题定位"></p>
<p>启动脚本里添加gclog配置 -XX:+PrintGCDetails  -XX:+PrintGCDateStamps  -XX:+PrintHeapAtGC  -Xloggc:gc.log</p>
<p><img src="http://p3.pstatp.com/large/pgc-image/152612618950506d35201b5" alt="JAVA线上问题之Full GC问题定位"></p>
<p>筛选Full GC log</p>
<p><img src="http://p1.pstatp.com/large/pgc-image/15261262185599cc3c4ea45" alt="JAVA线上问题之Full GC问题定位"></p>
<p>堆内存dump文件分析</p>
<p>命令：jmap -dump:format=b,file=aa.bin 1232134</p>
<p>工具：MAT</p>
<p><img src="http://p1.pstatp.com/large/pgc-image/152612633912428c60eda0f" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p9.pstatp.com/large/pgc-image/15261263392389c6212ec66" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p3.pstatp.com/large/pgc-image/1526126339342d8bf3abf3d" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p3.pstatp.com/large/pgc-image/152612633943779fb54a261" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p1.pstatp.com/large/pgc-image/1526126339495120c75d16c" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p3.pstatp.com/large/pgc-image/15261263395674e4fef7ca8" alt="JAVA线上问题之Full GC问题定位"></p>
<p><img src="http://p1.pstatp.com/large/pgc-image/1526126339671715eb9134d" alt="JAVA线上问题之Full GC问题定位"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/服务器异常案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/服务器异常案例/" itemprop="url">服务器异常案例</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/线上故障排查/" itemprop="url" rel="index">
                    <span itemprop="name">线上故障排查</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/服务器异常案例/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/服务器异常案例/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  529
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>####1.某应用load&gt;7,ssh感到输入命令后,要等待1、2秒 才开始执行</p>
<ul>
<li>top命令查看cpu占用率,约70%,不至于导致ssh中命令响应变慢</li>
<li>tsar查看最近的网络流量，正常</li>
<li>iostat 1，发现(虚拟机)磁盘tps达到500+非常高</li>
<li>jstack观察java中一个线程频繁操作磁盘</li>
<li>lsof命令观察打开文件，并排查代码发现配置项有误导致磁盘上出现很多小的零碎文件，引发频繁的随机访问，修改配置项后问题解决<br>￼￼</li>
</ul>
<p>####2.应用Load&gt;10，GC正常，活跃线程数很多，CPU 100%</p>
<ul>
<li>ps -efL， 显示所有活跃线程ID和对应时间</li>
<li>根据对应线程SPID找出jstack中的执行栈</li>
<li>定位到问题代码，发现一个没同步保护的HashMap频繁并发put/get导致死循环</li>
</ul>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">通常cpu使用率达到了<span class="number">100</span><span class="comment">%，一般是某些线程在某种条件下进入死循环，退不出来</span></span><br></pre></td></tr></table></figure>
<p>####3.容灾演习之后服务无法启动</p>
<ul>
<li>df –h 命令 /home 100%占用，日志文件巨大</li>
<li>删掉由于断网引起的大量重连日志，重启</li>
</ul>
<p>####4.￼某应用机器load狂飙100+，报警不断</p>
<ul>
<li>收集各个系统指标，发现除了load之外没有异常，load&gt;进程数，应用响应正常</li>
<li>jstack中Runnable状态线程很多“at<br>java.io.UnixFileSystem.getBooleanAttributes0(Native Method)”</li>
<li>ps –Tel 打印所有线程状态，发现大量怨妇进程（状态D，既无法中断又无法继续）</li>
<li>根据僵尸进程ID再次查找jstack中对应代码，为blocked的文件访问栈</li>
<li>df命令hang住</li>
<li>联系PE同学得知NAS故障,修复后重启OK</li>
</ul>
<p>####5.Java进程健在，应用运行一段时间失去响应</p>
<ul>
<li>jstat各个区域内存正常，应用服务器系统资源正常</li>
<li>查看应用默认日志文件发现一行“WARN [common] 服务器 已停止运行:12201”</li>
<li>jstack发现有线程“JBoss Shutdown Hook”健在，查找代码发现居然有二方包代码在抛出异常后调用system.exit(0)</li>
</ul>
<p>￼￼￼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/jvm堆参数调整/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/jvm堆参数调整/" itemprop="url">jvm堆参数调整</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java基础/" itemprop="url" rel="index">
                    <span itemprop="name">java基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/jvm堆参数调整/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/jvm堆参数调整/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  347
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>偶然发现线上通过obelisk发布的应用默认没有配置堆大小等jvm参数</p>
<p>下面是社区的一个线上dubbo应用的jvm参数：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">XX:</span>CICompilerCount=<span class="number">3</span> -<span class="string">XX:</span>InitialHeapSize=<span class="number">130023424</span> -<span class="string">XX:</span>+ManagementServer -<span class="string">XX:</span>MaxHeapSize=<span class="number">2063597568</span> -<span class="string">XX:</span>MaxNewSize=<span class="number">687865856</span> -<span class="string">XX:</span>MinHeapDeltaBytes=<span class="number">524288</span> -<span class="string">XX:</span>NewSize=<span class="number">42991616</span> -<span class="string">XX:</span>OldSize=<span class="number">87031808</span> -<span class="string">XX:</span>+PrintGC -<span class="string">XX:</span>+PrintGCDateStamps -<span class="string">XX:</span>+PrintGCDetails -<span class="string">XX:</span>+PrintGCTimeStamps -<span class="string">XX:</span>+UseCompressedClassPointers -<span class="string">XX:</span>+UseCompressedOops -<span class="string">XX:</span>+UseParallelGC</span><br><span class="line"></span><br><span class="line">注：考虑安全性，部分数据删除</span><br></pre></td></tr></table></figure>
<p>采用默认值，新生代只有600多M，堆区总大小也只有2个G</p>
<p><strong>社区这边的线上机器基本都是标配4核8G，上面的配置太浪费，如果活动期间有较高并发量，估计新生代会不足，挤压老年代，持续gc，很容易雪崩。</strong></p>
<p>线上jvm参数调整</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Xms5020m -Xmx5020m -Xmn2500m -XX:<span class="attribute">PermSize</span>=96m -XX:<span class="attribute">MaxPermSize</span>=256m -XX:<span class="attribute">ParallelGCThreads</span>=4  -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:<span class="attribute">CMSMaxAbortablePrecleanTime</span>=5000 -XX:+CMSClassUnloadingEnabled -XX:+UseCMSInitiatingOccupancyOnly -XX:<span class="attribute">CMSInitiatingOccupancyFraction</span>=80</span><br></pre></td></tr></table></figure>
<p>========================</p>
<p>用了两台线上机做测试，配置一样</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.16</span><span class="selector-class">.116</span>（参数未调整）</span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.18</span><span class="selector-class">.62</span> （参数调整）</span><br></pre></td></tr></table></figure>
<p>发布上线后，beta了一天，对比结果如下：</p>
<p><img src="/2018/05/13/jvm堆参数调整/1.png" alt="image"></p>
<p><img src="/2018/05/13/jvm堆参数调整/2.png" alt="image"></p>
<p>192.168.16.116（未调整参数），一天发生了YGC4000多次，整个gc时间26s</p>
<p>192.168.18.62 （参数调整），一天YGC只有300多次，整个gc时间只有5s</p>
<p>如果并发量大的情况下，估计这个差异会更大，支持的最大QPS应该会有很大提升，如果要准确数据的话可以性能压测对比下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/java服务器load飚高排查思路/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/java服务器load飚高排查思路/" itemprop="url">java服务器load飙高排查思路</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T14:11:17+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/线上故障排查/" itemprop="url" rel="index">
                    <span itemprop="name">线上故障排查</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/13/java服务器load飚高排查思路/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/13/java服务器load飚高排查思路/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  605
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Load 是指对计算机干活多少的度量（WikiPedia：the system load is a measure of the amount of work that a computer system is doing），简单的说是进程队列的长度。Load Average 就是一段时间 (1 分钟、5分钟、15分钟) 内平均 Load</p>
<p><strong>通过uptime命令可以查看当前的load，如果值很高。一般情况是java某些线程长期占用资源、死锁、死循环等导致某个进程占用的CPU资源过高。大致可以从以下几个角度来排查：</strong><br><br><br></p>
<p>1.首先通过jps命令，查看当前进程id，如id为 28174</p>
<p>2.查看该进程下的线程资源使用情况</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">top</span> -p <span class="number">28174</span> –H</span><br></pre></td></tr></table></figure>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">32694 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">2</span>  <span class="number">6.4</span>   <span class="number">3</span>:<span class="number">31.12</span> java</span><br><span class="line"><span class="symbol">28175 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">00.06</span> java</span><br><span class="line"><span class="symbol">28176 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">40.79</span> java</span><br><span class="line"><span class="symbol">28177 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">41.12</span> java</span><br><span class="line"><span class="symbol">28178 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">41.11</span> java</span><br><span class="line"><span class="symbol">28179 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">41.33</span> java</span><br><span class="line"><span class="symbol">28180 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">41.58</span> java</span><br><span class="line"><span class="symbol">28181 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">40.36</span> java</span><br><span class="line"><span class="symbol">28182 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">41.02</span> java</span><br><span class="line"><span class="symbol">28183 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">1</span>:<span class="number">40.96</span> java</span><br><span class="line"><span class="symbol">28184 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">4</span>:<span class="number">38.30</span> java</span><br><span class="line"><span class="symbol">28185 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">00.46</span> java</span><br><span class="line"><span class="symbol">28186 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">01.83</span> java</span><br><span class="line"><span class="symbol">28187 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">00.00</span> java</span><br><span class="line"><span class="symbol">28189 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">00.01</span> java</span><br><span class="line"><span class="symbol">28190 </span>root      <span class="number">20</span>   <span class="number">0</span> <span class="number">3249</span>m <span class="number">2.0</span>g  <span class="number">11</span>m S    <span class="number">0</span>  <span class="number">6.4</span>   <span class="number">0</span>:<span class="number">49.01</span> java</span><br></pre></td></tr></table></figure>
<p>3.打印JAVA进程28174的堆栈信息</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstack <span class="number">28174</span> &gt;&gt; <span class="built_in">stack</span>.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<p>4.将cpu消耗高的线程的pid换算为16进制</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf <span class="number">0</span><span class="keyword">x</span><span class="symbol">%x</span> <span class="number">32694</span></span><br></pre></td></tr></table></figure>
<p>转换后的16进制为 0x7fb6</p>
<p>5.从刚才的栈日志中查找该线程正在运行的方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="number">0x7fb6</span>  <span class="built_in">stack</span>.<span class="built_in">log</span> -a3</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"MSXMLProcessorThread"</span> prio=<span class="number">10</span> tid=<span class="number">0</span>x00002b469923a800 [<span class="attribute">color</span>=darkred]nid=<span class="number">0</span>x7fb6[/color] sleeping[<span class="number">0</span>x00002b46b0200000]</span><br><span class="line">   java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.State</span>: TIMED_WAITING (sleeping)</span><br><span class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.sleep</span>(Native Method)</span><br><span class="line">        at com<span class="selector-class">.adventnet</span><span class="selector-class">.management</span><span class="selector-class">.xml</span><span class="selector-class">.MSXmlProcessor</span><span class="selector-class">.listen</span>(MSXmlProcessor<span class="selector-class">.java</span>:<span class="number">279</span>)</span><br><span class="line">        at com<span class="selector-class">.adventnet</span><span class="selector-class">.management</span><span class="selector-class">.xml</span><span class="selector-class">.MSXmlProcessor</span><span class="selector-class">.run</span>(MSXmlProcessor<span class="selector-class">.java</span>:<span class="number">264</span>)</span><br><span class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.run</span>(Thread<span class="selector-class">.java</span>:<span class="number">619</span>)</span><br></pre></td></tr></table></figure>
<p>6.另外也可以查找正在运行的线程，及线程处于运行状态的位置，从这些线程中来查找资源消耗过高的代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep RUNNABLE <span class="built_in">stack</span>.<span class="built_in">log</span>  -a1</span><br></pre></td></tr></table></figure>
<p><img src="/2018/05/13/java服务器load飚高排查思路/1364394978_1570.jpg" alt="image"></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less a.<span class="keyword">log</span> |awk '&#123;FS=<span class="string">"java.lang.Thread.State:"</span>;<span class="keyword">print</span> <span class="variable">$2&#125;</span>'|<span class="keyword">sort</span> |uniq -c |<span class="keyword">sort</span> -nr</span><br></pre></td></tr></table></figure>
<p><img src="/2018/05/13/java服务器load飚高排查思路/20130812130234781.jpeg" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/08/java后端架构师技术图谱/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周小伍 Joey">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/xiaowu_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaowu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/08/java后端架构师技术图谱/" itemprop="url">java后端架构师技术图谱</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-08T13:50:14+08:00">
                2018-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java基础/" itemprop="url" rel="index">
                    <span itemprop="name">java基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/08/java后端架构师技术图谱/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/08/java后端架构师技术图谱/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  17.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  62
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>最后更新于20180502</strong></p>
<p>[TOC]</p>
<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><ul>
<li><p><a href="https://www.cnblogs.com/lemon-flm/p/7877898.html" target="_blank" rel="external">《java队列——queue详细分析》</a></p>
<ul>
<li>非阻塞队列：ConcurrentLinkedQueue(无界线程安全)，采用CAS机制（compareAndSwapObject原子操作）。</li>
<li>阻塞队列：ArrayBlockingQueue(有界)、LinkedBlockingQueue（无界）、DelayQueue、PriorityBlockingQueue，采用锁机制；使用 ReentrantLock 锁。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/mantu/p/5802393.html" target="_blank" rel="external">《LinkedList、ConcurrentLinkedQueue、LinkedBlockingQueue对比分析》</a></p>
</li>
</ul>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><ul>
<li><a href="https://blog.csdn.net/qq_33642117/article/details/52040345" target="_blank" rel="external">《Java Set集合的详解》</a></li>
</ul>
<h2 id="链表、数组"><a href="#链表、数组" class="headerlink" title="链表、数组"></a>链表、数组</h2><ul>
<li><a href="https://blog.csdn.net/wz249863091/article/details/52853360" target="_blank" rel="external">《Java集合详解–什么是List》</a></li>
</ul>
<h2 id="字典、关联数组"><a href="#字典、关联数组" class="headerlink" title="字典、关联数组"></a>字典、关联数组</h2><ul>
<li><a href="https://baike.xsoftlab.net/view/250.html" target="_blank" rel="external">《Java map 详解 - 用法、遍历、排序、常用API等》</a></li>
</ul>
<h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><ul>
<li><a href="https://blog.csdn.net/javazejian/article/details/53362993" target="_blank" rel="external">《java数据结构与算法之栈（Stack）设计与实现》</a></li>
<li><a href="http://www.runoob.com/java/java-stack-class.html" target="_blank" rel="external">《Java Stack 类》</a></li>
<li><a href="https://blog.csdn.net/f2006116/article/details/51375225" target="_blank" rel="external">《java stack的详细实现分析》</a><ul>
<li>Stack 是线程安全的。</li>
<li>内部使用数组保存数据，不够时翻倍。</li>
</ul>
</li>
</ul>
<h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>每个节点最多有两个叶子节点。</p>
<ul>
<li><a href="https://blog.csdn.net/cai2016/article/details/52589952" target="_blank" rel="external">《二叉树》</a></li>
</ul>
<h3 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h3><ul>
<li><a href="https://baike.baidu.com/item/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91/7773232?fr=aladdin" target="_blank" rel="external">《完全二叉树》</a><ul>
<li>叶节点只能出现在最下层和次下层，并且最下面一层的结点都集中在该层最左边的若干位置的二叉树。</li>
</ul>
</li>
</ul>
<h3 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a>平衡二叉树</h3><p>左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。</p>
<ul>
<li><a href="http://www.cnblogs.com/polly333/p/4798944.html" target="_blank" rel="external">《浅谈数据结构-平衡二叉树》</a></li>
<li><a href="http://www.cnblogs.com/yangecnu/p/Introduce-2-3-Search-Tree.html" target="_blank" rel="external">《浅谈算法和数据结构: 八 平衡查找树之2-3树》</a></li>
</ul>
<h3 id="二叉查找树（BST）"><a href="#二叉查找树（BST）" class="headerlink" title="二叉查找树（BST）"></a>二叉查找树（BST）</h3><p>二叉查找树（Binary Search Tree），也称有序二叉树（ordered binary tree）,排序二叉树（sorted binary tree）。</p>
<ul>
<li><a href="http://www.cnblogs.com/yangecnu/p/Introduce-Binary-Search-Tree.html" target="_blank" rel="external">《浅谈算法和数据结构: 七 二叉查找树》</a></li>
</ul>
<h3 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h3><ul>
<li><a href="https://blog.csdn.net/sun_tttt/article/details/65445754" target="_blank" rel="external">《最容易懂得红黑树》</a><ul>
<li>添加阶段后，左旋或者右旋从而再次达到平衡。</li>
</ul>
</li>
<li><a href="http://www.cnblogs.com/yangecnu/p/Introduce-Red-Black-Tree.html" target="_blank" rel="external">《浅谈算法和数据结构: 九 平衡查找树之红黑树》</a></li>
</ul>
<h3 id="B-，B-，B-树"><a href="#B-，B-，B-树" class="headerlink" title="B-，B+，B*树"></a>B-，B+，B*树</h3><p>MySQL是基于B+树聚集索引组织表</p>
<ul>
<li><a href="https://blog.csdn.net/aqzwss/article/details/53074186" target="_blank" rel="external">《B-树，B+树，B*树详解》</a></li>
<li><a href="https://blog.csdn.net/bigtree_3721/article/details/73632405" target="_blank" rel="external">《B-树，B+树与B*树的优缺点比较》</a><ul>
<li>B+ 树的叶子节点链表结构相比于 B- 树便于扫库，和范围检索。<h3 id="LSM-树"><a href="#LSM-树" class="headerlink" title="LSM 树"></a>LSM 树</h3></li>
</ul>
</li>
</ul>
<p>LSM（Log-Structured Merge-Trees）和 B+ 树相比，是牺牲了部分读的性能来换取写的性能(通过批量写入)，实现读写之间的。<br>Hbase、LevelDB、Tair（Long DB）、nessDB 采用 LSM 树的结构。LSM可以快速建立索引。</p>
<ul>
<li><p><a href="https://blog.csdn.net/dbanote/article/details/8897599" target="_blank" rel="external">《LSM树 VS B+树》</a></p>
<ul>
<li>B+ 树读性能好，但由于需要有序结构，当key比较分散时，磁盘寻道频繁，造成写性能。</li>
<li>LSM 是将一个大树拆分成N棵小树，先写到内存（无寻道问题，性能高），在内存中构建一颗有序小树（有序树），随着小树越来越大，内存的小树会flush到磁盘上。当读时，由于不知道数据在哪棵小树上，因此必须遍历（二分查找）所有的小树，但在每颗小树内部数据是有序的。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/u014774781/article/details/52105708" target="_blank" rel="external">《LSM树（Log-Structured Merge Tree）存储引擎》</a></p>
<ul>
<li>极端的说，基于LSM树实现的HBase的写性能比MySQL高了一个数量级，读性能低了一个数量级。</li>
<li>优化方式：Bloom filter 替代二分查找；compact 小数位大树，提高查询性能。</li>
<li>Hbase 中，内存中达到一定阈值后，整体flush到磁盘上、形成一个文件（B+数），HDFS不支持update操作，所以Hbase做整体flush而不是merge update。flush到磁盘上的小树，定期会合并成一个大树。</li>
</ul>
</li>
</ul>
<h2 id="BitSet"><a href="#BitSet" class="headerlink" title="BitSet"></a>BitSet</h2><p>经常用于大规模数据的排重检查。</p>
<ul>
<li><a href="http://www.runoob.com/java/java-bitset-class.html" target="_blank" rel="external">《Java Bitset类》</a></li>
<li><a href="https://blog.csdn.net/caiandyong/article/details/51581160" target="_blank" rel="external">《Java BitSet（位集）》</a></li>
</ul>
<h1 id="常用算法"><a href="#常用算法" class="headerlink" title="常用算法"></a>常用算法</h1><ul>
<li><a href="https://blog.csdn.net/gane_cheng/article/details/52652705" target="_blank" rel="external">《常见排序算法及对应的时间复杂度和空间复杂度》</a></li>
</ul>
<h2 id="排序、查找算法"><a href="#排序、查找算法" class="headerlink" title="排序、查找算法"></a>排序、查找算法</h2><ul>
<li><a href="https://blog.csdn.net/gane_cheng/article/details/52652705" target="_blank" rel="external">《常见排序算法及对应的时间复杂度和空间复杂度》</a></li>
</ul>
<h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><ul>
<li><a href="https://www.cnblogs.com/shen-hua/p/5424059.html" target="_blank" rel="external">《Java中的经典算法之选择排序（SelectionSort）》</a><ul>
<li>每一趟从待排序的记录中选出最小的元素，顺序放在已排好序的序列最后，直到全部记录排序完毕。</li>
</ul>
</li>
</ul>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><ul>
<li><a href="https://blog.csdn.net/shuaizai88/article/details/73250615" target="_blank" rel="external">《冒泡排序的2种写法》</a><ul>
<li>相邻元素前后交换、把最大的排到最后。</li>
<li>时间复杂度 O(n²)</li>
</ul>
</li>
</ul>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><ul>
<li><a href="https://www.cnblogs.com/hapjin/p/5517667.html" target="_blank" rel="external">《排序算法总结之插入排序》</a></li>
</ul>
<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><ul>
<li><a href="http://developer.51cto.com/art/201403/430986.htm" target="_blank" rel="external">《坐在马桶上看算法：快速排序》</a><ul>
<li>一侧比另外一次都大或小。<h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3></li>
</ul>
</li>
<li><a href="http://www.cnblogs.com/chengxiao/p/6194356.html" target="_blank" rel="external">《图解排序算法(四)之归并排序》</a><ul>
<li>分而治之，分成小份排序，在合并(重建一个新空间进行复制)。</li>
</ul>
</li>
</ul>
<h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><p>TODO</p>
<h3 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h3><ul>
<li><a href="https://www.cnblogs.com/chengxiao/p/6129630.html" target="_blank" rel="external">《图解排序算法(三)之堆排序》</a><ul>
<li>排序过程就是构建最大堆的过程，最大堆：每个结点的值都大于或等于其左右孩子结点的值，堆顶元素是最大值。</li>
</ul>
</li>
</ul>
<h3 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h3><ul>
<li><a href="https://www.cnblogs.com/suvllian/p/5495780.html" target="_blank" rel="external">《计数排序和桶排序》</a><ul>
<li>和桶排序过程比较像，差别在于桶的数量。</li>
</ul>
</li>
</ul>
<h3 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h3><ul>
<li><a href="http://blog.51cto.com/ahalei/1362789" target="_blank" rel="external">《【啊哈！算法】最快最简单的排序——桶排序》</a></li>
<li><a href="https://blog.csdn.net/sunjinshengli/article/details/70738527" target="_blank" rel="external">《排序算法（三）：计数排序与桶排序》</a><ul>
<li>桶排序将[0,1)区间划分为n个相同的大小的子区间，这些子区间被称为桶。</li>
<li>每个通单独进行排序，然后再遍历每个桶。</li>
</ul>
</li>
</ul>
<h3 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h3><p>按照个位、十位、百位、…依次来排。</p>
<ul>
<li><a href="https://blog.csdn.net/lemon_tree12138/article/details/51695211" target="_blank" rel="external">《排序算法系列：基数排序》</a></li>
<li><a href="https://www.cnblogs.com/skywang12345/p/3603669.html" target="_blank" rel="external">《基数排序》</a></li>
</ul>
<h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><ul>
<li><p><a href="https://www.cnblogs.com/coderising/p/5708632.html" target="_blank" rel="external">《二分查找(java实现)》</a></p>
<ul>
<li>要求待查找的序列有序。</li>
<li>时间复杂度 O(logN)。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/maoyuanming0806/article/details/78176957" target="_blank" rel="external">《java实现二分查找-两种方式》</a></p>
<ul>
<li>while + 递归。<h3 id="Java-中的排序工具"><a href="#Java-中的排序工具" class="headerlink" title="Java 中的排序工具"></a>Java 中的排序工具</h3></li>
</ul>
</li>
<li><a href="https://blog.csdn.net/u011410529/article/details/56668545?locationnum=6&amp;fps=1" target="_blank" rel="external">《Arrays.sort和Collections.sort实现原理解析》</a><ul>
<li>Collections.sort算法调用的是合并排序。</li>
<li>Arrays.sort() 采用了2种排序算法 – 基本类型数据使用快速排序法，对象数组使用归并排序。</li>
</ul>
</li>
</ul>
<h2 id="布隆过滤器"><a href="#布隆过滤器" class="headerlink" title="布隆过滤器"></a>布隆过滤器</h2><p>常用于大数据的排重，比如email，url 等。<br>核心原理：将每条数据通过计算产生一个指纹（一个字节或多个字节，但一定比原始数据要少很多），其中每一位都是通过随机计算获得，在将指纹映射到一个大的按位存储的空间中。注意：会有一定的错误率。<br>优点：空间和时间效率都很高。<br>缺点：随着存入的元素数量增加，误算率随之增加。</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000002729689" target="_blank" rel="external">《布隆过滤器 – 空间效率很高的数据结构》</a></li>
<li><a href="https://blog.csdn.net/zdxiq000/article/details/57626464" target="_blank" rel="external">《大量数据去重：Bitmap和布隆过滤器(Bloom Filter)》</a></li>
<li><a href="https://blog.csdn.net/qq_30242609/article/details/71024458" target="_blank" rel="external">《基于Redis的布隆过滤器的实现》</a><ul>
<li>基于 Redis 的 Bitmap 数据结构。</li>
</ul>
</li>
<li><a href="https://blog.csdn.net/lemon_tree12138/article/details/47973715" target="_blank" rel="external">《网络爬虫：URL去重策略之布隆过滤器(BloomFilter)的使用》</a><ul>
<li>使用Java中的 BitSet 类 和 加权和hash算法。</li>
</ul>
</li>
</ul>
<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><h3 id="KMP-算法"><a href="#KMP-算法" class="headerlink" title="KMP 算法"></a>KMP 算法</h3><p>KMP：Knuth-Morris-Pratt算法（简称KMP）<br>核心原理是利用一个“部分匹配表”，跳过已经匹配过的元素。</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html" target="_blank" rel="external">《字符串匹配的KMP算法》</a></li>
</ul>
<h2 id="深度优先、广度优先"><a href="#深度优先、广度优先" class="headerlink" title="深度优先、广度优先"></a>深度优先、广度优先</h2><ul>
<li><a href="https://www.cnblogs.com/0kk470/p/7555033.html" target="_blank" rel="external">《广度优先搜索BFS和深度优先搜索DFS》</a></li>
</ul>
<h2 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h2><ul>
<li><a href="https://www.cnblogs.com/MrSaver/p/8641971.html" target="_blank" rel="external">《算法：贪婪算法基础》</a></li>
<li><a href="https://blog.csdn.net/a345017062/article/details/52443781" target="_blank" rel="external">《常见算法及问题场景——贪心算法》</a></li>
</ul>
<h2 id="回溯算法"><a href="#回溯算法" class="headerlink" title="回溯算法"></a>回溯算法</h2><ul>
<li><a href="https://blog.csdn.net/qfikh/article/details/51960331" target="_blank" rel="external">《 五大常用算法之四：回溯法》</a></li>
</ul>
<h2 id="剪枝算法"><a href="#剪枝算法" class="headerlink" title="剪枝算法"></a>剪枝算法</h2><ul>
<li><a href="https://blog.csdn.net/luningcsdn/article/details/50930276" target="_blank" rel="external">《α-β剪枝算法》</a></li>
</ul>
<h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><ul>
<li><a href="https://www.cnblogs.com/little-YTMM/p/5372680.html" target="_blank" rel="external">《详解动态规划——邹博讲动态规划》</a></li>
<li><a href="https://blog.csdn.net/yao_zi_jie/article/details/54580283" target="_blank" rel="external">《动态规划算法的个人理解》</a></li>
</ul>
<h2 id="朴素贝叶斯"><a href="#朴素贝叶斯" class="headerlink" title="朴素贝叶斯"></a>朴素贝叶斯</h2><ul>
<li><p><a href="https://blog.csdn.net/amds123/article/details/70173402" target="_blank" rel="external">《带你搞懂朴素贝叶斯分类算法》</a></p>
<ul>
<li>P(B|A)=P(A|B)P(B)/P(A)</li>
</ul>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2011/08/bayesian_inference_part_one.html" target="_blank" rel="external">《贝叶斯推断及其互联网应用1》</a></p>
</li>
<li><a href="http://www.ruanyifeng.com/blog/2011/08/bayesian_inference_part_two.html" target="_blank" rel="external">《贝叶斯推断及其互联网应用2》</a></li>
</ul>
<h2 id="推荐算法"><a href="#推荐算法" class="headerlink" title="推荐算法"></a>推荐算法</h2><ul>
<li><a href="http://www.infoq.com/cn/articles/recommendation-algorithm-overview-part01" target="_blank" rel="external">《推荐算法综述》</a></li>
<li><a href="https://www.oschina.net/news/51297/top-10-open-source-recommendation-systems" target="_blank" rel="external">《TOP 10 开源的推荐系统简介》</a></li>
</ul>
<h2 id="最小生成树算法"><a href="#最小生成树算法" class="headerlink" title="最小生成树算法"></a>最小生成树算法</h2><ul>
<li><a href="https://blog.csdn.net/luoshixian099/article/details/51908175" target="_blank" rel="external">《算法导论–最小生成树（Kruskal和Prim算法）》</a></li>
</ul>
<h2 id="最短路径算法"><a href="#最短路径算法" class="headerlink" title="最短路径算法"></a>最短路径算法</h2><ul>
<li><a href="https://blog.csdn.net/qq_35644234/article/details/60870719" target="_blank" rel="external">《Dijkstra算法详解》</a></li>
</ul>
<h1 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h1><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><ul>
<li><a href="http://www.importnew.com/18459.html" target="_blank" rel="external">《40个Java多线程问题总结》</a></li>
</ul>
<h2 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h2><ul>
<li><a href="https://www.cnblogs.com/zhanht/p/5450325.html" target="_blank" rel="external">《Java并发编程——线程安全及解决机制简介》</a></li>
</ul>
<h2 id="一致性、事务"><a href="#一致性、事务" class="headerlink" title="一致性、事务"></a>一致性、事务</h2><h3 id="事务-ACID-特性"><a href="#事务-ACID-特性" class="headerlink" title="事务 ACID 特性"></a>事务 ACID 特性</h3><ul>
<li><a href="https://blog.csdn.net/u012440687/article/details/52116108" target="_blank" rel="external">《数据库事务ACID特性》</a></li>
</ul>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><ul>
<li>未提交读：一个事务可以读取另一个未提交的数据，容易出现脏读的情况。</li>
<li>读提交：一个事务等另外一个事务提交之后才可以读取数据，但会出现不可重复读的情况（多次读取的数据不一致），读取过程中出现UPDATE操作，会多。（大多数数据库默认级别是RC，比如SQL Server，Oracle），读取的时候不可以修改。</li>
<li>可重复读： 同一个事务里确保每次读取的时候，获得的是同样的数据，但不保障原始数据被其他事务更新（幻读），Mysql InnoDB 就是这个级别。</li>
<li><p>序列化：所有事物串行处理（牺牲了效率）</p>
</li>
<li><p><a href="https://blog.csdn.net/qq_33290787/article/details/51924963" target="_blank" rel="external">《理解事务的4种隔离级别》</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/z-sm/p/7245981.html" target="_blank" rel="external">数据库事务的四大特性及事务隔离级别</a></p>
</li>
<li><p><a href="http://blog.sina.com.cn/s/blog_499740cb0100ugs7.html" target="_blank" rel="external">《MySQL的InnoDB的幻读问题 》</a></p>
<ul>
<li>幻读的例子非常清楚。</li>
<li>通过 SELECT … FOR UPDATE 解决。</li>
</ul>
</li>
<li><p><a href="http://database.51cto.com/art/201804/570101.htm" target="_blank" rel="external">《一篇文章带你读懂MySQL和InnoDB》</a></p>
<ul>
<li>图解脏读、不可重复读、幻读问题。</li>
</ul>
</li>
</ul>
<h3 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a>MVCC</h3><ul>
<li><p><a href="https://www.cnblogs.com/chenpingzhao/p/5065316.html" target="_blank" rel="external">《【mysql】关于innodb中MVCC的一些理解》</a></p>
<ul>
<li>innodb 中 MVCC 用在 Repeatable-Read 隔离级别。</li>
<li>MVCC 会产生幻读问题（更新时异常。）</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/whoamiyang/article/details/51901888" target="_blank" rel="external">《轻松理解MYSQL MVCC 实现机制》</a></p>
<ul>
<li>通过隐藏版本列来实现 MVCC 控制，一列记录创建时间、一列记录删除时间，这里的时间</li>
<li>每次只操作比当前版本小（或等于）的 行。</li>
</ul>
</li>
</ul>
<h2 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h2><h3 id="Java中的锁和同步类"><a href="#Java中的锁和同步类" class="headerlink" title="Java中的锁和同步类"></a>Java中的锁和同步类</h3><ul>
<li><p><a href="https://www.cnblogs.com/qifengshi/p/6831055.html" target="_blank" rel="external">《Java中的锁分类》</a></p>
<ul>
<li>主要包括 synchronized、ReentrantLock、和 ReadWriteLock。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/waterystone/p/4920797.html" target="_blank" rel="external">《Java并发之AQS详解》</a></p>
</li>
<li><p><a href="http://cuisuqiang.iteye.com/blog/2020146" target="_blank" rel="external">《Java中信号量 Semaphore》</a></p>
<ul>
<li>有数量控制</li>
<li>申请用 acquire，申请不要则阻塞；释放用 release。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/davidwang456/p/6094947.html" target="_blank" rel="external">《java开发中的Mutex vs Semaphore》</a></p>
<ul>
<li>简单的说 就是Mutex是排它的，只有一个可以获取到资源， Semaphore也具有排它性，但可以定义多个可以获取的资源的对象。</li>
</ul>
</li>
</ul>
<h3 id="公平锁-amp-非公平锁"><a href="#公平锁-amp-非公平锁" class="headerlink" title="公平锁 &amp; 非公平锁"></a>公平锁 &amp; 非公平锁</h3><p>公平锁的作用就是严格按照线程启动的顺序来执行的，不允许其他线程插队执行的；而非公平锁是允许插队的。</p>
<ul>
<li><a href="https://blog.csdn.net/EthanWhite/article/details/55508357" target="_blank" rel="external">《公平锁与非公平锁》</a><ul>
<li>默认情况下 ReentrantLock 和 synchronized 都是非公平锁。ReentrantLock 可以设置成公平锁。</li>
</ul>
</li>
</ul>
<h3 id="悲观锁"><a href="#悲观锁" class="headerlink" title="悲观锁"></a>悲观锁</h3><p>悲观锁如果使用不当（锁的条数过多），会引起服务大面积等待。推荐优先使用乐观锁+重试。</p>
<ul>
<li><p><a href="https://www.cnblogs.com/zhiqian-ali/p/6200874.html" target="_blank" rel="external">《【MySQL】悲观锁&amp;乐观锁》</a></p>
<ul>
<li>乐观锁的方式：版本号+重试方式</li>
<li>悲观锁：通过 select … for update 进行行锁(不可读、不可写，share 锁可读不可写)。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/Lawson/p/5008741.html" target="_blank" rel="external">《Mysql查询语句使用select.. for update导致的数据库死锁分析》</a></p>
<ul>
<li>mysql的innodb存储引擎实务锁虽然是锁行，但它内部是锁索引的。</li>
<li>锁相同数据的不同索引条件可能会引起死锁。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/zejin2008/p/5262751.html" target="_blank" rel="external">《Mysql并发时经典常见的死锁原因及解决方法》</a></p>
</li>
</ul>
<h3 id="乐观锁-amp-CAS"><a href="#乐观锁-amp-CAS" class="headerlink" title="乐观锁 &amp; CAS"></a>乐观锁 &amp; CAS</h3><ul>
<li><a href="http://www.importnew.com/20472.html" target="_blank" rel="external">《乐观锁的一种实现方式——CAS》</a><ul>
<li>和MySQL乐观锁方式相似，只不过是通过和原值进行比较。</li>
</ul>
</li>
</ul>
<h3 id="ABA-问题"><a href="#ABA-问题" class="headerlink" title="ABA 问题"></a>ABA 问题</h3><p>由于高并发，在CAS下，更新后可能此A非彼A。通过版本号可以解决，类似于上文Mysql 中提到的的乐观锁。</p>
<ul>
<li><a href="https://www.cnblogs.com/549294286/p/3766717.html" target="_blank" rel="external">《Java CAS 和ABA问题》</a></li>
<li><a href="https://blog.csdn.net/li954644351/article/details/50511879" target="_blank" rel="external">《Java 中 ABA问题及避免》</a><ul>
<li>AtomicStampedReference 和 AtomicStampedReference。</li>
</ul>
</li>
</ul>
<h3 id="CopyOnWrite容器"><a href="#CopyOnWrite容器" class="headerlink" title="CopyOnWrite容器"></a>CopyOnWrite容器</h3><p>可以对CopyOnWrite容器进行并发的读，而不需要加锁。CopyOnWrite并发容器用于读多写少的并发场景。比如白名单，黑名单，商品类目的访问和更新场景，不适合需要数据强一致性的场景。</p>
<ul>
<li><p><a href="https://www.cnblogs.com/hapjin/p/4840107.html" target="_blank" rel="external">《JAVA中写时复制(Copy-On-Write)Map实现》</a></p>
<ul>
<li>实现读写分离，读取发生在原始数据上，写入发生在副本上。</li>
<li>不用加锁，通过最终一致实现一致性。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/a494303877/article/details/53404623" target="_blank" rel="external">《聊聊并发-Java中的Copy-On-Write容器》</a></p>
</li>
</ul>
<h3 id="RingBuffer"><a href="#RingBuffer" class="headerlink" title="RingBuffer"></a>RingBuffer</h3><ul>
<li><a href="http://www.cnblogs.com/l00l/p/4115001.html" target="_blank" rel="external">《线程安全的无锁RingBuffer的实现【一个读线程，一个写线程】》</a></li>
</ul>
<h3 id="可重入锁-amp-不可重入锁"><a href="#可重入锁-amp-不可重入锁" class="headerlink" title="可重入锁 &amp; 不可重入锁"></a>可重入锁 &amp; 不可重入锁</h3><ul>
<li><p><a href="https://www.cnblogs.com/dj3839/p/6580765.html" target="_blank" rel="external">《可重入锁和不可重入锁》</a></p>
<ul>
<li>通过简单代码举例说明可重入锁和不可重入锁。</li>
<li>可重入锁指同一个线程可以再次获得之前已经获得的锁。</li>
<li>可重入锁可以用户避免死锁。</li>
<li>Java中的可重入锁：synchronized 和 java.util.concurrent.locks.ReentrantLock</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/baizhanshi/p/7211802.html" target="_blank" rel="external">《ReenTrantLock可重入锁（和synchronized的区别）总结》</a></p>
<ul>
<li>synchronized 使用方便，编译器来加锁，是非公平锁。</li>
<li>ReenTrantLock 使用灵活，锁的公平性可以定制。</li>
<li>相同加锁场景下，推荐使用 synchronized。</li>
</ul>
</li>
</ul>
<h3 id="互斥锁-amp-共享锁"><a href="#互斥锁-amp-共享锁" class="headerlink" title="互斥锁 &amp; 共享锁"></a>互斥锁 &amp; 共享锁</h3><p>互斥锁：同时只能有一个线程获得锁。比如，ReentrantLock 是互斥锁，ReadWriteLock 中的写锁是互斥锁。<br>共享锁：可以有多个线程同时或的锁。比如，Semaphore、CountDownLatch 是共享锁，ReadWriteLock 中的读锁是共享锁。</p>
<ul>
<li><a href="https://www.cnblogs.com/liang1101/p/6475555.html" target="_blank" rel="external">《ReadWriteLock场景应用》</a></li>
</ul>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><ul>
<li><a href="https://blog.csdn.net/yunfenglw/article/details/45950305" target="_blank" rel="external">《“死锁”四个必要条件的合理解释》</a><ul>
<li>互斥、持有、不可剥夺、不可剥夺。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/u014039577/article/details/52351626" target="_blank" rel="external">Java如何查看死锁？</a></p>
<ul>
<li>JConsole 可以识别死锁。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/bohu83/article/details/51135061" target="_blank" rel="external">java多线程系列：死锁及检测</a></p>
<ul>
<li>jstack 可以显示死锁。</li>
</ul>
</li>
</ul>
<h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><h2 id="计算机原理"><a href="#计算机原理" class="headerlink" title="计算机原理"></a>计算机原理</h2><ul>
<li><a href="https://segmentfault.com/a/1190000003692840" target="_blank" rel="external">《操作系统基础知识——操作系统的原理，类型和结构》</a></li>
</ul>
<h2 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h2><h3 id="多级缓存"><a href="#多级缓存" class="headerlink" title="多级缓存"></a>多级缓存</h3><p>典型的 CPU 有三级缓存，距离核心越近，速度越快，空间越小。L1 一般 32k，L2 一般 256k，L3 一般12M。内存速度需要200个 CPU 周期，CPU 缓存需要1个CPU周期。</p>
<ul>
<li><a href="https://blog.csdn.net/zero__007/article/details/54089730" target="_blank" rel="external">《从Java视角理解CPU缓存和伪共享》</a></li>
</ul>
<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>TODO</p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><ul>
<li><a href="https://blog.csdn.net/asdf_1024/article/details/78978437" target="_blank" rel="external">《线程的生命周期及状态转换详解》</a></li>
</ul>
<h2 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h2><ul>
<li><a href="https://www.thinksaas.cn/group/topic/839375/" target="_blank" rel="external">《终结python协程—-从yield到actor模型的实现》</a><ul>
<li>线程的调度是由操作系统负责，协程调度是程序自行负责</li>
<li>与线程相比，协程减少了无谓的操作系统切换.</li>
<li>实际上当遇到IO操作时做切换才更有意义，（因为IO操作不用占用CPU），如果没遇到IO操作，按照时间片切换.</li>
</ul>
</li>
</ul>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><ul>
<li><a href="http://www.runoob.com/linux/linux-command-manual.html" target="_blank" rel="external">《Linux 命令大全》</a></li>
</ul>
<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="设计模式的六大原则"><a href="#设计模式的六大原则" class="headerlink" title="设计模式的六大原则"></a>设计模式的六大原则</h2><ul>
<li><a href="https://blog.csdn.net/q291611265/article/details/48465113" target="_blank" rel="external">《设计模式的六大原则》</a><ul>
<li>开闭原则：对扩展开放,对修改关闭，多使用抽象类和接口。</li>
<li>里氏代换原则：基类可以被子类替换，使用抽象类继承,不使用具体类继承。</li>
<li>依赖倒转原则：要依赖于抽象,不要依赖于具体，针对接口编程,不针对实现编程。</li>
<li>接口隔离原则：使用多个隔离的接口,比使用单个接口好，建立最小的接口。</li>
<li>迪米特法则：一个软件实体应当尽可能少地与其他实体发生相互作用，通过中间类建立联系。</li>
<li>合成复用原则：尽量使用合成/聚合,而不是使用继承。</li>
</ul>
</li>
</ul>
<h2 id="23种常见设计模式"><a href="#23种常见设计模式" class="headerlink" title="23种常见设计模式"></a>23种常见设计模式</h2><ul>
<li><a href="http://www.runoob.com/design-pattern/design-pattern-tutorial.html" target="_blank" rel="external">《设计模式》</a></li>
<li><a href="https://www.cnblogs.com/susanws/p/5510229.html" target="_blank" rel="external">《23种设计模式全解析》</a></li>
</ul>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul>
<li><p><a href="http://blog.jobbole.com/62314/" target="_blank" rel="external">《细数JDK里的设计模式》</a></p>
<ul>
<li><p>结构型模式：</p>
<ul>
<li>适配器：用来把一个接口转化成另一个接口，如 java.util.Arrays#asList()。</li>
<li>桥接模式：这个模式将抽象和抽象操作的实现进行了解耦，这样使得抽象和实现可以独立地变化，如JDBC；</li>
<li>组合模式：使得客户端看来单个对象和对象的组合是同等的。换句话说，某个类型的方法同时也接受自身类型作为参数，如 Map.putAll，List.addAll、Set.addAll。</li>
<li>装饰者模式：动态的给一个对象附加额外的功能，这也是子类的一种替代方式，如 java.util.Collections#checkedList|Map|Set|SortedSet|SortedMap。</li>
<li>享元模式：使用缓存来加速大量小对象的访问时间，如 valueOf(int)。</li>
<li>代理模式：代理模式是用一个简单的对象来代替一个复杂的或者创建耗时的对象，如 java.lang.reflect.Proxy</li>
</ul>
</li>
<li><p>创建模式:</p>
<ul>
<li>抽象工厂模式：抽象工厂模式提供了一个协议来生成一系列的相关或者独立的对象，而不用指定具体对象的类型，如 java.util.Calendar#getInstance()。</li>
<li>建造模式(Builder)：定义了一个新的类来构建另一个类的实例，以简化复杂对象的创建，如：java.lang.StringBuilder#append()。</li>
<li>工厂方法：就是 <strong>一个返*</strong> 回具体对象的方法，而不是多个，如 java.lang.Object#toString()、java.lang.Class#newInstance()。</li>
<li>原型模式：使得类的实例能够生成自身的拷贝、如：java.lang.Object#clone()。</li>
<li>单例模式：全局只有一个实例，如 java.lang.Runtime#getRuntime()。</li>
</ul>
</li>
<li>行为模式：<ul>
<li>责任链模式：通过把请求从一个对象传递到链条中下一个对象的方式，直到请求被处理完毕，以实现对象间的解耦。如 javax.servlet.Filter#doFilter()。</li>
<li>命令模式：将操作封装到对象内，以便存储，传递和返回，如：java.lang.Runnable。</li>
<li>解释器模式：定义了一个语言的语法，然后解析相应语法的语句，如，java.text.Format，java.text.Normalizer。</li>
<li>迭代器模式：提供一个一致的方法来顺序访问集合中的对象，如 java.util.Iterator。</li>
<li>中介者模式：通过使用一个中间对象来进行消息分发以及减少类之间的直接依赖，java.lang.reflect.Method#invoke()。</li>
<li>空对象模式：如 java.util.Collections#emptyList()。</li>
<li>观察者模式：它使得一个对象可以灵活的将消息发送给感兴趣的对象，如 java.util.EventListener。</li>
<li>模板方法模式：让子类可以重写方法的一部分，而不是整个重写，如 java.util.Collections#sort()。</li>
</ul>
</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/hwaggLee/p/4510687.html" target="_blank" rel="external">《Spring-涉及到的设计模式汇总》</a></p>
</li>
<li><a href="https://blog.csdn.net/u012387062/article/details/54719114" target="_blank" rel="external">《Mybatis使用的设计模式》</a></li>
</ul>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><ul>
<li><a href="https://blog.csdn.net/YECrazy/article/details/79481964" target="_blank" rel="external">《单例模式的三种实现 以及各自的优缺点》</a></li>
<li><a href="https://www.cnblogs.com/ttylinux/p/6498822.html" target="_blank" rel="external">《单例模式－－反射－－防止序列化破坏单例模式》</a><ul>
<li>使用枚举类型。</li>
</ul>
</li>
</ul>
<h2 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h2><p>TODO</p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><ul>
<li><a href="http://www.runoob.com/design-pattern/mvc-pattern.html" target="_blank" rel="external">《MVC 模式》</a><ul>
<li>模型(model)－视图(view)－控制器(controller)</li>
</ul>
</li>
</ul>
<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><ul>
<li><a href="https://www.zhihu.com/question/23277575" target="_blank" rel="external">《理解 IOC》</a></li>
<li><a href="https://www.cnblogs.com/NancyStartOnce/p/6813162.html" target="_blank" rel="external">《IOC 的理解与解释》</a><ul>
<li>正向控制：传统通过new的方式。反向控制，通过容器注入对象。</li>
<li>作用：用于模块解耦。</li>
<li>DI：Dependency Injection，即依赖注入，只关心资源使用，不关心资源来源。</li>
</ul>
</li>
</ul>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><ul>
<li><a href="https://my.oschina.net/yanquan345/blog/203415" target="_blank" rel="external">《轻松理解AOP(面向切面编程)》</a></li>
<li><a href="https://www.cnblogs.com/hongwz/p/5764917.html" target="_blank" rel="external">《Spring AOP详解》</a></li>
<li><a href="http://www.importnew.com/24305.html" target="_blank" rel="external">《Spring AOP的实现原理》</a><ul>
<li>Spring AOP使用的动态代理，主要有两种方式：JDK动态代理和CGLIB动态代理。</li>
</ul>
</li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-springaopcglib/" target="_blank" rel="external">《Spring AOP 实现原理与 CGLIB 应用》</a><ul>
<li>Spring AOP 框架对 AOP 代理类的处理原则是：如果目标对象的实现类实现了接口，Spring AOP 将会采用 JDK 动态代理来生成 AOP 代理类；如果目标对象的实现类没有实现接口，Spring AOP 将会采用 CGLIB 来生成 AOP 代理类</li>
</ul>
</li>
</ul>
<h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h2><ul>
<li><a href="https://www.w3cschool.cn/uml_tutorial/" target="_blank" rel="external">《UML教程》</a></li>
</ul>
<h2 id="微服务思想"><a href="#微服务思想" class="headerlink" title="微服务思想"></a>微服务思想</h2><ul>
<li><a href="https://www.cnblogs.com/wintersun/p/6219259.html" target="_blank" rel="external">《微服务架构设计》</a></li>
<li><a href="http://www.infoq.com/cn/articles/micro-service-technology-stack" target="_blank" rel="external">《微服务架构技术栈选型手册》</a></li>
</ul>
<h3 id="康威定律"><a href="#康威定律" class="headerlink" title="康威定律"></a>康威定律</h3><ul>
<li><p><a href="https://yq.aliyun.com/articles/8611" target="_blank" rel="external">《微服务架构的理论基础 - 康威定律》</a></p>
<ul>
<li>定律一：组织沟通方式会通过系统设计表达出来，就是说架构的布局和组织结构会有相似。</li>
<li>定律二：时间再多一件事情也不可能做的完美，但总有时间做完一件事情。一口气吃不成胖子，先搞定能搞定的。</li>
<li>定律三：线型系统和线型组织架构间有潜在的异质同态特性。种瓜得瓜，做独立自治的子系统减少沟通成本。</li>
<li>定律四：大的系统组织总是比小系统更倾向于分解。合久必分，分而治之。</li>
</ul>
</li>
<li><p><a href="https://static.geekbang.org/PDF-%E4%BF%AE%E6%94%B9%E7%89%88-%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4-%E5%9B%BE%E7%89%87-%E6%9D%A8%E6%B3%A2-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84.pdf" target="_blank" rel="external">《微服务架构核⼼20讲》</a></p>
</li>
</ul>
<h1 id="运维-amp-统计-amp-技术支持"><a href="#运维-amp-统计-amp-技术支持" class="headerlink" title="运维 &amp; 统计 &amp; 技术支持"></a>运维 &amp; 统计 &amp; 技术支持</h1><h2 id="常规监控"><a href="#常规监控" class="headerlink" title="常规监控"></a>常规监控</h2><ul>
<li><p><a href="https://blog.csdn.net/enweitech/article/details/77849205" target="_blank" rel="external">《腾讯业务系统监控的修炼之路》</a></p>
<ul>
<li>监控的方式：主动、被动、旁路(比如舆情监控)</li>
<li>监控类型： 基础监控、服务端监控、客户端监控、<br>监控、用户端监控</li>
<li>监控的目标：全、块、准</li>
<li>核心指标：请求量、成功率、耗时</li>
</ul>
</li>
<li><p><a href="https://www.oschina.net/news/67525/monitoring-tools" target="_blank" rel="external">《开源还是商用？十大云运维监控工具横评》</a></p>
<ul>
<li>Zabbix、Nagios、Ganglia、Zenoss、Open-falcon、监控宝、 360网站服务监控、阿里云监控、百度云观测、小蜜蜂网站监测等。</li>
</ul>
</li>
<li><p><a href="http://developer.51cto.com/art/201612/525373.htm" target="_blank" rel="external">《监控报警系统搭建及二次开发经验》</a></p>
</li>
</ul>
<p><strong>命令行监控工具</strong></p>
<ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/44-an-quan-yu-yun-wei/445-fu-wu-qi-zhuang-tai-jian-ce/4451-ming-ling-xing-gong-ju.html" target="_blank" rel="external">《常用命令行监控工具》</a></p>
<ul>
<li>top、sar、tsar、nload</li>
</ul>
</li>
<li><p><a href="http://blog.jobbole.com/96846/" target="_blank" rel="external">《20个命令行工具监控 Linux 系统性能》</a></p>
</li>
<li><p><a href="https://my.oschina.net/feichexia/blog/196575" target="_blank" rel="external">《JVM性能调优监控工具jps、jstack、jmap、jhat、jstat、hprof使用详解》</a></p>
</li>
</ul>
<h2 id="APM"><a href="#APM" class="headerlink" title="APM"></a>APM</h2><p>APM —  Application Performance Management</p>
<ul>
<li><p><a href="http://bigbully.github.io/Dapper-translation/" target="_blank" rel="external">《Dapper，大规模分布式系统的跟踪系统》</a></p>
</li>
<li><p><a href="http://opentracing.io" target="_blank" rel="external">CNCF OpenTracing</a>，<a href="https://github.com/opentracing-contrib/opentracing-specification-zh" target="_blank" rel="external">中文版</a></p>
</li>
<li><p>主要开源软件，按字母排序</p>
<ul>
<li><a href="https://github.com/apache/incubator-skywalking" target="_blank" rel="external">Apache SkyWalking</a></li>
<li><a href="https://github.com/dianping/cat" target="_blank" rel="external">CAT</a></li>
<li><a href="https://github.com/jaegertracing/jaeger" target="_blank" rel="external">CNCF jaeger</a></li>
<li><a href="https://github.com/naver/pinpoint" target="_blank" rel="external">Pinpoint</a></li>
<li><a href="https://github.com/openzipkin/zipkin" target="_blank" rel="external">Zipkin</a></li>
</ul>
</li>
<li><p><a href="http://www.infoq.com/cn/articles/apm-Pinpoint-practice" target="_blank" rel="external">《开源APM技术选型与实战》</a></p>
<ul>
<li>主要基于 Google的Dapper（大规模分布式系统的跟踪系统） 思想。</li>
</ul>
</li>
</ul>
<h2 id="统计分析"><a href="#统计分析" class="headerlink" title="统计分析"></a>统计分析</h2><ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/25195217" target="_blank" rel="external">《流量统计的基础：埋点》</a></p>
<ul>
<li>常用指标：访问与访客、停留时长、跳出率、退出率、转化率、参与度</li>
</ul>
</li>
<li><p><a href="http://www.25xt.com/company/17066.html" target="_blank" rel="external">《APP埋点常用的统计工具、埋点目标和埋点内容》</a></p>
<ul>
<li>第三方统计：友盟、百度移动、魔方、App Annie、talking data、神策数据等。</li>
</ul>
</li>
<li><p><a href="https://tech.meituan.com/mt-mobile-analytics-practice.html" target="_blank" rel="external">《美团点评前端无痕埋点实践》</a></p>
<ul>
<li>所谓无痕、即通过可视化工具配置采集节点，在前端自动解析配置并上报埋点数据，而非硬编码。</li>
</ul>
</li>
</ul>
<h2 id="持续集成-CI-CD"><a href="#持续集成-CI-CD" class="headerlink" title="持续集成(CI/CD)"></a>持续集成(CI/CD)</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html" target="_blank" rel="external">《持续集成是什么？》</a></li>
<li><a href="https://www.testwo.com/article/1170" target="_blank" rel="external">《8个流行的持续集成工具》</a></li>
</ul>
<h3 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h3><ul>
<li><a href="https://www.liaoxuefeng.com/article/001463233913442cdb2d1bd1b1b42e3b0b29eb1ba736c5e000" target="_blank" rel="external">《使用Jenkins进行持续集成》</a></li>
</ul>
<h3 id="环境分离"><a href="#环境分离" class="headerlink" title="环境分离"></a>环境分离</h3><p>开发、测试、生成环境分离。</p>
<ul>
<li><a href="https://my.oschina.net/sancuo/blog/214904" target="_blank" rel="external">《开发环境、生产环境、测试环境的基本理解和区》</a></li>
</ul>
<h2 id="自动化运维"><a href="#自动化运维" class="headerlink" title="自动化运维"></a>自动化运维</h2><h3 id="Ansible"><a href="#Ansible" class="headerlink" title="Ansible"></a>Ansible</h3><ul>
<li><a href="http://www.ansible.com.cn/" target="_blank" rel="external">《Ansible中文权威指南》</a></li>
<li><a href="https://www.cnblogs.com/heiye123/articles/7855890.html" target="_blank" rel="external">《Ansible基础配置和企业级项目实用案例》</a></li>
</ul>
<h3 id="puppet"><a href="#puppet" class="headerlink" title="puppet"></a>puppet</h3><ul>
<li><a href="https://www.cnblogs.com/keerya/p/8040071.html" target="_blank" rel="external">《自动化运维工具——puppet详解》</a></li>
</ul>
<h3 id="chef"><a href="#chef" class="headerlink" title="chef"></a>chef</h3><ul>
<li><a href="https://www.ibm.com/developerworks/cn/cloud/library/1407_caomd_chef/" target="_blank" rel="external">《Chef 的安装与使用》</a></li>
</ul>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="TDD-理论"><a href="#TDD-理论" class="headerlink" title="TDD 理论"></a>TDD 理论</h3><ul>
<li><a href="https://www.jianshu.com/p/62f16cd4fef3" target="_blank" rel="external">《深度解读 - TDD（测试驱动开发）》</a><ul>
<li>基于测试用例编码功能代码，XP（Extreme Programming）的核心实践.</li>
<li>好处：一次关注一个点，降低思维负担；迎接需求变化或改善代码的设计；提前澄清需求；快速反馈；</li>
</ul>
</li>
</ul>
<h3 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h3><ul>
<li><a href="https://www.cnblogs.com/happyzm/p/6482886.html" target="_blank" rel="external">《Java单元测试之JUnit篇》</a></li>
<li><a href="https://blog.csdn.net/hotdust/article/details/53406086" target="_blank" rel="external">《JUnit 4 与 TestNG 对比》</a><ul>
<li>TestNG 覆盖 JUnit 功能，适用于更复杂的场景。</li>
</ul>
</li>
<li><a href="https://blog.csdn.net/wqetfg/article/details/50900512" target="_blank" rel="external">《单元测试主要的测试功能点》</a><ul>
<li>模块接口测试、局部数据结构测试、路径测试 、错误处理测试、边界条件测试 。</li>
</ul>
</li>
</ul>
<h3 id="压力测试"><a href="#压力测试" class="headerlink" title="压力测试"></a>压力测试</h3><ul>
<li><a href="https://blog.csdn.net/blueheart20/article/details/52170790" target="_blank" rel="external">《Apache ab 测试使用指南》</a></li>
<li><a href="https://www.cnblogs.com/binyue/p/6141088.html" target="_blank" rel="external">《大型网站压力测试及优化方案》</a></li>
<li><a href="http://news.chinabyte.com/466/14126966.shtml" target="_blank" rel="external">《10大主流压力/负载/性能测试工具推荐》</a></li>
<li><a href="http://quentinxxz.iteye.com/blog/2249799" target="_blank" rel="external">《真实流量压测工具 tcpcopy应用浅析》</a></li>
<li><a href="https://www.cnblogs.com/jwentest/p/7136727.html" target="_blank" rel="external">《nGrinder 简易使用教程》</a></li>
</ul>
<h3 id="全链路压测"><a href="#全链路压测" class="headerlink" title="全链路压测"></a>全链路压测</h3><ul>
<li><a href="http://www.infoq.com/cn/articles/jd-618-upgrade-full-link-voltage-test-program-forcebot" target="_blank" rel="external">《京东618：升级全链路压测方案，打造军演机器人ForceBot》</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/30306892" target="_blank" rel="external">《饿了么全链路压测的探索与实践》</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28355759" target="_blank" rel="external">《四大语言，八大框架｜滴滴全链路压测解决之道》</a></li>
<li><a href="https://www.jianshu.com/p/27060fd61f72" target="_blank" rel="external">《全链路压测经验》</a></li>
</ul>
<h3 id="A-B-、灰度、蓝绿测试"><a href="#A-B-、灰度、蓝绿测试" class="headerlink" title="A/B 、灰度、蓝绿测试"></a>A/B 、灰度、蓝绿测试</h3><ul>
<li><a href="https://testerhome.com/topics/11165" target="_blank" rel="external">《技术干货 | AB 测试和灰度发布探索及实践》</a></li>
<li><p><a href="http://blog.51cto.com/purplegrape/1403123" target="_blank" rel="external">《nginx 根据IP 进行灰度发布》</a></p>
</li>
<li><p><a href="https://www.v2ex.com/t/344341" target="_blank" rel="external">《蓝绿部署、A/B 测试以及灰度发布》</a></p>
</li>
</ul>
<h2 id="虚拟化"><a href="#虚拟化" class="headerlink" title="虚拟化"></a>虚拟化</h2><ul>
<li><a href="https://blog.csdn.net/enweitech/article/details/52910082" target="_blank" rel="external">《VPS的三种虚拟技术OpenVZ、Xen、KVM优缺点比较》</a></li>
</ul>
<h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><ul>
<li><a href="http://blog.chinaunix.net/uid-20201831-id-5775661.html" target="_blank" rel="external">《KVM详解，太详细太深入了，经典》</a></li>
<li><a href="https://www.coderxing.com/kvm-install.html" target="_blank" rel="external">《【图文】KVM 虚拟机安装详解》</a></li>
</ul>
<h3 id="Xen"><a href="#Xen" class="headerlink" title="Xen"></a>Xen</h3><ul>
<li><a href="https://www.cnblogs.com/sddai/p/5931201.html" target="_blank" rel="external">《Xen虚拟化基本原理详解》</a></li>
</ul>
<h3 id="OpenVZ"><a href="#OpenVZ" class="headerlink" title="OpenVZ"></a>OpenVZ</h3><ul>
<li><a href="https://blog.csdn.net/longerzone/article/details/44829255" target="_blank" rel="external">《开源Linux容器 OpenVZ 快速上手指南》</a></li>
</ul>
<h2 id="容器技术"><a href="#容器技术" class="headerlink" title="容器技术"></a>容器技术</h2><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><ul>
<li><a href="https://www.cnblogs.com/SzeCheng/p/6822905.html" target="_blank" rel="external">《几张图帮你理解 docker 基本原理及快速入门》</a></li>
<li><a href="https://draveness.me/docker" target="_blank" rel="external">《Docker 核心技术与实现原理》</a></li>
<li><a href="http://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="external">《Docker 教程》</a></li>
</ul>
<h2 id="云技术"><a href="#云技术" class="headerlink" title="云技术"></a>云技术</h2><h3 id="OpenStack"><a href="#OpenStack" class="headerlink" title="OpenStack"></a>OpenStack</h3><ul>
<li><a href="https://www.cnblogs.com/klb561/p/8660264.html" target="_blank" rel="external">《OpenStack构架知识梳理》</a></li>
</ul>
<h2 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h2><ul>
<li><a href="https://www.cnblogs.com/jetzhang/p/6068773.html" target="_blank" rel="external">《一分钟告诉你究竟DevOps是什么鬼？》</a></li>
<li><a href="http://www.infoq.com/cn/articles/detail-analysis-of-devops" target="_blank" rel="external">《DevOps详解》</a></li>
</ul>
<h2 id="文档管理"><a href="#文档管理" class="headerlink" title="文档管理"></a>文档管理</h2><ul>
<li><a href="http://www.confluence.cn/" target="_blank" rel="external">Confluence-收费文档管理系统</a></li>
<li>GitLab?</li>
<li>Wiki</li>
</ul>
<h1 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h1><h2 id="Web-Server"><a href="#Web-Server" class="headerlink" title="Web Server"></a>Web Server</h2><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><ul>
<li><p><a href="https://blog.csdn.net/qq_25797077/article/details/52200722" target="_blank" rel="external">《Ngnix的基本学习-多进程和Apache的比较》</a></p>
<ul>
<li>Nginx 通过异步非阻塞的事件处理机制实现高并发。Apache 每个请求独占一个线程，非常消耗系统资源。</li>
<li>事件驱动适合于IO密集型服务(Nginx)，多进程或线程适合于CPU密集型服务(Apache)，所以Nginx适合做反向代理，而非web服务器使用。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/cunkouzh/p/5410154.html" target="_blank" rel="external">《nginx与Apache的对比以及优缺点》</a></p>
<ul>
<li>nginx只适合静态和反向代理，不适合处理动态请求。</li>
</ul>
</li>
</ul>
<h3 id="OpenResty"><a href="#OpenResty" class="headerlink" title="OpenResty"></a>OpenResty</h3><ul>
<li><a href="http://openresty.org/cn/" target="_blank" rel="external">官方网站</a></li>
<li><a href="http://www.linkedkeeper.com/detail/blog.action?bid=1034" target="_blank" rel="external">《浅谈 OpenResty》</a><ul>
<li>通过 Lua 模块可以在Nginx上进行开发。</li>
</ul>
</li>
</ul>
<h3 id="Apache-Httpd"><a href="#Apache-Httpd" class="headerlink" title="Apache Httpd"></a>Apache Httpd</h3><ul>
<li><a href="http://httpd.apache.org/" target="_blank" rel="external">官方网站</a></li>
</ul>
<h3 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h3><h4 id="架构原理"><a href="#架构原理" class="headerlink" title="架构原理"></a>架构原理</h4><ul>
<li><a href="https://www.cnblogs.com/hggen/p/6264475.html" target="_blank" rel="external">《TOMCAT原理详解及请求过程》</a></li>
<li><a href="https://www.cnblogs.com/crazylqy/p/4706223.html" target="_blank" rel="external">《Tomcat服务器原理详解》</a></li>
<li><p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-tomcat1/" target="_blank" rel="external">《Tomcat 系统架构与设计模式,第 1 部分: 工作原理》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/xlgen157387/article/details/79006434" target="_blank" rel="external">《四张图带你了解Tomcat系统架构》</a></p>
</li>
<li><p><a href="https://www.futurehosting.com/blog/jboss-vs-tomcat-choosing-a-java-application-server/" target="_blank" rel="external">《JBoss vs. Tomcat: Choosing A Java Application Server》</a></p>
<ul>
<li>Tomcat 是轻量级的 Serverlet 容器，没有实现全部 JEE 特性（比如持久化和事务处理），但可以通过其他组件代替，比如Srping。</li>
<li>Jboss 实现全部了JEE特性，软件开源免费、文档收费。</li>
</ul>
</li>
</ul>
<h4 id="调优方案"><a href="#调优方案" class="headerlink" title="调优方案"></a>调优方案</h4><ul>
<li><p><a href="https://www.cnblogs.com/sunfenqing/p/7339058.html" target="_blank" rel="external">《Tomcat 调优方案》</a></p>
<ul>
<li>启动NIO模式（或者APR）；调整线程池；禁用AJP连接器（Nginx+tomcat的架构，不需要AJP）；</li>
</ul>
</li>
<li><p><a href="http://blog.chinaunix.net/uid-20662363-id-3012760.html" target="_blank" rel="external">《tomcat http协议与ajp协议》</a></p>
</li>
<li><a href="http://dmouse.iteye.com/blog/1354527" target="_blank" rel="external">《AJP与HTTP比较和分析》</a><ul>
<li>AJP 协议（8009端口）用于降低和前端Server（如Apache，而且需要支持AJP协议）的连接数(前端)，通过长连接提高性能。</li>
<li>并发高时，AJP协议优于HTTP协议。</li>
</ul>
</li>
</ul>
<h3 id="Jetty"><a href="#Jetty" class="headerlink" title="Jetty"></a>Jetty</h3><ul>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-jetty/" target="_blank" rel="external">《Jetty 的工作原理以及与 Tomcat 的比较》</a></li>
<li><a href="https://blog.csdn.net/doutao6677/article/details/51957288" target="_blank" rel="external">《jetty和tomcat优势比较》</a><ul>
<li>架构比较:Jetty的架构比Tomcat的更为简单。</li>
<li>性能比较：Jetty和Tomcat性能方面差异不大，Jetty默认采用NIO结束在处理I/O请求上更占优势，Tomcat默认采用BIO处理I/O请求，Tomcat适合处理少数非常繁忙的链接，处理静态资源时性能较差。</li>
<li>其他方面：Jetty的应用更加快速，修改简单，对新的Servlet规范的支持较好;Tomcat 对JEE和Servlet 支持更加全面。</li>
</ul>
</li>
</ul>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><ul>
<li><a href="https://blog.csdn.net/clementad/article/details/48229243" target="_blank" rel="external">《缓存失效策略（FIFO 、LRU、LFU三种算法的区别）》</a></li>
</ul>
<h3 id="本地缓存"><a href="#本地缓存" class="headerlink" title="本地缓存"></a>本地缓存</h3><ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/421-ying-yong-ceng-ben-di-huan-cun/4211.html" target="_blank" rel="external">《HashMap本地缓存》</a></p>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/421-ying-yong-ceng-ben-di-huan-cun/4212-ehcache.html" target="_blank" rel="external">《EhCache本地缓存》</a></p>
<ul>
<li>堆内、堆外、磁盘三级缓存。</li>
<li>可按照缓存空间容量进行设置。</li>
<li>按照时间、次数等过期策略。</li>
</ul>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/421-ying-yong-ceng-ben-di-huan-cun/4213-guava-cache.html" target="_blank" rel="external">《Guava Cache》</a></p>
<ul>
<li>简单轻量、无堆外、磁盘缓存。</li>
</ul>
</li>
</ul>
<ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/422-fu-wu-duan-ben-di-huan-cun/nginx-ben-di-huan-cun.html" target="_blank" rel="external">《Nginx本地缓存》</a></p>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/422-fu-wu-duan-ben-di-huan-cun/4222-pagespeed.html" target="_blank" rel="external">《Pagespeed—懒人工具，服务器端加速》</a></p>
</li>
</ul>
<h2 id="客户端缓存"><a href="#客户端缓存" class="headerlink" title="客户端缓存"></a>客户端缓存</h2><ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-er-pian-ff1a-feng-kuang-yuan-shi-ren/42-xing-neng-zhi-ben-di-huan-cun/423-ke-hu-duan-huan-cun.html" target="_blank" rel="external">《浏览器端缓存》</a></p>
<ul>
<li>主要是利用 Cache-Control 参数。</li>
</ul>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/qHm_dJBhVbv0pJs8Crp77w" target="_blank" rel="external">《H5 和移动端 WebView 缓存机制解析与实战》</a></p>
</li>
</ul>
<h2 id="服务端缓存"><a href="#服务端缓存" class="headerlink" title="服务端缓存"></a>服务端缓存</h2><h3 id="Memcached"><a href="#Memcached" class="headerlink" title="Memcached"></a>Memcached</h3><ul>
<li><a href="http://www.runoob.com/Memcached/Memcached-tutorial.html" target="_blank" rel="external">《Memcached 教程》</a></li>
<li><a href="https://blog.csdn.net/chenleixing/article/details/47035453" target="_blank" rel="external">《深入理解Memcached原理》</a><ul>
<li>采用多路复用技术提高并发性。</li>
<li>slab分配算法： memcached给Slab分配内存空间，默认是1MB。分配给Slab之后 把slab的切分成大小相同的chunk，Chunk是用于缓存记录的内存空间，Chunk 的大小默认按照1.25倍的速度递增。好处是不会频繁申请内存，提高IO效率，坏处是会有一定的内存浪费。</li>
</ul>
</li>
<li><a href="https://www.jianshu.com/p/36e5cd400580" target="_blank" rel="external">《Memcached软件工作原理》</a></li>
<li><p><a href="http://zhihuzeye.com/archives/2361" target="_blank" rel="external">《Memcache技术分享：介绍、使用、存储、算法、优化、命中率》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/liu251890347/article/details/37690045" target="_blank" rel="external">《memcache 中 add 、 set 、replace 的区别》</a></p>
<ul>
<li>区别在于当key存在还是不存在时，返回值是true和false的。</li>
</ul>
</li>
<li><p><a href="https://pan.baidu.com/s/1qX00Lti?errno=0&amp;errmsg=Auth%20Login%20Sucess&amp;&amp;bduss=&amp;ssnerror=0&amp;traceid=" target="_blank" rel="external"><strong>《memcached全面剖析》</strong></a></p>
</li>
</ul>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><ul>
<li><a href="http://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="external">《Redis 教程》</a></li>
<li><a href="https://blog.csdn.net/wcf373722432/article/details/78678504" target="_blank" rel="external">《redis底层原理》</a><ul>
<li>使用 ziplist 存储链表，ziplist是一种压缩链表，它的好处是更能节省内存空间，因为它所存储的内容都是在连续的内存区域当中的。</li>
<li>使用 skiplist(跳跃表)来存储有序集合对象、查找上先从高Level查起、时间复杂度和红黑树相当，实现容易，无锁、并发性好。</li>
</ul>
</li>
<li><p><a href="http://doc.redisfans.com/topic/persistence.html" target="_blank" rel="external">《Redis持久化方式》</a></p>
<ul>
<li>RDB方式：定期备份快照，常用于灾难恢复。优点：通过fork出的进程进行备份，不影响主进程、RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快。缺点：会丢数据。</li>
<li>AOF方式：保存操作日志方式。优点：恢复时数据丢失少，缺点：文件大，回复慢。</li>
<li>也可以两者结合使用。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/chunlongyu/article/details/53346436" target="_blank" rel="external">《分布式缓存–序列3–原子操作与CAS乐观锁》</a></p>
</li>
</ul>
<h4 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h4><ul>
<li><a href="https://blog.csdn.net/sunhuiliang85/article/details/73656830" target="_blank" rel="external">《Redis单线程架构》</a></li>
</ul>
<h4 id="回收策略"><a href="#回收策略" class="headerlink" title="回收策略"></a>回收策略</h4><ul>
<li><a href="https://blog.csdn.net/qq_29108585/article/details/63251491" target="_blank" rel="external">《redis的回收策略》</a></li>
</ul>
<h3 id="Tair"><a href="#Tair" class="headerlink" title="Tair"></a>Tair</h3><ul>
<li><a href="https://github.com/alibaba/tair" target="_blank" rel="external">官方网站</a></li>
<li><a href="http://blog.csdn.net/farphone/article/details/53522383" target="_blank" rel="external">《Tair和Redis的对比》</a></li>
<li>特点：可以配置备份节点数目，通过异步同步到备份节点</li>
<li>一致性Hash算法。</li>
<li>架构：和Hadoop 的设计思想类似，有Configserver，DataServer，Configserver 通过心跳来检测，Configserver也有主备关系。</li>
</ul>
<p>几种存储引擎:</p>
<ul>
<li>MDB，完全内存性，可以用来存储Session等数据。</li>
<li>Rdb（类似于Redis），轻量化，去除了aof之类的操作，支持Restfull操作</li>
<li>LDB（LevelDB存储引擎），持久化存储，LDB 作为rdb的持久化，google实现，比较高效，理论基础是LSM(Log-Structured-Merge Tree)算法，现在内存中修改数据，达到一定量时（和内存汇总的旧数据一同写入磁盘）再写入磁盘，存储更加高效，县比喻Hash算法。</li>
<li>Tair采用共享内存来存储数据，如果服务挂掉（非服务器），重启服务之后，数据亦然还在。</li>
</ul>
<h2 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h2><ul>
<li><p><a href="https://www.cnblogs.com/charlesblc/p/6045238.html" target="_blank" rel="external">《消息队列-推/拉模式学习 &amp; ActiveMQ及JMS学习》</a></p>
<ul>
<li>RabbitMQ 消费者默认是推模式（也支持拉模式）。</li>
<li>Kafka 默认是拉模式。</li>
<li>Push方式：优点是可以尽可能快地将消息发送给消费者，缺点是如果消费者处理能力跟不上，消费者的缓冲区可能会溢出。</li>
<li>Pull方式：优点是消费端可以按处理能力进行拉去，缺点是会增加消息延迟。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/yunfeng482/article/details/72856762" target="_blank" rel="external">《Kafka、RabbitMQ、RocketMQ等消息中间件的对比 —— 消息发送性能和区别》</a></p>
</li>
</ul>
<h3 id="消息总线"><a href="#消息总线" class="headerlink" title="消息总线"></a>消息总线</h3><p>消息总线相当于在消息队列之上做了一层封装，统一入口，统一管控、简化接入成本。</p>
<ul>
<li><a href="https://blog.csdn.net/yanghua_kobe/article/details/43877281" target="_blank" rel="external">《消息总线VS消息队列》</a></li>
</ul>
<h3 id="消息的顺序"><a href="#消息的顺序" class="headerlink" title="消息的顺序"></a>消息的顺序</h3><ul>
<li><a href="https://www.cnblogs.com/cjsblog/p/8267892.html" target="_blank" rel="external">《如何保证消费者接收消息的顺序》</a></li>
</ul>
<h3 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h3><p>支持事务，推拉模式都是支持、适合需要可靠性消息传输的场景。</p>
<ul>
<li><a href="https://blog.csdn.net/whoamiyang/article/details/54954780" target="_blank" rel="external">《RabbitMQ的应用场景以及基本原理介绍》</a></li>
<li><a href="https://www.jianshu.com/p/79ca08116d57" target="_blank" rel="external">《消息队列之 RabbitMQ》</a></li>
<li><a href="https://blog.csdn.net/u013256816/article/details/55515234" target="_blank" rel="external">《RabbitMQ之消息确认机制（事务+Confirm）》</a></li>
</ul>
<h3 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h3><p>Java实现，推拉模式都是支持，吞吐量逊于Kafka。可以保证消息顺序。</p>
<ul>
<li><a href="https://www.jianshu.com/p/824066d70da8" target="_blank" rel="external">《RocketMQ 实战之快速入门》</a></li>
</ul>
<h3 id="ActiveMQ"><a href="#ActiveMQ" class="headerlink" title="ActiveMQ"></a>ActiveMQ</h3><p>纯Java实现，兼容JMS，可以内嵌于Java应用中。</p>
<ul>
<li><a href="https://www.cnblogs.com/wintersun/p/3962302.html" target="_blank" rel="external">《ActiveMQ消息队列介绍》</a></li>
</ul>
<h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><p>高吞吐量、采用拉模式。适合高IO场景，比如日志同步。</p>
<ul>
<li><a href="http://kafka.apache.org/" target="_blank" rel="external">官方网站</a></li>
<li><a href="https://blog.csdn.net/allthesametome/article/details/47362451" target="_blank" rel="external">《各消息队列对比，Kafka深度解析，众人推荐，精彩好文！》</a></li>
<li><a href="http://lxw1234.com/archives/2015/10/538.htm" target="_blank" rel="external">《Kafka分区机制介绍与示例》</a></li>
</ul>
<h3 id="Redis-消息推送"><a href="#Redis-消息推送" class="headerlink" title="Redis 消息推送"></a>Redis 消息推送</h3><p>生产者、消费者模式完全是客户端行为，list 和 拉模式实现，阻塞等待采用 blpop 指令。</p>
<ul>
<li><a href="https://blog.csdn.net/qq_34212276/article/details/78455004" target="_blank" rel="external">《Redis学习笔记之十：Redis用作消息队列》</a></li>
</ul>
<h3 id="ZeroMQ"><a href="#ZeroMQ" class="headerlink" title="ZeroMQ"></a>ZeroMQ</h3><p> TODO</p>
<h2 id="定时调度"><a href="#定时调度" class="headerlink" title="定时调度"></a>定时调度</h2><h3 id="单机定时调度"><a href="#单机定时调度" class="headerlink" title="单机定时调度"></a>单机定时调度</h3><ul>
<li><p><a href="https://www.cnblogs.com/shuaiqing/p/7742382.html" target="_blank" rel="external">《linux定时任务cron配置》</a></p>
</li>
<li><p><a href="https://my.oschina.net/daquan/blog/483305" target="_blank" rel="external">《Linux cron运行原理》</a></p>
<ul>
<li>fork 进程 + sleep 轮询</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/drift-ice/p/3817269.html" target="_blank" rel="external">《Quartz使用总结》</a></p>
</li>
<li><a href="https://blog.csdn.net/wenniuwuren/article/details/42082981/" target="_blank" rel="external">《Quartz源码解析 —- 触发器按时启动原理》</a></li>
<li><a href="https://www.jianshu.com/p/bab8e4e32952" target="_blank" rel="external">《quartz原理揭秘和源码解读》</a><ul>
<li>定时调度在 QuartzSchedulerThread 代码中，while()无限循环，每次循环取出时间将到的trigger，触发对应的job，直到调度器线程被关闭。</li>
</ul>
</li>
</ul>
<h3 id="分布式定时调度"><a href="#分布式定时调度" class="headerlink" title="分布式定时调度"></a>分布式定时调度</h3><ul>
<li><p><a href="https://blog.csdn.net/qq_16216221/article/details/70314337" target="_blank" rel="external">《这些优秀的国产分布式任务调度系统，你用过几个？》</a></p>
<ul>
<li>opencron、LTS、XXL-JOB、Elastic-Job、Uncode-Schedule、Antares</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/zhenyuyaodidiao/p/4755649.html" target="_blank" rel="external">《Quartz任务调度的基本实现原理》</a></p>
<ul>
<li>Quartz集群中，独立的Quartz节点并不与另一其的节点或是管理节点通信，而是通过相同的数据库表来感知到另一Quartz应用的</li>
</ul>
</li>
</ul>
<h2 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h2><ul>
<li><p><a href="https://blog.csdn.net/top_code/article/details/54615853" target="_blank" rel="external">《从零开始实现RPC框架 - RPC原理及实现》</a></p>
<ul>
<li>核心角色：Server: 暴露服务的服务提供方、Client: 调用远程服务的服务消费方、Registry: 服务注册与发现的注册中心。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/testcs_dn/article/details/78050590" target="_blank" rel="external">《分布式RPC框架性能大比拼 dubbo、motan、rpcx、gRPC、thrift的性能比较》</a></p>
</li>
</ul>
<h3 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h3><ul>
<li><a href="http://dubbo.apache.org/" target="_blank" rel="external">官方网站</a></li>
<li><a href="https://www.cnblogs.com/steven520213/p/7606598.html" target="_blank" rel="external">dubbo实现原理简单介绍</a></li>
</ul>
<p><strong> SPI </strong><br>TODO</p>
<h3 id="Thrift"><a href="#Thrift" class="headerlink" title="Thrift"></a>Thrift</h3><ul>
<li><a href="http://thrift.apache.org/" target="_blank" rel="external">官方网站</a></li>
<li><a href="https://blog.csdn.net/kesonyk/article/details/50924489" target="_blank" rel="external">《Thrift RPC详解》</a><ul>
<li>支持多语言，通过中间语言定义接口。</li>
</ul>
</li>
</ul>
<h3 id="gRPC"><a href="#gRPC" class="headerlink" title="gRPC"></a>gRPC</h3><p>服务端可以认证加密，在外网环境下，可以保证数据安全。</p>
<ul>
<li><a href="https://grpc.io/" target="_blank" rel="external">官方网站</a></li>
<li><a href="https://www.cnblogs.com/LBSer/p/4853234.html" target="_blank" rel="external">《你应该知道的RPC原理》</a></li>
</ul>
<h2 id="数据库中间件"><a href="#数据库中间件" class="headerlink" title="数据库中间件"></a>数据库中间件</h2><h3 id="Sharding-Jdbc"><a href="#Sharding-Jdbc" class="headerlink" title="Sharding Jdbc"></a>Sharding Jdbc</h3><ul>
<li><a href="http://shardingjdbc.io/" target="_blank" rel="external">官网</a></li>
</ul>
<h2 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h2><h3 id="日志搜集"><a href="#日志搜集" class="headerlink" title="日志搜集"></a>日志搜集</h3><ul>
<li><a href="http://cjting.me/misc/build-log-system-with-elkb/" target="_blank" rel="external">《从零开始搭建一个ELKB日志收集系统》</a></li>
<li><a href="https://blog.csdn.net/lzw_2006/article/details/51280058" target="_blank" rel="external">《用ELK搭建简单的日志收集分析系统》</a></li>
<li><a href="https://www.cnblogs.com/beginmind/p/6058194.html" target="_blank" rel="external">《日志收集系统-探究》</a></li>
</ul>
<h2 id="配置中心"><a href="#配置中心" class="headerlink" title="配置中心"></a>配置中心</h2><ul>
<li><p><a href="https://github.com/ctripcorp/apollo" target="_blank" rel="external">Apollo - 携程开源的配置中心应用</a></p>
<ul>
<li>Spring Boot 和 Spring Cloud</li>
<li>支持推、拉模式更新配置</li>
<li>支持多种语言</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/u011320740/article/details/78742625" target="_blank" rel="external">《基于zookeeper实现统一配置管理》</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/shamo89/p/8016908.html" target="_blank" rel="external">《 Spring Cloud Config 分布式配置中心使用教程》</a></p>
</li>
</ul>
<p>servlet 3.0 异步特性可用于配置中心的客户端</p>
<ul>
<li><a href="https://www.cnblogs.com/dogdogwang/p/7151866.html" target="_blank" rel="external">《servlet3.0 新特性——异步处理》</a></li>
</ul>
<h2 id="API-网关"><a href="#API-网关" class="headerlink" title="API 网关"></a>API 网关</h2><p>主要职责：请求转发、安全认证、协议转换、容灾。</p>
<ul>
<li><a href="http://yunlzheng.github.io/2017/03/14/the-things-about-api-gateway/" target="_blank" rel="external">《API网关那些儿》</a></li>
<li><p><a href="http://www.infoq.com/cn/news/2016/07/API-background-architecture-floo" target="_blank" rel="external">《谈API网关的背景、架构以及落地方案》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/zhanglh046/article/details/78651993" target="_blank" rel="external">《使用Zuul构建API Gateway》</a></p>
</li>
<li><a href="https://mp.weixin.qq.com/s/LIq2CiXJQmmjBC0yvYLY5A" target="_blank" rel="external">《HTTP API网关选择之一Kong介绍》</a></li>
</ul>
<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><h3 id="OSI-七层协议"><a href="#OSI-七层协议" class="headerlink" title="OSI 七层协议"></a>OSI 七层协议</h3><ul>
<li><a href="https://www.cnblogs.com/Robin-YB/p/6668762.html" target="_blank" rel="external">《OSI七层协议模型、TCP/IP四层模型学习笔记》</a></li>
</ul>
<h3 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h3><ul>
<li><a href="https://www.cnblogs.com/onepixel/p/7092302.html" target="_blank" rel="external">《深入浅出 TCP/IP 协议》</a></li>
<li><a href="https://blog.csdn.net/whuslei/article/details/6667471/" target="_blank" rel="external">《TCP协议中的三次握手和四次挥手》</a></li>
</ul>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><ul>
<li><a href="https://www.cnblogs.com/wangning528/p/6388464.html" target="_blank" rel="external">《http协议详解(超详细)》</a></li>
</ul>
<h3 id="HTTP2-0"><a href="#HTTP2-0" class="headerlink" title="HTTP2.0"></a>HTTP2.0</h3><ul>
<li><a href="https://blog.csdn.net/zhuyiquan/article/details/69257126" target="_blank" rel="external">《HTTP 2.0 原理详细分析》</a></li>
<li><a href="https://blog.csdn.net/u012657197/article/details/77877840" target="_blank" rel="external">《HTTP2.0的基本单位为二进制帧》</a><ul>
<li>利用二进制帧负责传输。</li>
<li>多路复用。</li>
</ul>
</li>
</ul>
<h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><ul>
<li><p><a href="https://www.cnblogs.com/zhangshitong/p/6478721.html" target="_blank" rel="external">《https原理通俗了解》</a></p>
<ul>
<li>使用非对称加密协商加密算法</li>
<li>使用对称加密方式传输数据</li>
<li>使用第三方机构签发的证书，来加密公钥，用于公钥的安全传输、防止被中间人串改。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/enweitech/article/details/53213862" target="_blank" rel="external">《八大免费SSL证书-给你的网站免费添加Https安全加密》</a></p>
</li>
</ul>
<h2 id="网络模型"><a href="#网络模型" class="headerlink" title="网络模型"></a>网络模型</h2><ul>
<li><p><a href="http://blog.51cto.com/litaotao/1289790" target="_blank" rel="external">《web优化必须了解的原理之I/o的五种模型和web的三种工作模式》</a></p>
<ul>
<li>五种I/O模型：阻塞I/O，非阻塞I/O，I/O复用、事件(信号)驱动I/O、异步I/O，前四种I/O属于同步操作，I/O的第一阶段不同、第二阶段相同，最后的一种则属于异步操作。</li>
<li>三种 Web Server 工作方式：Prefork(多进程)、Worker方式(线程方式)、Event方式。</li>
</ul>
</li>
<li><p><a href="http://www.cnblogs.com/Anker/p/3265058.html" target="_blank" rel="external">《select、poll、epoll之间的区别总结》</a></p>
<ul>
<li>select，poll，epoll本质上都是同步I/O，因为他们都需要在读写事件就绪后自己负责进行读写，也就是说这个读写过程是阻塞的。</li>
<li>select 有打开文件描述符数量限制，默认1024（2048 for x64），100万并发，就要用1000个进程、切换开销大；poll采用链表结构，没有数量限制。</li>
<li>select，poll “醒着”的时候要遍历整个fd集合，而epoll在“醒着”的时候只要判断一下就绪链表是否为空就行了，通过回调机制节省大量CPU时间；select，poll每次调用都要把fd集合从用户态往内核态拷贝一次，而epoll只要一次拷贝。</li>
<li>poll会随着并发增加，性能逐渐下降，epoll采用红黑树结构，性能稳定，不会随着连接数增加而降低。</li>
</ul>
</li>
<li><p><a href="http://xingyunbaijunwei.blog.163.com/blog/static/76538067201241685556302/" target="_blank" rel="external">《select，poll，epoll比较  》</a></p>
<ul>
<li>在连接数少并且连接都十分活跃的情况下，select和poll的性能可能比epoll好，毕竟epoll的通知机制需要很多函数回调。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/geason/p/5774096.html" target="_blank" rel="external">《深入理解Java NIO》</a></p>
<ul>
<li>NIO 是一种同步非阻塞的 IO 模型。同步是指线程不断轮询 IO 事件是否就绪，非阻塞是指线程在等待 IO 的时候，可以同时做其他任务</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/skiof007/article/details/52873421" target="_blank" rel="external">《BIO与NIO、AIO的区别》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/u013074465/article/details/46276967" target="_blank" rel="external">《两种高效的服务器设计模型：Reactor和Proactor模型》</a></p>
</li>
</ul>
<h3 id="Epoll"><a href="#Epoll" class="headerlink" title="Epoll"></a>Epoll</h3><ul>
<li><a href="https://www.cnblogs.com/fnlingnzb-learner/p/5835573.html" target="_blank" rel="external">《epoll使用详解（精髓）》</a></li>
</ul>
<h3 id="Java-NIO"><a href="#Java-NIO" class="headerlink" title="Java NIO"></a>Java NIO</h3><ul>
<li><a href="https://www.cnblogs.com/geason/p/5774096.html" target="_blank" rel="external">《深入理解Java NIO》</a></li>
<li><a href="https://blog.csdn.net/xidianliuy/article/details/51612676" target="_blank" rel="external">《Java NIO编写Socket服务器的一个例子》</a></li>
</ul>
<h3 id="kqueue"><a href="#kqueue" class="headerlink" title="kqueue"></a>kqueue</h3><ul>
<li><a href="http://www.cnblogs.com/luminocean/p/5631336.html" target="_blank" rel="external">《kqueue用法简介》</a></li>
</ul>
<h2 id="连接和短连接"><a href="#连接和短连接" class="headerlink" title="连接和短连接"></a>连接和短连接</h2><ul>
<li><a href="https://www.cnblogs.com/pangguoping/p/5571422.html" target="_blank" rel="external">《TCP/IP系列——长连接与短连接的区别》</a></li>
</ul>
<h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><ul>
<li><a href="https://blog.csdn.net/excellentyuxiao/article/details/53390408" target="_blank" rel="external">《Netty原理剖析》</a><ul>
<li>Reactor 模式介绍。</li>
<li>Netty 是 Reactor 模式的一种实现。</li>
</ul>
</li>
</ul>
<h2 id="零拷贝（Zero-copy）"><a href="#零拷贝（Zero-copy）" class="headerlink" title="零拷贝（Zero-copy）"></a>零拷贝（Zero-copy）</h2><ul>
<li><a href="https://www.cnblogs.com/xys1228/p/6088805.html" target="_blank" rel="external">《对于 Netty ByteBuf 的零拷贝(Zero Copy) 的理解》</a><ul>
<li>多个物理分离的buffer，通过逻辑上合并成为一个，从而避免了数据在内存之间的拷贝。</li>
</ul>
</li>
</ul>
<h2 id="序列化-二进制协议"><a href="#序列化-二进制协议" class="headerlink" title="序列化(二进制协议)"></a>序列化(二进制协议)</h2><h3 id="Hessian"><a href="#Hessian" class="headerlink" title="Hessian"></a>Hessian</h3><ul>
<li><a href="https://www.cnblogs.com/happyday56/p/4268249.html" target="_blank" rel="external">《Hessian原理分析》</a><br>Binary-RPC;不仅仅是序列化</li>
</ul>
<h3 id="Protobuf"><a href="#Protobuf" class="headerlink" title="Protobuf"></a>Protobuf</h3><ul>
<li><a href="https://blog.csdn.net/antgan/article/details/52103966" target="_blank" rel="external">《Protobuf协议的Java应用例子》</a><br>Goolge出品、占用空间和效率完胜其他序列化类库，如Hessian；需要编写  .proto 文件。</li>
<li><p><a href="https://worktile.com/tech/share/prototol-buffers" target="_blank" rel="external">《Protocol Buffers序列化协议及应用》</a></p>
<pre><code>* 关于协议的解释；缺点：可读性差;
</code></pre></li>
<li><p><a href="https://blog.csdn.net/eric520zenobia/article/details/53766571" target="_blank" rel="external">《简单的使用 protobuf 和 protostuff》</a></p>
<ul>
<li>protostuff 的好处是不用写 .proto 文件，Java 对象直接就可以序列化。</li>
</ul>
</li>
</ul>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="基础理论"><a href="#基础理论" class="headerlink" title="基础理论"></a>基础理论</h2><h3 id="数据库设计的三大范式"><a href="#数据库设计的三大范式" class="headerlink" title="数据库设计的三大范式"></a>数据库设计的三大范式</h3><ul>
<li><a href="https://www.cnblogs.com/waj6511988/p/7027127.html" target="_blank" rel="external">《数据库的三大范式以及五大约束》</a><ul>
<li>第一范式：数据表中的每一列（每个字段）必须是不可拆分的最小单元，也就是确保每一列的原子性；</li>
<li>第二范式（2NF）：满足1NF后，要求表中的所有列，都必须依赖于主键，而不能有任何一列与主键没有关系，也就是说一个表只描述一件事情；</li>
<li>第三范式：必须先满足第二范式（2NF），要求：表中的每一列只与主键直接相关而不是间接相关，（表中的每一列只能依赖于主键）；</li>
</ul>
</li>
</ul>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ul>
<li><p><a href="http://www.admin10000.com/document/5372.html" target="_blank" rel="external">《MySQL的InnoDB索引原理详解》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/xifeijian/article/details/20316775" target="_blank" rel="external">《MySQL存储引擎－－MyISAM与InnoDB区别》</a></p>
<ul>
<li>两种类型最主要的差别就是Innodb 支持事务处理与外键和行级锁</li>
</ul>
</li>
<li><p><a href="https://www.2cto.com/database/201211/172380.html" target="_blank" rel="external">《myisam和innodb索引实现的不同》</a></p>
</li>
</ul>
<h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><ul>
<li><a href="https://my.oschina.net/kailuncen/blog/1504217" target="_blank" rel="external">《一篇文章带你读懂Mysql和InnoDB》</a></li>
</ul>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><ul>
<li><p><a href="http://vdisk.weibo.com/s/muWOT" target="_blank" rel="external">《MySQL36条军规》</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/zhouyusheng/p/8038224.html" target="_blank" rel="external">《MYSQL性能优化的最佳20+条经验》</a></p>
</li>
<li><a href="https://blog.csdn.net/when_less_is_more/article/details/70187459" target="_blank" rel="external">《SQL优化之道》</a></li>
<li><a href="https://www.cnblogs.com/sivkun/p/7518540.html" target="_blank" rel="external">《mysql数据库死锁的产生原因及解决办法》</a></li>
<li><a href="https://blog.csdn.net/monkey_d_feilong/article/details/52291556" target="_blank" rel="external">《导致索引失效的可能情况》</a></li>
<li><a href="https://blog.csdn.net/zy_281870667/article/details/51604540" target="_blank" rel="external">《 MYSQL分页limit速度太慢优化方法》</a><ul>
<li>原则上就是缩小扫描范围。</li>
</ul>
</li>
</ul>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><h4 id="聚集索引-非聚集索引"><a href="#聚集索引-非聚集索引" class="headerlink" title="聚集索引, 非聚集索引"></a>聚集索引, 非聚集索引</h4><ul>
<li><a href="https://blog.csdn.net/no_endless/article/details/77073549" target="_blank" rel="external">《MySQL 聚集索引/非聚集索引简述》</a></li>
<li><a href="https://www.cnblogs.com/zlcxbb/p/5757245.html" target="_blank" rel="external">《MyISAM和InnoDB的索引实现》</a></li>
</ul>
<p>MyISAM 是非聚集，InnoDB 是聚集</p>
<h4 id="复合索引"><a href="#复合索引" class="headerlink" title="复合索引"></a>复合索引</h4><ul>
<li><a href="https://www.cnblogs.com/summer0space/p/7247778.html" target="_blank" rel="external">《复合索引的优点和注意事项》</a></li>
</ul>
<h4 id="自适应哈希索引-AHI"><a href="#自适应哈希索引-AHI" class="headerlink" title="自适应哈希索引(AHI)"></a>自适应哈希索引(AHI)</h4><ul>
<li><a href="https://blog.csdn.net/Linux_ever/article/details/62043708" target="_blank" rel="external">《InnoDB存储引擎——自适应哈希索引》</a></li>
</ul>
<h3 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h3><ul>
<li><a href="https://segmentfault.com/a/1190000008131735" target="_blank" rel="external">《MySQL 性能优化神器 Explain 使用分析》</a></li>
</ul>
<h2 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h2><h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><ul>
<li><a href="http://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="external">MongoDB 教程</a></li>
<li><a href="http://mxdxm.iteye.com/blog/2093603" target="_blank" rel="external">《Mongodb相对于关系型数据库的优缺点》</a><ul>
<li>优点：弱一致性（最终一致），更能保证用户的访问速度；内置GridFS，支持大容量的存储；Schema-less 数据库，不用预先定义结构；内置Sharding；相比于其他NoSQL，第三方支持丰富；性能优越；</li>
<li>缺点：mongodb不支持事务操作；mongodb占用空间过大；MongoDB没有如MySQL那样成熟的维护工具，这对于开发和IT运营都是个值得注意的地方；</li>
</ul>
</li>
</ul>
<h3 id="Hbase"><a href="#Hbase" class="headerlink" title="Hbase"></a>Hbase</h3><ul>
<li><a href="http://www.thebigdata.cn/HBase/35831.html" target="_blank" rel="external">《简明 HBase 入门教程（开篇）》</a></li>
<li><a href="https://www.cnblogs.com/qiaoyihang/p/6246424.html" target="_blank" rel="external">《深入学习HBase架构原理》</a></li>
<li><a href="https://blog.csdn.net/youzhouliu/article/details/67632882" target="_blank" rel="external">《传统的行存储和（HBase）列存储的区别》</a></li>
</ul>
<ul>
<li><p><a href="https://blog.csdn.net/lifuxiangcaohui/article/details/39891099" target="_blank" rel="external">《Hbase与传统数据库的区别》</a></p>
<ul>
<li>空数据不存储，节省空间，且适用于并发。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/u014091123/article/details/73163088" target="_blank" rel="external">《HBase Rowkey设计》</a></p>
<ul>
<li>rowkey 按照字典顺序排列，便于批量扫描。</li>
<li>通过散列可以避免热点。</li>
</ul>
</li>
</ul>
<h1 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h1><h2 id="搜索引擎原理"><a href="#搜索引擎原理" class="headerlink" title="搜索引擎原理"></a>搜索引擎原理</h2><ul>
<li><a href="https://www.jianshu.com/p/0193dc44135b" target="_blank" rel="external">《倒排索引–搜索引擎入门》</a></li>
</ul>
<h2 id="Lucene"><a href="#Lucene" class="headerlink" title="Lucene"></a>Lucene</h2><ul>
<li><a href="https://www.cnblogs.com/rodge-run/p/6551152.html" target="_blank" rel="external">《Lucene入门简介》</a></li>
</ul>
<h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><ul>
<li><a href="https://blog.csdn.net/laoyang360/article/details/52244917" target="_blank" rel="external">《Elasticsearch学习，请先看这一篇！》</a></li>
<li><a href="https://blog.csdn.net/cyony/article/details/65437708" target="_blank" rel="external">《Elasticsearch索引原理》</a></li>
</ul>
<h2 id="Solr"><a href="#Solr" class="headerlink" title="Solr"></a>Solr</h2><ul>
<li><a href="https://blog.csdn.net/u011936655/article/details/51960005" target="_blank" rel="external">《 Apache Solr入门教程》</a></li>
<li><a href="https://blog.csdn.net/convict_eva/article/details/53537837" target="_blank" rel="external">《elasticsearch与solr比较》</a></li>
</ul>
<h2 id="sphinx"><a href="#sphinx" class="headerlink" title="sphinx"></a>sphinx</h2><ul>
<li><a href="http://blog.jobbole.com/101672/" target="_blank" rel="external">《Sphinx 的介绍和原理探索》</a></li>
</ul>
<h1 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h1><h2 id="性能优化方法论"><a href="#性能优化方法论" class="headerlink" title="性能优化方法论"></a>性能优化方法论</h2><ul>
<li><p><a href="https://blog.csdn.net/huangwenyi1010/article/details/72673447?ref=myread" target="_blank" rel="external">《15天的性能优化工作，5方面的调优经验》</a></p>
<ul>
<li>代码层面、业务层面、数据库层面、服务器层面、前端优化。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/tenglizhe/article/details/44563135" target="_blank" rel="external">《系统性能优化的几个方面》</a></p>
</li>
</ul>
<h2 id="容量评估"><a href="#容量评估" class="headerlink" title="容量评估"></a>容量评估</h2><ul>
<li><a href="https://blog.csdn.net/u012528360/article/details/70054156" target="_blank" rel="external">《联网性能与容量评估的方法论和典型案例》</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959542&amp;idx=1&amp;sn=2494bbea9a855e0e1c3ccd6d2562a600&amp;scene=21#wechat_redirect" target="_blank" rel="external">《互联网架构，如何进行容量设计？》</a><ul>
<li>评估总访问量、评估平均访问量QPS、评估高峰QPS、评估系统、单机极限QPS</li>
</ul>
</li>
</ul>
<h2 id="CDN-网络"><a href="#CDN-网络" class="headerlink" title="CDN 网络"></a>CDN 网络</h2><ul>
<li><a href="https://www.cnblogs.com/wxiaona/p/5867685.html" target="_blank" rel="external">《CDN加速原理》</a></li>
<li><a href="https://www.zhihu.com/question/20536932" target="_blank" rel="external">《国内有哪些比较好的 CDN？》</a></li>
</ul>
<h2 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h2><ul>
<li><a href="https://blog.csdn.net/fysuccess/article/details/66972554" target="_blank" rel="external">《主流Java数据库连接池比较与开发配置实战》</a></li>
</ul>
<h2 id="性能调优"><a href="#性能调优" class="headerlink" title="性能调优"></a>性能调优</h2><ul>
<li><a href="https://blog.csdn.net/yethyeth/article/details/73266455" target="_blank" rel="external">《九大Java性能调试工具，必备至少一款》</a></li>
</ul>
<h1 id="大数据"><a href="#大数据" class="headerlink" title="大数据"></a>大数据</h1><h2 id="流式计算"><a href="#流式计算" class="headerlink" title="流式计算"></a>流式计算</h2><h3 id="Storm"><a href="#Storm" class="headerlink" title="Storm"></a>Storm</h3><ul>
<li><a href="http://storm.apache.org/" target="_blank" rel="external">官方网站</a></li>
<li><a href="https://blog.csdn.net/uisoul/article/details/77989927" target="_blank" rel="external">《最详细的Storm入门教程》</a></li>
</ul>
<h3 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h3><ul>
<li><a href="https://blog.csdn.net/lisi1129/article/details/54844919" target="_blank" rel="external">《Flink之一 Flink基本原理介绍》</a></li>
</ul>
<h3 id="Kafka-Stream"><a href="#Kafka-Stream" class="headerlink" title="Kafka Stream"></a>Kafka Stream</h3><ul>
<li><a href="https://yq.aliyun.com/articles/58382" target="_blank" rel="external">《Kafka Stream调研：一种轻量级流计算模式》</a></li>
</ul>
<h3 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h3><p>例如：</p>
<ul>
<li>广告相关实时统计；</li>
<li>推荐系统用户画像标签实时更新；</li>
<li>线上服务健康状况实时监测；</li>
<li>实时榜单；</li>
<li>实时数据统计。</li>
</ul>
<h2 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h2><ul>
<li><a href="https://blog.csdn.net/houbin0912/article/details/72967178" target="_blank" rel="external">《用通俗易懂的话说下hadoop是什么,能做什么》</a></li>
<li><a href="http://gitbook.cn/books/5954c9600326c7705af8a92a/index.html" target="_blank" rel="external">《史上最详细的Hadoop环境搭建》</a></li>
</ul>
<h3 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h3><ul>
<li><a href="https://segmentfault.com/a/1190000011575458" target="_blank" rel="external">《【Hadoop学习】HDFS基本原理》</a></li>
</ul>
<h3 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h3><ul>
<li><a href="https://blog.csdn.net/oppo62258801/article/details/72884633" target="_blank" rel="external">《用通俗易懂的大白话讲解Map/Reduce原理》</a></li>
<li><a href="https://blog.csdn.net/foye12/article/details/78358292" target="_blank" rel="external">《 简单的map-reduce的java例子》</a></li>
</ul>
<h3 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h3><ul>
<li><a href="http://www.cnblogs.com/codeOfLife/p/5492740.html" target="_blank" rel="external">《初步掌握Yarn的架构及原理》</a></li>
</ul>
<h2 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h2><ul>
<li><a href="http://www.cnblogs.com/tgzhu/p/5818374.html" target="_blank" rel="external">《Spark(一): 基本架构及原理》</a></li>
</ul>
<h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><h2 id="web-安全"><a href="#web-安全" class="headerlink" title="web 安全"></a>web 安全</h2><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><ul>
<li><a href="https://blog.csdn.net/qq_21956483/article/details/54377947" target="_blank" rel="external">《xss攻击原理与解决方法》</a><h3 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h3></li>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/641-web-an-quan-fang-fan/6412-csrf.html" target="_blank" rel="external">《CSRF原理及防范》</a></li>
</ul>
<h3 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h3><ul>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/641-web-an-quan-fang-fan/6413-sql-zhu-ru.html" target="_blank" rel="external">《SQL注入》</a></li>
</ul>
<h3 id="Hash-Dos"><a href="#Hash-Dos" class="headerlink" title="Hash Dos"></a>Hash Dos</h3><ul>
<li><a href="http://www.freebuf.com/articles/web/14199.html" target="_blank" rel="external">《邪恶的JAVA HASH DOS攻击》</a><ul>
<li>利用JsonObjet 上传大Json，JsonObject 底层使用HashMap；不同的数据产生相同的hash值，使得构建Hash速度变慢，耗尽CPU。</li>
</ul>
</li>
<li><a href="https://yq.aliyun.com/articles/92194?t=t1" target="_blank" rel="external">《一种高级的DoS攻击-Hash碰撞攻击》</a></li>
<li><a href="http://www.iteye.com/news/23939/" target="_blank" rel="external">《关于Hash Collision DoS漏洞：解析与解决方案》</a></li>
</ul>
<h3 id="脚本注入"><a href="#脚本注入" class="headerlink" title="脚本注入"></a>脚本注入</h3><ul>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/641-web-an-quan-fang-fan/6414-shang-chuan-wen-jian-guo-lv.html" target="_blank" rel="external">《上传文件漏洞原理及防范》</a></li>
</ul>
<h3 id="漏洞扫描工具"><a href="#漏洞扫描工具" class="headerlink" title="漏洞扫描工具"></a>漏洞扫描工具</h3><ul>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/6421-dvwa.html" target="_blank" rel="external">《DVWA》</a></li>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/w3af.html" target="_blank" rel="external">W3af</a></li>
<li><a href="https://blog.csdn.net/xygg0801/article/details/53610640" target="_blank" rel="external">OpenVAS详解</a></li>
</ul>
<h3 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h3><ul>
<li><p><a href="https://blog.csdn.net/niaonao/article/details/51112686" target="_blank" rel="external">《验证码原理分析及实现》</a></p>
</li>
<li><p><a href="https://my.oschina.net/jiangbianwanghai/blog/1031031" target="_blank" rel="external">《详解滑动验证码的实现原理》</a></p>
<ul>
<li>滑动验证码是根据人在滑动滑块的响应时间，拖拽速度，时间，位置，轨迹，重试次数等来评估风险。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/xcj26/p/5242758.html" target="_blank" rel="external">《淘宝滑动验证码研究》</a></p>
</li>
</ul>
<h2 id="DDoS-防范"><a href="#DDoS-防范" class="headerlink" title="DDoS 防范"></a>DDoS 防范</h2><ul>
<li><a href="http://netsecurity.51cto.com/art/201601/503799.htm" target="_blank" rel="external">《学习手册：DDoS的攻击方式及防御手段》</a></li>
<li><a href="http://netsecurity.51cto.com/art/201406/442756.htm" target="_blank" rel="external">《免费DDoS攻击测试工具大合集》</a></li>
</ul>
<h2 id="用户隐私信息保护"><a href="#用户隐私信息保护" class="headerlink" title="用户隐私信息保护"></a>用户隐私信息保护</h2><ol>
<li>用户密码非明文保存，加动态slat。</li>
<li>身份证号，手机号如果要显示，用 “*” 替代部分字符。</li>
<li>联系方式在的显示与否由用户自己控制。</li>
<li>TODO</li>
</ol>
<ul>
<li><a href="https://zhidao.baidu.com/question/1988017976673661587.html" target="_blank" rel="external">《个人隐私包括哪些》</a></li>
<li><p><a href="https://www.zhihu.com/question/20137108" target="_blank" rel="external">《在互联网上，隐私的范围包括哪些？》</a></p>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/642-shu-ju-jia-mi/6425-jia-mi-chang-jing-ff1a-yong-hu-mi-ma-bao-cun.html" target="_blank" rel="external">《用户密码保存》</a></p>
</li>
</ul>
<h2 id="序列化漏洞"><a href="#序列化漏洞" class="headerlink" title="序列化漏洞"></a>序列化漏洞</h2><ul>
<li><a href="https://blog.chaitin.cn/2015-11-11_java_unserialize_rce/" target="_blank" rel="external">《Lib之过？Java反序列化漏洞通用利用分析》</a></li>
</ul>
<h2 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h2><h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><ul>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/642-shu-ju-jia-mi/6421-chang-jian-dui-cheng-jia-mi-suan-fa.html" target="_blank" rel="external">《常见对称加密算法》</a><ul>
<li>DES、3DES、Blowfish、AES</li>
<li>DES 采用 56位秘钥，Blowfish 采用1到448位变长秘钥，AES 128，192和256位长度的秘钥。</li>
<li>DES 秘钥太短（只有56位）算法目前已经被 AES 取代，并且 AES 有硬件加速，性能很好。</li>
</ul>
</li>
</ul>
<h3 id="哈希算法"><a href="#哈希算法" class="headerlink" title="哈希算法"></a>哈希算法</h3><ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/642-shu-ju-jia-mi/6422-chang-jian-ha-xi-suan-fa-and-hmac.html" target="_blank" rel="external">《常用的哈希算法》</a></p>
<ul>
<li>MD5 和 SHA-1 已经不再安全，已被弃用。</li>
<li>目前 SHA-256 是比较安全的。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/zhangruhong168/article/details/78033202" target="_blank" rel="external">《基于Hash摘要签名的公网URL签名验证设计方案》</a></p>
</li>
</ul>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/642-shu-ju-jia-mi/6424-chang-yong-fei-dui-cheng-jia-mi-suan-fa.html" target="_blank" rel="external">《常见非对称加密算法》</a></p>
<ul>
<li>RSA、DSA、ECDSA(螺旋曲线加密算法)</li>
<li>和 RSA 不同的是 DSA 仅能用于数字签名，不能进行数据加密解密，其安全性和RSA相当，但其性能要比RSA快。</li>
<li><p>256位的ECC秘钥的安全性等同于3072位的RSA秘钥。</p>
<p>  <a href="http://baijiahao.baidu.com/s?id=1578348858092033763&amp;wfr=spider&amp;for=pc" target="_blank" rel="external">《区块链的加密技术》</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="服务器安全"><a href="#服务器安全" class="headerlink" title="服务器安全"></a>服务器安全</h2><ul>
<li><a href="http://www.freebuf.com/articles/system/121540.html" target="_blank" rel="external">《Linux强化论：15步打造一个安全的Linux服务器》</a></li>
</ul>
<h2 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h2><h3 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h3><p>TODO</p>
<h2 id="网络隔离"><a href="#网络隔离" class="headerlink" title="网络隔离"></a>网络隔离</h2><h3 id="内外网分离"><a href="#内外网分离" class="headerlink" title="内外网分离"></a>内外网分离</h3><p>TODO</p>
<h3 id="登录跳板机"><a href="#登录跳板机" class="headerlink" title="登录跳板机"></a>登录跳板机</h3><p>在内外环境中通过跳板机登录到线上主机。</p>
<ul>
<li><a href="http://blog.51cto.com/zero01/2062618" target="_blank" rel="external">《搭建简易堡垒机》</a></li>
</ul>
<h2 id="授权、认证"><a href="#授权、认证" class="headerlink" title="授权、认证"></a>授权、认证</h2><h3 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h3><ul>
<li><a href="https://www.cnblogs.com/zq8024/p/5003050.html" target="_blank" rel="external">《基于组织角色的权限设计》</a></li>
<li><a href="https://www.cnblogs.com/shijiaqi1066/p/3793894.html" target="_blank" rel="external">《权限系统与RBAC模型概述》</a></li>
<li><a href="https://blog.csdn.net/he90227/article/details/38663553" target="_blank" rel="external">《Spring整合Shiro做权限控制模块详细案例分析》</a></li>
</ul>
<h3 id="OAuth2-0"><a href="#OAuth2-0" class="headerlink" title="OAuth2.0"></a>OAuth2.0</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="external">《理解OAuth 2.0》</a></li>
</ul>
<h3 id="双因素认证（2FA）"><a href="#双因素认证（2FA）" class="headerlink" title="双因素认证（2FA）"></a>双因素认证（2FA）</h3><p>2FA - Two-factor authentication，用于加强登录验证</p>
<p>常用做法是 登录密码 + 手机验证码（或者令牌Key，类似于与网银的 USB key）</p>
<ul>
<li>【《双因素认证（2FA）教程》】(<a href="http://www.ruanyifeng.com/blog/2017/11/2fa-tutorial.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2017/11/2fa-tutorial.html</a>)</li>
</ul>
<h3 id="单点登录-SSO"><a href="#单点登录-SSO" class="headerlink" title="单点登录(SSO)"></a>单点登录(SSO)</h3><ul>
<li><p><a href="https://www.cnblogs.com/ywlaker/p/6113927.html" target="_blank" rel="external">《单点登录原理与简单实现》</a></p>
</li>
<li><p><a href="https://github.com/apereo/cas" target="_blank" rel="external">CAS单点登录框架</a></p>
</li>
</ul>
<h1 id="常用开源框架"><a href="#常用开源框架" class="headerlink" title="常用开源框架"></a>常用开源框架</h1><h2 id="开源协议"><a href="#开源协议" class="headerlink" title="开源协议"></a>开源协议</h2><ul>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/chapter1/di-yi-zhang-ff1a-zhun-bei-qi-cheng/12-guan-yu-kai-yuan/123-kai-yuan-xie-yi-de-xuan-ze.html" target="_blank" rel="external">《开源协议的选择》</a></p>
</li>
<li><p><a href="http://choosealicense.online/" target="_blank" rel="external">如何选择一个开源软件协议</a></p>
</li>
</ul>
<h2 id="日志框架"><a href="#日志框架" class="headerlink" title="日志框架"></a>日志框架</h2><h3 id="Log4j、Log4j2"><a href="#Log4j、Log4j2" class="headerlink" title="Log4j、Log4j2"></a>Log4j、Log4j2</h3><ul>
<li><a href="https://blog.csdn.net/u012422446/article/details/51199724" target="_blank" rel="external">《log4j 详细讲解》</a></li>
<li><a href="https://blog.csdn.net/vbirdbest/article/details/71751835" target="_blank" rel="external">《log4j2 实际使用详解》</a></li>
<li><a href="https://my.oschina.net/OutOfMemory/blog/789267" target="_blank" rel="external">《Log4j1,Logback以及Log4j2性能测试对比》</a><ul>
<li>Log4J 异步日志性能优异。</li>
</ul>
</li>
</ul>
<h3 id="Logback"><a href="#Logback" class="headerlink" title="Logback"></a>Logback</h3><ul>
<li><a href="https://blog.csdn.net/rulon147/article/details/52620541" target="_blank" rel="external">《最全LogBack 详解、含java案例和配置说明》</a></li>
</ul>
<h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><ul>
<li><a href="https://blog.csdn.net/sinat_34093604/article/details/53082000" target="_blank" rel="external">《ORM框架使用优缺点》</a><ul>
<li>主要目的是为了提高开发效率。</li>
</ul>
</li>
</ul>
<p><strong>MyBatis：</strong></p>
<ul>
<li><p><a href="https://www.cnblogs.com/winclpt/articles/7511672.html" target="_blank" rel="external">《mybatis缓存机制详解》</a></p>
<ul>
<li>一级缓存是SqlSession级别的缓存，缓存的数据只在SqlSession内有效</li>
<li>二级缓存是mapper级别的缓存，同一个namespace公用这一个缓存，所以对SqlSession是共享的；使用 LRU 机制清理缓存，通过 cacheEnabled 参数开启。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/baidu_32877851/article/details/53959268" target="_blank" rel="external">《MyBatis学习之代码生成器Generator》</a></p>
</li>
</ul>
<h2 id="网络框架"><a href="#网络框架" class="headerlink" title="网络框架"></a>网络框架</h2><p>TODO</p>
<h2 id="Web-框架"><a href="#Web-框架" class="headerlink" title="Web 框架"></a>Web 框架</h2><h3 id="Spring-家族"><a href="#Spring-家族" class="headerlink" title="Spring 家族"></a>Spring 家族</h3><p><strong>Spring</strong></p>
<ul>
<li><a href="https://www.w3cschool.cn/wkspring/" target="_blank" rel="external">Spring 简明教程</a></li>
</ul>
<p><strong>Spring Boot</strong></p>
<ul>
<li><a href="http://projects.spring.io/spring-boot/" target="_blank" rel="external">官方网站</a></li>
<li><a href="http://blog.didispace.com/Spring-Boot%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" target="_blank" rel="external">《Spring Boot基础教程》</a></li>
</ul>
<p><strong>Spring Cloud</strong></p>
<ul>
<li><a href="http://springboot.fun/" target="_blank" rel="external">Spring Boot 中文索引站</a></li>
<li><a href="https://springcloud.cc/" target="_blank" rel="external">Spring Cloud 中文文档</a></li>
<li><a href="http://blog.didispace.com/Spring-Cloud%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" target="_blank" rel="external">《Spring Cloud基础教程》</a></li>
</ul>
<h2 id="工具框架"><a href="#工具框架" class="headerlink" title="工具框架"></a>工具框架</h2><ul>
<li><a href="https://www.cnblogs.com/crazylqy/p/4872236.html" target="_blank" rel="external">《Apache Commons 工具类介绍及简单使用》</a></li>
<li><a href="http://ifeve.com/google-guava/" target="_blank" rel="external">《Google guava 中文教程》</a></li>
</ul>
<h1 id="分布式设计"><a href="#分布式设计" class="headerlink" title="分布式设计"></a>分布式设计</h1><h2 id="扩展性设计"><a href="#扩展性设计" class="headerlink" title="扩展性设计"></a>扩展性设计</h2><ul>
<li><p><a href="https://blog.csdn.net/hemin1003/article/details/53633926" target="_blank" rel="external">《架构师不可不知的十大可扩展架构》</a></p>
<ul>
<li>总结下来，通用的套路就是分布、缓存及异步处理。</li>
</ul>
</li>
<li><p><a href="https://yq.aliyun.com/articles/38119" target="_blank" rel="external">《可扩展性设计之数据切分》</a></p>
<ul>
<li>水平切分+垂直切分</li>
<li>利用中间件进行分片如，MySQL Proxy。</li>
<li>利用分片策略进行切分，如按照ID取模。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/deniro_li/article/details/78458306" target="_blank" rel="external">《说说如何实现可扩展性的大型网站架构》</a></p>
<ul>
<li>分布式服务+消息队列。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/chaofanwei/article/details/29191073" target="_blank" rel="external">《大型网站技术架构（七）–网站的可扩展性架构》</a></p>
</li>
</ul>
<h2 id="稳定性-amp-高可用"><a href="#稳定性-amp-高可用" class="headerlink" title="稳定性 &amp; 高可用"></a>稳定性 &amp; 高可用</h2><ul>
<li><a href="https://blog.csdn.net/hustspy1990/article/details/78008324" target="_blank" rel="external">《系统设计：关于高可用系统的一些技术方案》</a><ul>
<li>可扩展：水平扩展、垂直扩展。 通过冗余部署，避免单点故障。</li>
<li>隔离：避免单一业务占用全部资源。避免业务之间的相互影响 2. 机房隔离避免单点故障。</li>
<li>解耦：降低维护成本，降低耦合风险。减少依赖，减少相互间的影响。</li>
<li>限流：滑动窗口计数法、漏桶算法、令牌桶算法等算法。遇到突发流量时，保证系统稳定。</li>
<li>降级：紧急情况下释放非核心功能的资源。牺牲非核心业务，保证核心业务的高可用。</li>
<li>熔断：异常情况超出阈值进入熔断状态，快速失败。减少不稳定的外部依赖对核心服务的影响。</li>
<li>自动化测试：通过完善的测试，减少发布引起的故障。</li>
<li>灰度发布：灰度发布是速度与安全性作为妥协，能够有效减少发布故障。</li>
</ul>
</li>
</ul>
<ul>
<li><a href="https://coolshell.cn/articles/17459.html" target="_blank" rel="external">《关于高可用的系统》</a><ul>
<li>设计原则：数据不丢(持久化)；服务高可用(服务副本)；绝对的100%高可用很难，目标是做到尽可能多的9，如99.999%（全年累计只有5分钟）。</li>
</ul>
</li>
</ul>
<h3 id="硬件负载均衡"><a href="#硬件负载均衡" class="headerlink" title="硬件负载均衡"></a>硬件负载均衡</h3><ul>
<li><p><a href="https://www.cnblogs.com/wuyun-blog/p/6186198.html" target="_blank" rel="external">《转！！负载均衡器技术Nginx和F5的优缺点对比》</a></p>
<ul>
<li>主要是和F5对比。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/lcword/p/5773296.html" target="_blank" rel="external">《软/硬件负载均衡产品 你知多少？》</a></p>
</li>
</ul>
<h3 id="软件负载均衡"><a href="#软件负载均衡" class="headerlink" title="软件负载均衡"></a>软件负载均衡</h3><ul>
<li><a href="https://www.cnblogs.com/tianzhiliang/articles/2317808.html" target="_blank" rel="external">《几种负载均衡算法》</a><br>  轮寻、权重、负载、最少连接、QoS</li>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/611-dns-fang-shi.html" target="_blank" rel="external">《DNS负载均衡》</a><ul>
<li>配置简单，更新速度慢。</li>
</ul>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/613-nginx-fu-zai-jun-heng.html" target="_blank" rel="external">《Nginx负载均衡》</a></p>
<ul>
<li>简单轻量、学习成本低；主要适用于web应用。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/edisonchou/p/4281978.html" target="_blank" rel="external">《借助LVS+Keepalived实现负载均衡 》</a></p>
<ul>
<li>配置比较负载、只支持到4层，性能较高。</li>
</ul>
</li>
<li><p><a href="http://www.ttlsa.com/linux/haproxy-study-tutorial/" target="_blank" rel="external">《HAProxy用法详解 全网最详细中文文档》</a></p>
<ul>
<li>支持到七层（比如HTTP）、功能比较全面，性能也不错。</li>
</ul>
</li>
<li><p><a href="http://blog.itpub.net/25704976/viewspace-1319781/" target="_blank" rel="external">《Haproxy+Keepalived+MySQL实现读均衡负载》</a></p>
<ul>
<li>主要是用户读请求的负载均衡。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/lylife/p/5584019.html" target="_blank" rel="external">《rabbitmq+haproxy+keepalived实现高可用集群搭建》</a></p>
</li>
</ul>
<h3 id="限流"><a href="#限流" class="headerlink" title="限流"></a>限流</h3><ul>
<li><a href="https://www.cnblogs.com/haoxinyue/p/6792309.html" target="_blank" rel="external">《谈谈高并发系统的限流》</a><ul>
<li>计数器：通过滑动窗口计数器，控制单位时间内的请求次数，简单粗暴。</li>
<li>漏桶算法：固定容量的漏桶，漏桶满了就丢弃请求，比较常用。</li>
<li>令牌桶算法：固定容量的令牌桶，按照一定速率添加令牌，处理请求前需要拿到令牌，拿不到令牌则丢弃请求，或进入丢队列，可以通过控制添加令牌的速率，来控制整体速度。Guava 中的 RateLimiter 是令牌桶的实现。</li>
<li>Nginx 限流：通过 <code>limit_req</code> 等模块限制并发连接数。</li>
</ul>
</li>
</ul>
<h3 id="应用层容灾"><a href="#应用层容灾" class="headerlink" title="应用层容灾"></a>应用层容灾</h3><ul>
<li><p><a href="https://segmentfault.com/a/1190000005988895" target="_blank" rel="external">《防雪崩利器：熔断器 Hystrix 的原理与使用》</a></p>
<ul>
<li>雪崩效应原因：硬件故障、硬件故障、程序Bug、重试加大流量、用户大量请求。</li>
<li>雪崩的对策：限流、改进缓存模式(缓存预加载、同步调用改异步)、自动扩容、降级。</li>
<li>Hystrix设计原则：<ul>
<li>资源隔离：Hystrix通过将每个依赖服务分配独立的线程池进行资源隔离, 从而避免服务雪崩。</li>
<li>熔断开关：服务的健康状况 = 请求失败数 / 请求总数，通过阈值设定和滑动窗口控制开关。</li>
<li>命令模式：通过继承 HystrixCommand 来包装服务调用逻辑。</li>
</ul>
</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/zeb_perfect/article/details/54135506" target="_blank" rel="external">《缓存穿透，缓存击穿，缓存雪崩解决方案分析》</a></p>
</li>
<li><a href="https://blog.csdn.net/zeb_perfect/article/details/54135506" target="_blank" rel="external">《缓存击穿、失效以及热点key问题》</a><ul>
<li>主要策略：失效瞬间：单机使用锁；使用分布式锁；不过期；</li>
<li>热点数据：热点数据单独存储；使用本地缓存；分成多个子key；</li>
</ul>
</li>
</ul>
<h3 id="跨机房容灾"><a href="#跨机房容灾" class="headerlink" title="跨机房容灾"></a>跨机房容灾</h3><ul>
<li><p><a href="http://dc.idcquan.com/ywgl/71559.shtml" target="_blank" rel="external">《“异地多活”多机房部署经验谈》</a></p>
<ul>
<li>通过自研中间件进行数据同步。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/jeffreynicole/article/details/48135093" target="_blank" rel="external">《异地多活（异地双活）实践经验》</a></p>
<ul>
<li>注意延迟问题，多次跨机房调用会将延时放大数倍。</li>
<li>建房间专线很大概率会出现问题，做好运维和程序层面的容错。</li>
<li>不能依赖于程序端数据双写，要有自动同步方案。</li>
<li>数据永不在高延迟和较差网络质量下，考虑同步质量问题。</li>
<li>核心业务和次要业务分而治之，甚至只考虑核心业务。</li>
<li>异地多活监控部署、测试也要跟上。</li>
<li>业务允许的情况下考虑用户分区，尤其是游戏、邮箱业务。</li>
<li>控制跨机房消息体大小，越小越好。</li>
<li>考虑使用docker容器虚拟化技术，提高动态调度能力。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/yoara/article/details/38013751" target="_blank" rel="external">容灾技术及建设经验介绍</a></p>
</li>
</ul>
<h3 id="容灾演练流程"><a href="#容灾演练流程" class="headerlink" title="容灾演练流程"></a>容灾演练流程</h3><ul>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2650996320&amp;idx=1&amp;sn=0ed3be190bbee4a9277886ef88cbb2e5" target="_blank" rel="external">《依赖治理、灰度发布、故障演练，阿里电商故障演练系统的设计与实战经验》</a><ul>
<li>常见故障画像</li>
<li>案例：预案有效性、预案有效性、故障复现、架构容灾测试、参数调优、参数调优、故障突袭、联合演练。</li>
</ul>
</li>
</ul>
<h3 id="平滑启动"><a href="#平滑启动" class="headerlink" title="平滑启动"></a>平滑启动</h3><ul>
<li><p>平滑重启应用思路<br>1.端流量（如vip层）、2. flush 数据(如果有)、3, 重启应用</p>
</li>
<li><p><a href="https://blog.csdn.net/u011001084/article/details/73480432" target="_blank" rel="external">《JVM安全退出（如何优雅的关闭java服务）》</a><br>推荐推出方式：System.exit，Kill SIGTERM；不推荐 kill-9；用 Runtime.addShutdownHook 注册钩子。</p>
</li>
<li><a href="http://ju.outofmemory.cn/entry/337235" target="_blank" rel="external">《常见Java应用如何优雅关闭》</a><br>Java、Srping、Dubbo 优雅关闭方式。</li>
</ul>
<h2 id="数据库扩展"><a href="#数据库扩展" class="headerlink" title="数据库扩展"></a>数据库扩展</h2><h3 id="读写分离模式"><a href="#读写分离模式" class="headerlink" title="读写分离模式"></a>读写分离模式</h3><ul>
<li><a href="https://www.cnblogs.com/houdj/p/6563771.html" target="_blank" rel="external">《Mysql主从方案的实现》</a></li>
<li><a href="https://www.cnblogs.com/edisonchou/p/4133148.html" target="_blank" rel="external">《搭建MySQL主从复制经典架构》</a></li>
<li><p><a href="https://blog.csdn.net/nimasike/article/details/48048341" target="_blank" rel="external">《Haproxy+多台MySQL从服务器(Slave) 实现负载均衡》</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/zhangsubai/p/6801764.html" target="_blank" rel="external">《DRBD+Heartbeat+Mysql高可用读写分离架构》</a></p>
<ul>
<li>DRDB 进行磁盘复制，避免单点问题。</li>
</ul>
</li>
<li><p><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/62-ke-kuo-zhan-de-shu-ju-ku-jia-gou/621-gao-ke-yong-mysql-de-ji-zhong-fang-an/6214-mysql-cluster-fang-an.html" target="_blank" rel="external">《MySQL Cluster 方式》</a></p>
</li>
</ul>
<h3 id="分片模式"><a href="#分片模式" class="headerlink" title="分片模式"></a>分片模式</h3><ul>
<li><p><a href="https://www.jianshu.com/p/32b3e91aa22c" target="_blank" rel="external">《分库分表需要考虑的问题及方案》</a></p>
<ul>
<li>中间件： 轻量级：sharding-jdbc、TSharding；重量级：Atlas、MyCAT、Vitess等。</li>
<li>问题：事务、Join、迁移、扩容、ID、分页等。</li>
<li>事务补偿：对数据进行对帐检查;基于日志进行比对;定期同标准数据来源进行同步等。</li>
<li>分库策略：数值范围；取模；日期等。</li>
<li>分库数量：通常 MySQL 单库 5千万条、Oracle 单库一亿条需要分库。</li>
</ul>
</li>
<li><p><a href="https://www.2cto.com/database/201503/380348.html" target="_blank" rel="external">《MySql分表和表分区详解》</a></p>
<ul>
<li>分区：是MySQL内部机制，对客户端透明，数据存储在不同文件中，表面上看是同一个表。</li>
<li>分表：物理上创建不同的表、客户端需要管理分表路由。</li>
</ul>
</li>
</ul>
<h2 id="服务治理"><a href="#服务治理" class="headerlink" title="服务治理"></a>服务治理</h2><h3 id="服务注册与发现"><a href="#服务注册与发现" class="headerlink" title="服务注册与发现"></a>服务注册与发现</h3><ul>
<li><a href="https://blog.csdn.net/jiaolongdy/article/details/51188798" target="_blank" rel="external">《永不失联！如何实现微服务架构中的服务发现？》</a><ul>
<li>客户端服务发现模式：客户端直接查询注册表，同时自己负责负载均衡。Eureka 采用这种方式。</li>
<li>服务器端服务发现模式：客户端通过负载均衡查询服务实例。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/u010963948/article/details/71730165" target="_blank" rel="external">《SpringCloud服务注册中心比较:Consul vs Zookeeper vs Etcd vs Eureka》</a></p>
<ul>
<li>CAP支持：Consul（CA）、zookeeper（cp）、etcd（cp） 、euerka（ap）</li>
<li>作者认为目前 Consul 对 Spring cloud 的支持比较好。</li>
</ul>
</li>
<li><p><a href="http://mobile.51cto.com/news-502394.htm" target="_blank" rel="external">《基于Zookeeper的服务注册与发现》</a></p>
<ul>
<li>优点：API简单、Pinterest，Airbnb 在用、多语言、通过watcher机制来实现配置PUSH，能快速响应配置变化。</li>
</ul>
</li>
</ul>
<h3 id="服务路由控制"><a href="#服务路由控制" class="headerlink" title="服务路由控制"></a>服务路由控制</h3><ul>
<li><a href="https://blog.csdn.net/xundh/article/details/59492750" target="_blank" rel="external">《分布式服务框架学习笔记4 服务路由》</a><ul>
<li>原则：透明化路由</li>
<li>负载均衡策略：随机、轮询、服务调用延迟、一致性哈希、粘滞连接</li>
<li>本地路由有限策略：injvm(优先调用jvm内部的服务)，innative(优先使用相同物理机的服务),原则上找距离最近的服务。</li>
<li>配置方式：统一注册表；本地配置；动态下发。</li>
</ul>
</li>
</ul>
<h2 id="分布式一致"><a href="#分布式一致" class="headerlink" title="分布式一致"></a>分布式一致</h2><h3 id="CAP-与-BASE-理论"><a href="#CAP-与-BASE-理论" class="headerlink" title="CAP 与 BASE 理论"></a>CAP 与 BASE 理论</h3><ul>
<li><a href="http://www.cnblogs.com/szlbm/p/5588543.html" target="_blank" rel="external">《从分布式一致性谈到CAP理论、BASE理论》</a><ul>
<li>一致性分类：强一致(立即一致)；弱一致(可在单位时间内实现一致，比如秒级)；最终一致(弱一致的一种，一定时间内最终一致)</li>
<li>CAP：一致性、可用性、分区容错性(网络故障引起)</li>
<li>BASE：Basically Available（基本可用）、Soft state（软状态）和Eventually consistent（最终一致性）</li>
<li>BASE理论的核心思想是：即使无法做到强一致性，但每个应用都可以根据自身业务特点，采用适当的方式来使系统达到最终一致性。</li>
</ul>
</li>
</ul>
<h3 id="分布式锁"><a href="#分布式锁" class="headerlink" title="分布式锁"></a>分布式锁</h3><ul>
<li><a href="http://www.hollischuang.com/archives/1716" target="_blank" rel="external">《分布式锁的几种实现方式》</a><ul>
<li>基于数据库的分布式锁：优点：操作简单、容易理解。缺点：存在单点问题、数据库性能够开销较大、不可重入；</li>
<li>基于缓存的分布式锁：优点：非阻塞、性能好。缺点：操作不好容易造成锁无法释放的情况。</li>
<li>Zookeeper 分布式锁：通过有序临时节点实现锁机制，自己对应的节点需要最小，则被认为是获得了锁。优点：集群可以透明解决单点问题，避免锁不被释放问题，同时锁可以重入。缺点：性能不如缓存方式，吞吐量会随着zk集群规模变大而下降。</li>
</ul>
</li>
<li><p><a href="https://www.tuicool.com/articles/VZJr6fY" target="_blank" rel="external">《基于Zookeeper的分布式锁》</a></p>
<ul>
<li>清楚的原理描述 + Java 代码示例。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/0201zcr/p/5942748.html" target="_blank" rel="external">《jedisLock—redis分布式锁实现》</a></p>
<ul>
<li>基于 setnx(set if ont exists)，有则返回false，否则返回true。并支持过期时间。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/albertfly/article/details/77412333" target="_blank" rel="external">《Memcached 和 Redis 分布式锁方案》</a></p>
<ul>
<li>利用 memcached 的 add（有别于set）操作，当key存在时，返回false。</li>
</ul>
</li>
</ul>
<h3 id="分布式一致性算法"><a href="#分布式一致性算法" class="headerlink" title="分布式一致性算法"></a>分布式一致性算法</h3><h4 id="PAXOS"><a href="#PAXOS" class="headerlink" title="PAXOS"></a>PAXOS</h4><ul>
<li><a href="https://www.cnblogs.com/linbingdong/p/6253479.html" target="_blank" rel="external">《分布式系列文章——Paxos算法原理与推导》</a></li>
<li><a href="https://blog.csdn.net/u010039929/article/details/70171672" target="_blank" rel="external">《Paxos–&gt;Fast Paxos–&gt;Zookeeper分析》</a></li>
<li><a href="https://www.cnblogs.com/leesf456/p/6012777.html" target="_blank" rel="external">《【分布式】Zookeeper与Paxos》</a></li>
</ul>
<h4 id="Zab"><a href="#Zab" class="headerlink" title="Zab"></a>Zab</h4><ul>
<li><a href="https://www.jianshu.com/p/fb527a64deee" target="_blank" rel="external">《Zab：Zookeeper 中的分布式一致性协议介绍》</a></li>
</ul>
<h4 id="Raft"><a href="#Raft" class="headerlink" title="Raft"></a>Raft</h4><ul>
<li><a href="http://www.cnblogs.com/mindwind/p/5231986.html" target="_blank" rel="external">《Raft 为什么是更易理解的分布式一致性算法》</a><ul>
<li>三种角色：Leader（领袖）、Follower（群众）、Candidate（候选人）</li>
<li>通过随机等待的方式发出投票，得票多的获胜。</li>
</ul>
</li>
</ul>
<h4 id="Gossip"><a href="#Gossip" class="headerlink" title="Gossip"></a>Gossip</h4><ul>
<li><a href="http://blog.51cto.com/tianya23/530743" target="_blank" rel="external">《Gossip算法》</a></li>
</ul>
<h4 id="两阶段提交、多阶段提交"><a href="#两阶段提交、多阶段提交" class="headerlink" title="两阶段提交、多阶段提交"></a>两阶段提交、多阶段提交</h4><ul>
<li><a href="http://blog.jobbole.com/95632/" target="_blank" rel="external">《关于分布式事务、两阶段提交协议、三阶提交协议》</a></li>
</ul>
<h3 id="幂等"><a href="#幂等" class="headerlink" title="幂等"></a>幂等</h3><ul>
<li><a href="https://www.cnblogs.com/wxgblogs/p/6639272.html" target="_blank" rel="external">《分布式系统—幂等性设计》</a><ul>
<li>幂等特性的作用：该资源具备幂等性，请求方无需担心重复调用会产生错误。</li>
<li>常见保证幂等的手段：MVCC（类似于乐观锁）、去重表(唯一索引)、悲观锁、一次性token、序列号方式。</li>
</ul>
</li>
</ul>
<h3 id="分布式一致方案"><a href="#分布式一致方案" class="headerlink" title="分布式一致方案"></a>分布式一致方案</h3><ul>
<li><a href="http://www.infoq.com/cn/articles/solution-of-distributed-system-transaction-consistency" target="_blank" rel="external">《分布式系统事务一致性解决方案》</a></li>
<li><a href="https://weibo.com/ttarticle/p/show?id=2309403965965003062676" target="_blank" rel="external">《保证分布式系统数据一致性的6种方案》</a></li>
</ul>
<h3 id="分布式-Leader-节点选举"><a href="#分布式-Leader-节点选举" class="headerlink" title="分布式 Leader 节点选举"></a>分布式 Leader 节点选举</h3><ul>
<li><a href="https://blog.csdn.net/johnson_moon/article/details/78809995" target="_blank" rel="external">《利用zookeeper实现分布式leader节点选举》</a></li>
</ul>
<h3 id="TCC-Try-Confirm-Cancel-柔性事务"><a href="#TCC-Try-Confirm-Cancel-柔性事务" class="headerlink" title="TCC(Try/Confirm/Cancel) 柔性事务"></a>TCC(Try/Confirm/Cancel) 柔性事务</h3><ul>
<li><a href="https://www.jianshu.com/p/ab1a1c6b08a1" target="_blank" rel="external">《传统事务与柔性事务》</a><ul>
<li>基于BASE理论：基本可用、柔性状态、最终一致。</li>
<li>解决方案：记录日志+补偿（正向补充或者回滚）、消息重试(要求程序要幂等)；“无锁设计”、采用乐观锁机制。</li>
</ul>
</li>
</ul>
<h2 id="分布式文件系统"><a href="#分布式文件系统" class="headerlink" title="分布式文件系统"></a>分布式文件系统</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/27666295" target="_blank" rel="external">说说分布式文件存储系统-基本架构</a> ？</li>
<li><a href="https://blog.csdn.net/gatieme/article/details/44982961" target="_blank" rel="external">《各种分布式文件系统的比较》</a> ？<ul>
<li>HDFS：大批量数据读写，用于高吞吐量的场景，不适合小文件。</li>
<li>FastDFS：轻量级、适合小文件。</li>
</ul>
</li>
</ul>
<h2 id="唯一ID-生成"><a href="#唯一ID-生成" class="headerlink" title="唯一ID 生成"></a>唯一ID 生成</h2><h3 id="全局唯一ID"><a href="#全局唯一ID" class="headerlink" title="全局唯一ID"></a>全局唯一ID</h3><ul>
<li><p><a href="https://www.cnblogs.com/baiwa/p/5318432.html" target="_blank" rel="external">《高并发分布式系统中生成全局唯一Id汇总》</a></p>
<ul>
<li>Twitter 方案（Snowflake 算法）：41位时间戳+10位机器标识（比如IP，服务器名称等）+12位序列号(本地计数器)</li>
<li>Flicker 方案：MySQL自增ID + “REPLACE INTO XXX:SELECT LAST_INSERT_ID();”</li>
<li>UUID：缺点，无序，字符串过长，占用空间，影响检索性能。</li>
<li>MongoDB 方案：利用 ObjectId。缺点：不能自增。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/hdu09075340/article/details/79103851" target="_blank" rel="external">《TDDL 在分布式下的SEQUENCE原理》</a></p>
<ul>
<li>在数据库中创建 sequence 表，用于记录，当前已被占用的id最大值。</li>
<li>每台客户端主机取一个id区间（比如 1000~2000）缓存在本地，并更新 sequence 表中的id最大值记录。</li>
<li>客户端主机之间取不同的id区间，用完再取，使用乐观锁机制控制并发。</li>
</ul>
</li>
</ul>
<h2 id="一致性Hash算法"><a href="#一致性Hash算法" class="headerlink" title="一致性Hash算法"></a>一致性Hash算法</h2><ul>
<li><a href="https://coderxing.gitbooks.io/architecture-evolution/di-san-pian-ff1a-bu-luo/631-yi-zhi-xing-ha-xi.html" target="_blank" rel="external">《一致性哈希算法》</a></li>
</ul>
<h1 id="设计思想-amp-开发模式"><a href="#设计思想-amp-开发模式" class="headerlink" title="设计思想 &amp; 开发模式"></a>设计思想 &amp; 开发模式</h1><h2 id="DDD-Domain-driven-Design-领域驱动设计"><a href="#DDD-Domain-driven-Design-领域驱动设计" class="headerlink" title="DDD(Domain-driven Design - 领域驱动设计)"></a>DDD(Domain-driven Design - 领域驱动设计)</h2><ul>
<li><p><a href="https://www.cnblogs.com/netfocus/p/5548025.html" target="_blank" rel="external">《浅谈我对DDD领域驱动设计的理解》</a></p>
<ul>
<li>概念：DDD 主要对传统软件开发流程(分析-设计-编码)中各阶段的割裂问题而提出，避免由于一开始分析不明或在软件开发过程中的信息流转不一致而造成软件无法交付（和需求方设想不一致）的问题。DDD 强调一切以领域（Domain）为中心，强调领域专家（Domain Expert）的作用，强调先定义好领域模型之后在进行开发，并且领域模型可以指导开发（所谓的驱动）。</li>
<li>过程：理解领域、拆分领域、细化领域，模型的准确性取决于模型的理解深度。</li>
<li>设计：DDD 中提出了建模工具，比如聚合、实体、值对象、工厂、仓储、领域服务、领域事件来帮助领域建模。</li>
</ul>
</li>
<li><p><a href="https://www.cnblogs.com/butterfly100/p/7827870.html" target="_blank" rel="external">《领域驱动设计的基础知识总结》</a></p>
<ul>
<li>领域（Doamin）本质上就是问题域，比如一个电商系统，一个论坛系统等。</li>
<li>界限上下文（Bounded Context）：阐述子域之间的关系，可以简单理解成一个子系统或组件模块。</li>
<li>领域模型（Domain Model）：DDD的核心是建立（用通用描述语言、工具—领域通用语言）正确的领域模型；反应业务需求的本质，包括实体和过程；其贯穿软件分析、设计、开发 的整个过程；常用表达领域模型的方式：图、代码或文字；</li>
<li>领域通用语言：领域专家、开发设计人员都能立即的语言或工具。</li>
<li>经典分层架构：用户界面/展示层、应用层、领域层、基础设施层，是四层架构模式。</li>
<li>使用的模式：<ul>
<li>关联尽量少，尽量单项，尽量降低整体复杂度。</li>
<li>实体（Entity）：领域中的唯一标示，一个实体的属性尽量少，少则清晰。</li>
<li>值对象（Value Object）：没有唯一标识，且属性值不可变，小二简单的对象，比如Date。</li>
<li>领域服务（Domain Service）： 协调多个领域对象，只有方法没有状态(不存数据)；可以分为应用层服务，领域层服务、基础层服务。</li>
<li>聚合及聚合根（Aggregate，Aggregate Root）：聚合定义了一组具有内聚关系的相关对象的集合；聚合根是对聚合引用的唯一元素；当修改一个聚合时，必须在事务级别；大部分领域模型中，有70%的聚合通常只有一个实体，30%只有2~3个实体；如果一个聚合只有一个实体，那么这个实体就是聚合根；如果有多个实体，那么我们可以思考聚合内哪个对象有独立存在的意义并且可以和外部直接进行交互；</li>
<li>工厂（Factory）：类似于设计模式中的工厂模式。</li>
<li>仓储（Repository）：持久化到DB，管理对象，且只对聚合设计仓储。</li>
</ul>
</li>
</ul>
</li>
<li><p><a href="http://www.cnblogs.com/Leo_wl/p/3866629.html" target="_blank" rel="external">《领域驱动设计(DDD)实现之路》</a></p>
<ul>
<li>聚合：比如一辆汽车（Car）包含了引擎（Engine）、车轮（Wheel）和油箱（Tank）等组件，缺一不可。</li>
</ul>
</li>
<li><p><a href="http://www.hollischuang.com/archives/553" target="_blank" rel="external">《领域驱动设计系列（2）浅析VO、DTO、DO、PO的概念、区别和用处》</a></p>
</li>
</ul>
<h3 id="命令查询职责分离-CQRS"><a href="#命令查询职责分离-CQRS" class="headerlink" title="命令查询职责分离(CQRS)"></a>命令查询职责分离(CQRS)</h3><p>CQRS — Command Query Responsibility Seperation</p>
<ul>
<li><p><a href="https://www.cnblogs.com/cnblogsfans/p/4551990.html" target="_blank" rel="external">《领域驱动设计系列 (六)：CQRS》</a></p>
<ul>
<li>核心思想：读写分离（查询和更新在不同的方法中），不同的流程只是不同的设计方式，CQ代码分离，分布式环境中会有明显体现（有冗余数据的情况下），目的是为了高性能。</li>
</ul>
</li>
<li><p><a href="http://www.techweb.com.cn/network/system/2017-07-07/2553563.shtml" target="_blank" rel="external">《DDD CQRS架构和传统架构的优缺点比较》</a></p>
<ul>
<li>最终一致的设计理念；依赖于高可用消息中间件。</li>
</ul>
</li>
<li><p><a href="http://www.cnblogs.com/netfocus/p/4055346.html" target="_blank" rel="external">《CQRS架构简介》</a></p>
<ul>
<li>一个实现 CQRS 的抽象案例。</li>
</ul>
</li>
<li><p><a href="http://www.uml.org.cn/zjjs/201609221.asp" target="_blank" rel="external">《深度长文：我对CQRS/EventSourcing架构的思考》</a></p>
<ul>
<li>CQRS 模式分析 + 12306 抢票案例</li>
</ul>
</li>
</ul>
<h3 id="贫血，充血模型"><a href="#贫血，充血模型" class="headerlink" title="贫血，充血模型"></a>贫血，充血模型</h3><ul>
<li><a href="https://kb.cnblogs.com/page/520743/" target="_blank" rel="external">《贫血，充血模型的解释以及一些经验》</a><ul>
<li>失血模型：老子和儿子分别定义，相互不知道，二者实体定义中完全没有业务逻辑，通过外部Service进行关联。</li>
<li>贫血模型：老子知道儿子，儿子也知道老子；部分业务逻辑放到实体中；优点：各层单项依赖，结构清楚，易于维护；缺点：不符合OO思想，相比于充血模式，Service层较为厚重；</li>
<li>充血模型：和贫血模型类似，区别在于如何划分业务逻辑。优点：Service层比较薄，只充当Facade的角色，不和DAO打交道、复合OO思想；缺点：非单项依赖，DO和DAO之间双向依赖、和Service层的逻辑划分容易造成混乱。</li>
<li>肿胀模式：是一种极端情况，取消Service层、全部业务逻辑放在DO中；优点：符合OO思想、简化了分层；缺点：暴露信息过多、很多非DO逻辑也会强行并入DO。这种模式应该避免。</li>
<li>作者主张使用贫血模式。</li>
</ul>
</li>
</ul>
<h2 id="Actor-模式"><a href="#Actor-模式" class="headerlink" title="Actor 模式"></a>Actor 模式</h2><p>TODO</p>
<h2 id="响应式编程"><a href="#响应式编程" class="headerlink" title="响应式编程"></a>响应式编程</h2><h3 id="Reactor"><a href="#Reactor" class="headerlink" title="Reactor"></a>Reactor</h3><p>TODO</p>
<h3 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h3><p>TODO</p>
<h3 id="Vert-x"><a href="#Vert-x" class="headerlink" title="Vert.x"></a>Vert.x</h3><p>TODO</p>
<h2 id="DODAF2-0"><a href="#DODAF2-0" class="headerlink" title="DODAF2.0"></a>DODAF2.0</h2><ul>
<li><a href="http://www.360doc.com/content/16/0627/19/33945750_571201779.shtml" target="_blank" rel="external">《DODAF2.0方法论》</a></li>
<li><a href="http://blog.51cto.com/xiaoyong/1553164" target="_blank" rel="external">《DODAF2.0之能力视角如何落地》</a></li>
</ul>
<h2 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h2><p>TODO</p>
<h2 id="Service-Mesh"><a href="#Service-Mesh" class="headerlink" title="Service Mesh"></a>Service Mesh</h2><p>TODO</p>
<ul>
<li><a href="https://time.geekbang.org/article/2355" target="_blank" rel="external">《什么是Service Mesh？》</a></li>
</ul>
<h1 id="项目管理"><a href="#项目管理" class="headerlink" title="项目管理"></a>项目管理</h1><h2 id="架构评审"><a href="#架构评审" class="headerlink" title="架构评审"></a>架构评审</h2><ul>
<li><a href="http://developer.51cto.com/art/201506/478486.htm" target="_blank" rel="external">《架构设计之如何评审架构设计说明书》</a></li>
<li><a href="https://blog.csdn.net/wireless_com/article/details/45935591" target="_blank" rel="external">《人人都是架构师：非功能性需求》</a></li>
</ul>
<h2 id="重构"><a href="#重构" class="headerlink" title="重构"></a>重构</h2><ul>
<li><a href="http://www.infoq.com/cn/articles/architect-12-rules-complete/" target="_blank" rel="external">《架构之重构的12条军规》</a></li>
</ul>
<h2 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h2><p>TODO</p>
<h2 id="代码-Review"><a href="#代码-Review" class="headerlink" title="代码 Review"></a>代码 Review</h2><p>制度还是制度!<br>另外，每个公司需要根据自己的需求和目标制定自己的 check list</p>
<ul>
<li><p><a href="http://www.sohu.com/a/229745352_181657" target="_blank" rel="external">《为什么你做不好 Code Review？》</a></p>
<ul>
<li>代码 review 做的好，在于制度建设。</li>
</ul>
</li>
<li><p><a href="https://blog.csdn.net/uxyheaven/article/details/49773619" target="_blank" rel="external">《从零开始Code Review》</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/zuoping/p/5477047.html" target="_blank" rel="external">《Code Review Checklist》</a></p>
</li>
<li><p><a href="https://dzone.com/articles/java-code-review-checklist" target="_blank" rel="external">《Java Code Review Checklist》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/legend0011/article/details/45585575" target="_blank" rel="external">《如何用 gitlab 做 code review》</a></p>
</li>
</ul>
<h2 id="RUP"><a href="#RUP" class="headerlink" title="RUP"></a>RUP</h2><ul>
<li><a href="https://blog.csdn.net/apanious/article/details/51011946" target="_blank" rel="external">《运用RUP 4+1视图方法进行软件架构设计》</a></li>
</ul>
<h2 id="看板管理"><a href="#看板管理" class="headerlink" title="看板管理"></a>看板管理</h2><ul>
<li><a href="https://blog.csdn.net/tkchen/article/details/51637643" target="_blank" rel="external">《说说看板在项目中的应用》</a></li>
</ul>
<h2 id="SCRUM"><a href="#SCRUM" class="headerlink" title="SCRUM"></a>SCRUM</h2><p>SCRUM - 争球</p>
<ul>
<li>3个角色:Product Owner(PO) 产品负责人;Scrum Master（SM），推动Scrum执行;Team 开发团队。</li>
<li>3个工件：Product Backlog 产品TODOLIST，含优先级;Sprint Backlog 功能开发 TODO LIST；燃尽图；</li>
<li>五个价值观：专注、勇气、公开、承诺、尊重。</li>
</ul>
<ul>
<li><p><a href="https://blog.csdn.net/inny100_100/article/details/54633757" target="_blank" rel="external">《敏捷项目管理流程-Scrum框架最全总结！》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/superkunkun/article/details/52951142" target="_blank" rel="external">《敏捷其实很简单3—敏捷方法之scrum》</a></p>
</li>
</ul>
<h2 id="敏捷开发"><a href="#敏捷开发" class="headerlink" title="敏捷开发"></a>敏捷开发</h2><p>TODO</p>
<h2 id="极限编程（XP）"><a href="#极限编程（XP）" class="headerlink" title="极限编程（XP）"></a>极限编程（XP）</h2><p>XP - eXtreme Programming</p>
<ul>
<li><p><a href="http://www.woshipm.com/pmd/406917.html" target="_blank" rel="external">《主流敏捷开发方法：极限编程XP》</a></p>
<ul>
<li>是一种指导开发人员的方法论。</li>
<li><p>4大价值：</p>
<ul>
<li>沟通：鼓励口头沟通，提高效率。</li>
<li>简单：够用就好。</li>
<li>反馈：及时反馈、通知相关人。</li>
<li>勇气：提倡拥抱变化，敢于重构。</li>
</ul>
</li>
<li><p>5个原则：快速反馈、简单性假设、逐步修改、提倡更改（小步快跑）、优质工作（保证质量的前提下保证小步快跑）。</p>
</li>
<li>5个工作：阶段性冲刺；冲刺计划会议；每日站立会议；冲刺后review；回顾会议。</li>
</ul>
</li>
</ul>
<h2 id="结对编程"><a href="#结对编程" class="headerlink" title="结对编程"></a>结对编程</h2><p>边写码，边review。能够增强代码质量、减少bug。</p>
<ul>
<li><a href="http://www.baike.com/wiki/%E7%BB%93%E5%AF%B9%E7%BC%96%E7%A8%8B" target="_blank" rel="external">《结对编程》</a></li>
</ul>
<h2 id="FMEA管理模式"><a href="#FMEA管理模式" class="headerlink" title="FMEA管理模式"></a>FMEA管理模式</h2><p>TODO</p>
<h1 id="通用业务术语"><a href="#通用业务术语" class="headerlink" title="通用业务术语"></a>通用业务术语</h1><p>TODO</p>
<h1 id="技术趋势"><a href="#技术趋势" class="headerlink" title="技术趋势"></a>技术趋势</h1><p>TODO</p>
<h1 id="政策、法规"><a href="#政策、法规" class="headerlink" title="政策、法规"></a>政策、法规</h1><p>TODO</p>
<h2 id="法律"><a href="#法律" class="headerlink" title="法律"></a>法律</h2><h3 id="严格遵守刑法253法条"><a href="#严格遵守刑法253法条" class="headerlink" title="严格遵守刑法253法条"></a>严格遵守刑法253法条</h3><p>我国刑法第253条之一规定：</p>
<blockquote>
<ul>
<li>国家机关或者金融、电信、交通、教育、医疗等单位的工作人员，违反国家规定，将本单位在履行职责或者提供服务过程中获得的公民个人信息，出售或者非法提供给他人，情节严重的，处3年以下有期徒刑或者拘役，并处或者单处罚金。</li>
<li>窃取或者以其他方法非法获取上述信息，情节严重的，依照前款的规定处罚。</li>
<li>单位犯前两款罪的，对单位判处罚金，并对其直接负责的主管人员和其他直接责任人员，依照各该款的规定处罚。</li>
</ul>
</blockquote>
<p>最高人民法院、最高人民检察院关于执行《中华人民共和国刑法》确定罪名的补充规定（四）规定：触犯刑法第253条之一第1款之规定，构成“出售、非法提供公民个人信息罪”；触犯刑法第253条之一第2款之规定，构成“非法获取公民个人信息罪”</p>
<ul>
<li><a href="https://baike.baidu.com/item/%E9%9D%9E%E6%B3%95%E8%8E%B7%E5%8F%96%E5%85%AC%E6%B0%91%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E7%BD%AA" target="_blank" rel="external">《非法获取公民个人信息罪》</a></li>
</ul>
<h1 id="架构师素质"><a href="#架构师素质" class="headerlink" title="架构师素质"></a>架构师素质</h1><ul>
<li><p><a href="http://hellojava.info/?p=430" target="_blank" rel="external">《架构师画像》</a></p>
<ul>
<li>业务理解和抽象能力</li>
<li>NB的代码能力</li>
<li>全面：1. 在面对业务问题上，架构师脑海里是否会浮现出多种技术方案；2. 在做系统设计时是否考虑到了足够多的方方面面；3. 在做系统设计时是否考虑到了足够多的方方面面；</li>
<li>全局：是否考虑到了对上下游的系统的影响。</li>
<li>权衡：权衡投入产出比；优先级和节奏控制；</li>
</ul>
</li>
<li><p><a href="http://www.infoq.com/cn/articles/architecture-optimization-and-design-the-architect-must-know" target="_blank" rel="external">《关于架构优化和设计，架构师必须知道的事情》</a></p>
<ul>
<li>要去考虑的细节：模块化、轻耦合、无共享架构；减少各个组件之前的依懒、注意服务之间依懒所有造成的链式失败及影响等。</li>
<li>基础设施、配置、测试、开发、运维综合考虑。</li>
<li>考虑人、团队、和组织的影响。</li>
</ul>
</li>
<li><p><a href="https://www.zhihu.com/question/19841397" target="_blank" rel="external">《如何才能真正的提高自己，成为一名出色的架构师？》</a></p>
</li>
<li><p><a href="https://blog.csdn.net/sanbingyutuoniao123/article/details/54144129" target="_blank" rel="external">《架构师的必备素质和成长途径》</a></p>
<ul>
<li>素质：业务理解、技术广度、技术深度、丰富经验、沟通能力、动手能力、美学素养。</li>
<li>成长路径：2年积累知识、4年积累技能和组内影响力、7年积累部门内影响力、7年以上积累跨部门影响力。</li>
</ul>
</li>
<li><p><a href="http://blog.51cto.com/frankfan/1248401" target="_blank" rel="external">《架构设计师—你在哪层楼？》</a></p>
<ul>
<li>第一层的架构师看到的只是产品本身</li>
<li>第二层的架构师不仅看到自己的产品，还看到了整体的方案</li>
<li>第三层的架构师看到的是商业价值</li>
</ul>
</li>
</ul>
<h1 id="团队管理"><a href="#团队管理" class="headerlink" title="团队管理"></a>团队管理</h1><p>TODO</p>
<h2 id="招聘"><a href="#招聘" class="headerlink" title="招聘"></a>招聘</h2><h1 id="资讯"><a href="#资讯" class="headerlink" title="资讯"></a>资讯</h1><h2 id="行业资讯"><a href="#行业资讯" class="headerlink" title="行业资讯"></a>行业资讯</h2><ul>
<li><a href="http://36kr.com/" target="_blank" rel="external">36kr</a></li>
<li><a href="http://www.techweb.com.cn/" target="_blank" rel="external">Techweb</a></li>
</ul>
<h2 id="公众号列表"><a href="#公众号列表" class="headerlink" title="公众号列表"></a>公众号列表</h2><p>TODO</p>
<h2 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h2><h3 id="团队博客"><a href="#团队博客" class="headerlink" title="团队博客"></a>团队博客</h3><ul>
<li><a href="http://jm.taobao.org/" target="_blank" rel="external">阿里中间件博客</a></li>
<li><a href="https://tech.meituan.com" target="_blank" rel="external">美团点评技术团队博客</a></li>
</ul>
<h3 id="个人博客"><a href="#个人博客" class="headerlink" title="个人博客"></a>个人博客</h3><ul>
<li><a href="http://www.ruanyifeng.com/" target="_blank" rel="external">阮一峰的网络日志</a></li>
<li><a href="https://coolshell.cn/" target="_blank" rel="external">酷壳 - COOLSHELL-陈皓</a></li>
<li><a href="http://hellojava.info/" target="_blank" rel="external">hellojava-阿里毕玄</a></li>
<li><a href="http://cmsblogs.com/" target="_blank" rel="external">Cm’s Blog</a></li>
<li><a href="http://blog.didispace.com/" target="_blank" rel="external">程序猿DD-翟永超-《Spring Cloud微服务实战》作者</a></li>
</ul>
<h2 id="综合门户、社区"><a href="#综合门户、社区" class="headerlink" title="综合门户、社区"></a>综合门户、社区</h2><p><strong>国内：</strong></p>
<ul>
<li><a href="http://csdn.net" target="_blank" rel="external">CSDN</a><br>   老牌技术社区、不必解释。</li>
<li><a href="http://www.51cto.com/" target="_blank" rel="external">51cto.com</a></li>
<li><a href="http://www.iteye.com/" target="_blank" rel="external">ITeye</a><ul>
<li>偏 Java 方向</li>
</ul>
</li>
<li><a href="https://www.cnblogs.com" target="_blank" rel="external">博客园</a></li>
<li><a href="http://www.tom.net/" target="_blank" rel="external">ChinaUnix</a><ul>
<li>偏 Linux 方向</li>
</ul>
</li>
<li><a href="https://www.oschina.net/" target="_blank" rel="external">开源中国社区</a></li>
<li><a href="http://www.open-open.com/" target="_blank" rel="external">深度开源</a></li>
<li><p><a href="http://www.jobbole.com/" target="_blank" rel="external">伯乐在线</a></p>
<ul>
<li>涵盖 IT职场、Web前端、后端、移动端、数据库等方面内容，偏技术端。</li>
</ul>
</li>
<li><p><a href="http://www.itpub.net/" target="_blank" rel="external">ITPUB</a></p>
</li>
<li><a href="https://cloud.tencent.com/developer/column" target="_blank" rel="external">腾讯云— 云+社区</a></li>
<li><a href="https://yq.aliyun.com/" target="_blank" rel="external">阿里云— 云栖社区</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/" target="_blank" rel="external">IBM DeveloperWorks</a></li>
<li><a href="https://toutiao.io/" target="_blank" rel="external">开发者头条</a></li>
<li><a href="http://www.linkedkeeper.com" target="_blank" rel="external">LinkedKeeper</a></li>
</ul>
<p><strong>国外：</strong></p>
<ul>
<li><a href="https://dzone.com" target="_blank" rel="external">DZone</a></li>
<li><a href="https://www.reddit.com" target="_blank" rel="external">Reddit</a></li>
</ul>
<h2 id="问答、讨论类社区"><a href="#问答、讨论类社区" class="headerlink" title="问答、讨论类社区"></a>问答、讨论类社区</h2><ul>
<li><a href="https://segmentfault.com" target="_blank" rel="external">segmentfault</a><ul>
<li>问答+专栏</li>
</ul>
</li>
<li><a href="https://www.zhihu.com/" target="_blank" rel="external">知乎</a></li>
<li><a href="https://stackoverflow.com/" target="_blank" rel="external">stackoverflow</a></li>
</ul>
<h2 id="行业数据分析"><a href="#行业数据分析" class="headerlink" title="行业数据分析"></a>行业数据分析</h2><ul>
<li><a href="http://report.iresearch.cn/" target="_blank" rel="external">艾瑞网</a></li>
<li><p><a href="https://www.questmobile.com.cn" target="_blank" rel="external">QUEST MOBILE</a></p>
</li>
<li><p><a href="http://data.stats.gov.cn/" target="_blank" rel="external">国家数据</a></p>
</li>
</ul>
<h2 id="专项网站"><a href="#专项网站" class="headerlink" title="专项网站"></a>专项网站</h2><ul>
<li><p>测试:</p>
<ul>
<li><a href="http://www.ltesting.net/" target="_blank" rel="external">领测国际</a></li>
<li><a href="https://www.testwo.com/" target="_blank" rel="external">测试窝</a></li>
<li><a href="https://testerhome.com" target="_blank" rel="external">TesterHome</a></li>
</ul>
</li>
<li><p>运维:</p>
<pre><code>* [运维派](http://www.yunweipai.com/)
* [Abcdocker](https://www.abcdocker.com/)
</code></pre></li>
<li><p>Java:</p>
<ul>
<li><a href="http://www.importnew.com/" target="_blank" rel="external">ImportNew</a><ul>
<li>专注于 Java 技术分享</li>
</ul>
</li>
<li><a href="https://howtodoinjava.com/" target="_blank" rel="external">HowToDoInJava</a><ul>
<li>英文博客</li>
</ul>
</li>
</ul>
</li>
<li><p>安全</p>
<ul>
<li><a href="https://www.2cto.com/" target="_blank" rel="external">红黑联盟</a></li>
<li><a href="http://www.freebuf.com/" target="_blank" rel="external">FreeBuf</a></li>
</ul>
</li>
<li><p>大数据</p>
<ul>
<li><a href="http://www.thebigdata.cn/" target="_blank" rel="external">中国大数据</a></li>
</ul>
</li>
<li><p>其他专题网站：</p>
<ul>
<li><a href="http://www.dockerinfo.net/" target="_blank" rel="external">DockerInfo</a><ul>
<li>专注于 Docker 应用及咨询、教程的网站。</li>
</ul>
</li>
<li><a href="https://www.linuxidc.com/" target="_blank" rel="external">Linux公社</a><ul>
<li>Linux 主题社区</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="其他类"><a href="#其他类" class="headerlink" title="其他类"></a>其他类</h2><ul>
<li><a href="https://github.com/TeamStuQ/skill-map" target="_blank" rel="external">程序员技能图谱</a></li>
</ul>
<h2 id="推荐参考书"><a href="#推荐参考书" class="headerlink" title="推荐参考书"></a>推荐参考书</h2><h3 id="在线电子书"><a href="#在线电子书" class="headerlink" title="在线电子书"></a>在线电子书</h3><ul>
<li><a href="https://github.com/forezp/SpringCloudLearning" target="_blank" rel="external">《深入理解Spring Cloud与微服务构建》</a></li>
</ul>
<ul>
<li><a href="http://techforum-img.cn-hangzhou.oss-pub.aliyun-inc.com/1523849261680/AliTech101_RD.pdf" target="_blank" rel="external">《阿里技术参考图册-研发篇》</a></li>
<li><p><a href="http://techforum-img.cn-hangzhou.oss-pub.aliyun-inc.com/1523848064814/AliTech101_Algorithms.pdf" target="_blank" rel="external">《阿里技术参考图册-算法篇》</a></p>
</li>
<li><p><a href="http://dpurl.cn/n/1lqcX" target="_blank" rel="external">《2018美团点评技术年货（合辑）》70M</a></p>
</li>
<li><p><a href="http://www.infoq.com/cn/architect/" target="_blank" rel="external">InfoQ《架构师》月刊</a></p>
</li>
<li><p><a href="https://www.w3cschool.cn/architectroad/" target="_blank" rel="external">《架构师之路》</a></p>
</li>
</ul>
<h3 id="纸质书"><a href="#纸质书" class="headerlink" title="纸质书"></a>纸质书</h3><h4 id="开发方面"><a href="#开发方面" class="headerlink" title="开发方面"></a>开发方面</h4><ul>
<li>《阿里巴巴Java开发手册》<a href="https://union-click.jd.com/jdc?d=bVKwZQ" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=阿里巴巴Java开发手册" target="_blank" rel="external">淘宝</a></li>
</ul>
<h4 id="架构方面"><a href="#架构方面" class="headerlink" title="架构方面"></a>架构方面</h4><ul>
<li>《软件架构师的12项修炼：技术技能篇》<a href="https://union-click.jd.com/jdc?d=gXvRd8" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=软件架构师的12项修炼：技术技能篇" target="_blank" rel="external">淘宝</a></li>
<li>《架构之美》<a href="https://union-click.jd.com/jdc?d=xJit5I" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=架构之美" target="_blank" rel="external">淘宝</a></li>
<li>《分布式服务架构》<a href="https://union-click.jd.com/jdc?d=JS5Od9" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=分布式服务架构" target="_blank" rel="external">淘宝</a></li>
<li>《聊聊架构》 <a href="https://union-click.jd.com/jdc?d=FHooH4" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=聊聊架构" target="_blank" rel="external">淘宝</a></li>
<li>《云原生应用架构实践》<a href="https://union-click.jd.com/jdc?d=orkJSj" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=云原生应用架构实践" target="_blank" rel="external">淘宝</a></li>
<li>《亿级流量网站架构核心技术》<a href="https://union-click.jd.com/jdc?d=RnOSP5" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=亿级流量网站架构核心技术" target="_blank" rel="external">淘宝</a></li>
<li>《淘宝技术这十年》<a href="https://union-click.jd.com/jdc?d=LwrDfD" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=淘宝技术这十年" target="_blank" rel="external">淘宝</a></li>
<li>《企业IT架构转型之道-中台战略思想与架构实战》 <a href="https://union-click.jd.com/jdc?d=89pAEm" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=企业IT架构转型之道" target="_blank" rel="external">淘宝</a></li>
</ul>
<h4 id="技术管理方面"><a href="#技术管理方面" class="headerlink" title="技术管理方面"></a>技术管理方面</h4><ul>
<li>《CTO说》<a href="https://union-click.jd.com/jdc?d=zhTZyr" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=CTO说" target="_blank" rel="external">淘宝</a></li>
<li>《技术管理之巅》<a href="https://union-click.jd.com/jdc?d=LgRBUW" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=技术管理之巅" target="_blank" rel="external">淘宝</a></li>
<li>《网易一千零一夜：互联网产品项目管理实战》<a href="https://union-click.jd.com/jdc?d=jcRz2r" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=网易一千零一夜：互联网产品项目管理实战" target="_blank" rel="external">淘宝</a></li>
</ul>
<h4 id="基础理论-1"><a href="#基础理论-1" class="headerlink" title="基础理论"></a>基础理论</h4><ul>
<li>《数学之美》<a href="https://union-click.jd.com/jdc?d=ghIES2" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=数学之美" target="_blank" rel="external">淘宝</a></li>
<li>《编程珠玑》<a href="https://union-click.jd.com/jdc?d=YmhdEu" target="_blank" rel="external">京东</a> <a href="https://s.taobao.com/search?q=编程珠玑" target="_blank" rel="external">淘宝</a></li>
</ul>
<h4 id="工具方面"><a href="#工具方面" class="headerlink" title="工具方面"></a>工具方面</h4><p>TODO</p>
<h4 id="大数据方面"><a href="#大数据方面" class="headerlink" title="大数据方面"></a>大数据方面</h4><h1 id="技术资源"><a href="#技术资源" class="headerlink" title="技术资源"></a>技术资源</h1><h2 id="开源资源"><a href="#开源资源" class="headerlink" title="开源资源"></a>开源资源</h2><ul>
<li><p><a href="https://github.com" target="_blank" rel="external">github</a></p>
</li>
<li><p><a href="https://www.apache.org/index.html" target="_blank" rel="external">Apache 软件基金会</a></p>
</li>
</ul>
<h2 id="手册、文档、教程"><a href="#手册、文档、教程" class="headerlink" title="手册、文档、教程"></a>手册、文档、教程</h2><p><strong>国内：</strong></p>
<ul>
<li><a href="http://w3cschool.cn" target="_blank" rel="external">W3Cschool</a></li>
<li><p><a href="http://www.runoob.com/" target="_blank" rel="external">Runoob.com</a></p>
<ul>
<li>HTML 、 CSS、XML、Java、Python、PHP、设计模式等入门手册。</li>
</ul>
</li>
<li><p><a href="https://love2.io/" target="_blank" rel="external">Love2.io</a></p>
<ul>
<li>很多很多中文在线电子书，是一个全新的开源技术文档分享平台。</li>
</ul>
</li>
<li><a href="http://gitbook.cn/" target="_blank" rel="external">gitbook.cn</a><ul>
<li>付费电子书。</li>
</ul>
</li>
<li><a href="http://www.apachecn.org/" target="_blank" rel="external">ApacheCN</a><ul>
<li>AI、大数据方面系列中文文档。</li>
</ul>
</li>
</ul>
<p><strong>国外：</strong></p>
<ul>
<li><a href="http://www.quickcode.co/" target="_blank" rel="external">Quick Code</a><ul>
<li>免费在线技术教程。</li>
</ul>
</li>
<li><a href="http://gitbook.com" target="_blank" rel="external">gitbook.com</a><ul>
<li>有部分中文电子书。</li>
</ul>
</li>
<li><a href="https://www.cheatography.com/" target="_blank" rel="external">Cheatography</a><ul>
<li>Cheat Sheets 大全，单页文档网站。</li>
</ul>
</li>
</ul>
<h2 id="在线课堂"><a href="#在线课堂" class="headerlink" title="在线课堂"></a>在线课堂</h2><ul>
<li><a href="http://www.xuetuwuyou.com/" target="_blank" rel="external">学徒无忧</a></li>
<li><a href="https://time.geekbang.org/" target="_blank" rel="external">极客时间</a></li>
<li><a href="https://segmentfault.com/lives" target="_blank" rel="external">segmentfault</a></li>
<li><a href="https://new.stuq.org/course/explore" target="_blank" rel="external">斯达克学院</a></li>
<li><a href="http://nowcoder.com" target="_blank" rel="external">牛客网</a></li>
<li><a href="https://www.jikexueyuan.com/" target="_blank" rel="external">极客学院</a></li>
<li><a href="http://edu.51cto.com/" target="_blank" rel="external">51CTO学院</a></li>
</ul>
<h2 id="会议、活动"><a href="#会议、活动" class="headerlink" title="会议、活动"></a>会议、活动</h2><ul>
<li><a href="http://www.infoq.com/cn/qcon/" target="_blank" rel="external">QCon</a></li>
<li><a href="https://archsummit.com" target="_blank" rel="external">ArchSummit</a></li>
<li><a href="http://www.thegitc.com/" target="_blank" rel="external">GITC全球互联网技术大会</a></li>
</ul>
<p><strong>活动发布平台:</strong></p>
<ul>
<li><a href="http://www.huodongxing.com/" target="_blank" rel="external">活动行</a></li>
</ul>
<h2 id="常用APP"><a href="#常用APP" class="headerlink" title="常用APP"></a>常用APP</h2><ul>
<li><a href="https://time.geekbang.org" target="_blank" rel="external">极客时间</a></li>
<li><a href="https://www.igetget.com" target="_blank" rel="external">得到</a></li>
</ul>
<h2 id="找工作"><a href="#找工作" class="headerlink" title="找工作"></a>找工作</h2><ul>
<li><a href="https://www.zhipin.com" target="_blank" rel="external">Boss直聘</a></li>
<li><a href="https://www.lagou.com" target="_blank" rel="external">拉勾网</a></li>
<li><a href="https://www.liepin.com" target="_blank" rel="external">猎聘</a></li>
<li><a href="https://cn.100offer.com/" target="_blank" rel="external">100Offer</a></li>
</ul>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul>
<li><a href="https://s.geekbang.org/" target="_blank" rel="external">极客搜索</a><ul>
<li>技术文章搜索引擎。</li>
</ul>
</li>
</ul>
<h2 id="代码托管"><a href="#代码托管" class="headerlink" title="代码托管"></a>代码托管</h2><ul>
<li><a href="https://coding.net" target="_blank" rel="external">Coding</a></li>
<li><a href="https://gitee.com/" target="_blank" rel="external">码云</a></li>
</ul>
<h2 id="文件服务"><a href="#文件服务" class="headerlink" title="文件服务"></a>文件服务</h2><ul>
<li>七牛</li>
<li>又拍云</li>
</ul>
<h2 id="综合云服务商"><a href="#综合云服务商" class="headerlink" title="综合云服务商"></a>综合云服务商</h2><ul>
<li>阿里云</li>
<li>腾讯云</li>
<li>百度云</li>
<li>新浪云</li>
<li>金山云</li>
<li><a href="https://amazonaws-china.com/cn/" target="_blank" rel="external">亚马逊云(AWS)</a></li>
<li><a href="https://cloud.google.com/?hl=zh-cn" target="_blank" rel="external">谷歌云</a></li>
<li><a href="https://azure.microsoft.com/zh-cn/" target="_blank" rel="external">微软云</a></li>
</ul>
<h3 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h3><ul>
<li><a href="http://linode.com" target="_blank" rel="external">Linode</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/xiaowu_avatar.jpg"
                alt="周小伍 Joey" />
            
              <p class="site-author-name" itemprop="name">周小伍 Joey</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">150</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">周小伍 Joey</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">270.1k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://joeyblog.disqus.com/count.js" async></script>
    

    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
